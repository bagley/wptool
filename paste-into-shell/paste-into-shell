read -s -dĦ scan_strings
##-### remember all \ must be converted to '\\' ###--###
eval($___($__));
eval(stripslashes(@$_POST[
eval(stripslashes(array_pop(
eval(base64_decode(
eval(gzinflate(str_rot13(base64_decode(
Array(base64_decode(
sha1(base64_decode(
print(base64_decode(
wsoScandir($dir)
substr(current(array_keys(
cwd = @getcwd();
$OOO000000=urldecode(
wsoScandir($dir
$l___l_='base'.(32*2)
substr(md5(strrev(
cwd[strlen($cwd)
="x62
+ r + "&r=" + document.referrer;
if(strtoupper(substr(PHP_OS, 0, 3) ) == "WIN")
){if(@copy(
copy("endless.html
system("wget
symlink("/","sym/root");
@copy($_FILES['file']['tmp_name']
error_reporting(0);if(
x6C\\x28\\x67\\x7A\\x69
"/.*/e","\\x28\\x65\\x76\\x61
preg_replace("/.*/e",
preg_replace(\\"\\x
Windows-1251";preg_replace(
); exit(); } if(isset(
system("$cmd"); die;}
rtrim($security_code, "/");
window.top.location.href="http://
@ini_get("disable_functions")
die(PHP_OS.chr(49).chr(48).chr(43).md5(0987654321)
die(PHP_OS.chr(49).chr(49).chr(43).md5(0987654321)
eval($s21(${$s20}
strtolower($sF[4].$sF[5].$sF[9].$sF[10]
${eval(base64_decode('DQokYXV0aF9wYXNzID0gIiI7DQokY29sb3IgP
fwrite($fp,"\\xEF\\xBB\\xBF"
if(strtolower(substr(PHP_OS,0,3))=='win') $s="\\
${"_PO"."ST"}
${'_PO'.'ST'}
\\x47LOB\\x41\\x4c\\x53
\\x76\\x72vw\\x65y\\x70\\x7an\\x69\\x70\\x75
\\x61\\x63\\x74\\x69\\x6f\\x6e
$_passssword =
$passsword
$passssword
$passsssword
$passssssword
$_passsword
$_passssword
$_passsssword
$_passssssword
@array((string)$_REQUEST['password']
stripslashes($_REQUEST['re_password'])
eval(base64_decode(file_get_contents('php://input')))
mt_rand(0,count($not_android_urls)-1)
mt_rand(0,count($android_urls)-1);
\\x65\\x76\\x61\\x6C\\x28\\x67\\x7A\\x69\\x6E\\x66\\x6C\\x61
x78\\x6b\\x72\\x74\\x79z\\x6e
x65\\x74\\x75\\x72\\x6e
$default_action = 'FilesMan';
[php][RES]" . base64_encode($respond) . "[/RES]
base64_decode($_GET['u'])
eval(gzuncompress(base64_decode('eNqs/QV3Y1e2Lgz/FSXjvCPdKce1W
$au=$jq(@$_COOKIE['ContentJQ1']);
eval(base64_decode($_REQUEST["sam"]));
$slash.implode($slash,$t_p)
eval(gzinflate(str_rot13(base64_decode('FZrHroTMkmFfpXTdVAzwQX
eval(gzinflate(base64_decode("NZjHDoRIEkTv+xlzmhEr4Z1We8
eval(gzinflate(base64_decode($r57
strtolower($sF[4].$sF[5].$sF[9].$sF[10].$sF[6]
eval($OOO0000O0(
%66%67%36%73%62%65%68%70
$www= $_POST['ice']) && @preg_replace(
#p@$c@#
x6C\\x28\\x67\\x7A\\x69\\x6E\\x66\\x6C\\x61\\x74
is_uploaded_file/*;*/($_FILES
= mail(stripslashes($
x70i\\x6c\\x69\\x72\\x77\\x71\\x67
'wz8' . 'osA' . '/Jp' . '1Zy'
@preg_replace('/(.*)/e'
strtoupper($qV[4].$qV[3].$qV[2].$qV[0]
$GLOBALS[$GLOBALS['
"ba".""."s"."e"."".""."6"."4"."_"."de"."c"."o". ""."de".""
ZXZhbCgiXHg2NVx4NzZceDYxXHg2Q1x4MjhceDY3XHg3QVx4NjlceDZFXHg2Nl
md5($_REQUEST["pwd"])==="92eef09d8ed4eae0ce299c8c6f5f2a9b"
x6c\\x69\\x63e\\x6es\\x65\\x5f\\x69np\\x75t_f\\x61\\x6c\\x6cb\\x61\\x63\\x6b
implode("\\r\\n",array("%1html%3","%1head%3",head(
$__FILE__=__FILE__;$__X__
x47\\x4c\\x4f\\x42A\\x4c\\x53
escape(document[
escape(navigator[
base64'.'_decode
gzun'.'compress
gz'.'inflate
preg_replace("/.*/e","\\x
if(!isset($GLOBALS['."\\'\\a\\e\\0
\\x61\\156\\x75\\156\\x61
strtolower($_SERVER["\\x48\\124\\x54\\120\\x5f\\125\\x53
x47\\x4c\\x4f\\x42\\x41\\x4c\\x53
base64_decode('PD9waHAKLyoqCiAqIEZyb250IHRvIHRoZSBXb3JkUH
base64_decode('IyBCRUdJTiBXb3JkUHJlc3MKPElmTW9
\\x65\\x76\\x61\\x6C\\x28\\x24\\x4A\\x46\\x61\\x63\\x74\\x6F\\x72\\x79\\x28
\\x65\\x76\\x61\\x6C\\x28\\x67\\x7A\\x69\\x6E\\x66\\x6C\\x61\\x74\\x65\\x28
document.write(unescape("%3C%68%74%6D%6C%3E%3C%68%65%61%64%3E%3C%74%69%74%6C%65%3E%48
$time = str_replace("@"," ",$_GET["localtime"])
substr(md5($_GET["localdate"]),
@system("killall -9 ".basename("/usr/bin/host"));
\\x7f\\x45\\x4c\\x46\\x01\\x01\\x01\\x00\\x00\\x00\\x00\\x00\\x00
\\x7f\\x45\\x4c\\x46\\x02\\x01\\x01\\x00\\x00\\x00\\x00\\x00\\x00
crontab -l|grep -v crontab;echo;echo
@system("killall -9 ".basename(
array(/*'Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I'
${"\\x47\\x4c\\x4f\\x42\\x41L\\x53"}["\\x77m\\x68\\x72\\x76\\x6c\\x6c"]="\\x6b";
${"GL\\x4fB\\x41\\x4c\\x53"}["\\x6bg\\x6e\\x72\\x77i\\x6e\\x64\\x62n"]
base64_decode("LyhwcmludHxzcHJpbnR8ZWNobykv")
eval(base64_decode("93X2NvbnRlbnQoJGNvbnRlbnQpIHsKCQlpZiAob3VyVXJsQW5kUmVmZXJlcigpICAmJiA
base64_decode("aWYgKGlzc2V0KCRfUE9TVFsnY2hlY2snXSkpIH
$x = 'xP19k6tXtt6L/n0d4e8wve6O6N5eaS9eUc2St7fDhVGC
$_F=__FILE__;$_X=
$OOO0O0O00=__FILE__;$O00O00O00=__LINE__;
base64_decode('JE8wMDBPME8wMD1mb3BlbigkT09PME8wTzA
base64_decode(gzuncompress(base64_decode(
$QF97D38852B3B5E33DB41B9A75A7EB807="eNptl8uSozwShR
eval(base64_decode("Bi+3+P6z0h+5
eval(base64_decode('JF9YPWJhc2
$_X=base64_decode($_X)
000000000eval(gzinflate(base64_decode(
eval(gzinflate(base64_decode(
$_X=base64_decode($_X)
if(isset($_POST["rew"]) && !empty($_POST["rew"]))
$re=@unserialize($_POST["rew"]
preg_replace("/.*/".chr(101)."","\\x65\\x76\\x61\\x6C\\x28\\x67\\x7A\\x69\\x6E\\x66
echo(gzinflate(base64_decode("Bi+3+P6z0h
eval(gzuncompress(base64_decode
die(PHP_OS.chr(49).chr(48).chr(43).md5(098765432
$cfg='eHnk/byvIZ80Xz6tz/kWupsIypy4egX0GqeWwZyQKF45zAyD59qYN
unserialize(string_cpt(base64_decode(
if(!isset($GLOBALS["\\x61\\156\\x75\\156\\x61"])) { $ua=strtolower($_SERVER["\\x48\\124\\x54\\120\\x5f\\125\\x53\\105
eval(base64_decode("JGF1dGhfcGFzcyA9ICJjNWVkMTkyNDViNmRhMjB
$default_action = 'FilesMan';
base64_decode('7f15VyM5sjAO/119Tn+HbA8zhguFNwy4qqDbOza28b519+HkZjtxbuVMr
$_REQUEST[chr(115).chr(97).chr(109)])
eval(chr(47).chr(42).chr(116).chr(116)
chr(47).chr(42).chr(116).chr(116)
$GLOBALS["\\x61\\156\\x75\\156\\x61"])) { $ua=strtolower($_SERVER["\\x48\\124\\x54\\120\\x5f\\125
function_exists("TC9A16C47DA8EEE87")){function TC9A16C47DA8EEE87($T059EC46CFE335260){$T059EC46CFE335260=base64_decode($T059EC46CFE335260)
$au=$jq(@$_COOKIE['
$option("/438/e",$au,438); die();
$e29[19].$e29[94].$e29[94].$e29[33].$e29[94]
$e29[81].$e29[77].$e29[58].$e29[44].$e29[62]
Array('1'=>'i', '0'=>'K', '3'=>'u', '2'=>'M', '5'=>'v', '4'=>'1'
md5($_SERVER['PHP_AUTH_USER'])
array('base64','user_pass','substring','or id=','eval(','nutch');
array("w"=>"o","t"=>"g","l"=>"i","r"=>"a","q"=>"c"
strtoupper(md5(uniqid(time(
$s['o'].$s['w'].$s['v'].$s['q'].$s['w'].$s['t'].$s['c']
"\\163\\164\\162"
subprocess.Popen('del C:\\data.txt'
array_unshift($data,119,105,110,100,111,119,46,116
if ( $password == "123456" )
\\x47L\\x4f\\x42\\x41\\x4c\\x53
mysql_connect($_POST["v1"], $_POST["v2"], $_POST["v3"]
select concat(option_value,'|%5%5%5')
GL\\x4fB\\x41\\x4c\\x53
\\x6bg\\x6e\\x72\\x77i\\x6e\\x64\\x62n
\\x47\\x4c\\x4f\\x42\\x41L\\x53
\\x77m\\x68\\x72\\x76\\x6c\\x6c
$k17[90].$k17[60].$k17[60].$k17[48].$k17[60]
$k17[89].$k17[28].$k17[39].$k17[36]
$i96[94].$i96[51].$i96[51].$i96[39].$i96[51]
\\x65\\x76\\x61\\x6C
\\142\\141\\x73\\145\\x36\\x34\\x5f\\x64\\145\\x63\\157
file(__FILE__);eval(base64_decode
="base64_decode"
= "base64_decode"
='base64_decode'
'1'=>'j', '0'=>'t', '3'=>'G', '2'=>'d', '5'=>'k'
$fz|'eazzjwfpnpfamfxjctlg'
eval("return eval(
base64_decode("XCRfNjU0NjFiZWQwMjUzZGEyZjY1ZDNkMWYyNjE3MWYyZDggPSBceDczXHg3NFx4NzJceDY5
mail($_POST['ypuckmy']
$YLbgPfj524[42].$YLbgPfj524[19].$YLbgPfj524[13].$YLbgPfj524[42]
chr(101)."\\x76".chr(97)."".chr(108)."".chr(40)."g\\x7Ai\\x6E".chr(102)
'1'=>'t', '0'=>'p', '3'=>'v', '2'=>'n', '5'=>'k',
'1'=>'l', '0'=>'f', '3'=>'M', '2'=>'X', '5'=>'Z', '4'=>'s'
'1'=>'Z', '0'=>'q', '3'=>'6', '2'=>'H', '5'=>'V', '4'=>'M'
'1'=>'d', '0'=>'e', '3'=>'C', '2'=>'U', '5'=>'6', '4'=>'V'
'1'=>'z', '0'=>'G', '3'=>'5', '2'=>'X', '5'=>'N', '4'=>'V'
"b" . "a" . "s" . "e" . "6" . "4" . "_" . "d" . "e" . "c" . "o" . "d" . "e"
eval/**test*/(/**test*/$config/**test*/(/**test*/
$wordpress('eNqN/U+r9Eq75gd+lWo48J4DNVBIqVVP1uEYHmUqpFSmQkuh+CNF0
$s='str'.'_rot'.'1'.'3';         $c0=__FILE__
$www= $_POST['yt']
preg_replace('/ad/e','@'.str_rot13(
$aa = explode('}">', $a);
array (q,w,e,r,t,y,u,i,o,p,a,s,d,f,g,h,j,k,l,z,x
str_replace("YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY
if(isset($_GET["ickey"])){echo"<font color=#FFFFFF>[uname]".php_uname()
eval(base64_decode("ICAgIGVycm9yX3JlcG9ydGluZygwKTsgICRscnUgPSAiZ2cvNDcwNTYxN
return $str ? '=?utf-8?B?'.base64_encode($str).'?=' : null
Ħnone 2>/dev/null

read -s -dĦ INPUT
ZnVuY3Rpb24gbm93KCkgewogIGRhdGUgLXUgKyIlWSVtJWQtJUglTSVTIgp9CgpmdW5jdGlvbiB3cGNvcmUoKSB7CiAgaWYgW1sgJDEgPT0gIi0taGVscCIgfHwgJDEgPT0gIi1oIiBdXTsgdGhlbgogICAgZWNobyAtZSAiClRoaXMgdG9vbCBkb3dubG9hZHMgdGhlIGxhdGVzdCBjb3JlLCBhIG5ldyBjb3JlIG9mIHRoZSBjdXJyZW50IHZlcnNpb24sIG9yIGEKc3BlY2lmaWVkIHZlcnNpb24uCgogIFVzYWdlOiB3cGNvcmUgPGN1cnxkYnxuZXd8Iy4jLiM+CgpcdCAgICA8Ymxhbms+XG5cdFx0T25seSBkb3dubG9hZCB0aGUgbGF0ZXN0IGFyY2hpdmUgb2YgY29yZSBmaWxlcyBmb3Igd29yZHByZXNzLgpcdCAgICBjdXJcblx0XHREb3dubG9hZCBhbmQgaW5zdGFsbC9yZXBsYWNlIHRoZSBjb3JlIHdvcmRwcmVzcyBmaWxlcyAKXHRcdGJhc2VkIG9uIHRoZSB2ZXJzaW9uIHNwZWNpZmllZCBpbiB3cC1pbmNsdWRlcy92ZXJzaW9uLnBocApcdCAgICBkYlxuXHRcdERvd25sb2FkIGFuZCBpbnN0YWxsL3JlcGxhY2UgdGhlIGNvcmUgd29yZHByZXNzIGZpbGVzClx0XHRiYXNlZCBvbiB0aGUgZGF0YWJhc2UgdmVyc2lvbi4gVXNlZnVsIGlmIHRoZSBmaWxlcwpcdFx0YXJlIGNvcnJ1cHQvbWlzc2luZyBvciBpZiAnY3VyJyBjYW4ndCBnZXQgdGhlIHZlcnNpb24uClx0ICAgIG5ld1xuXHRcdERvd25sb2FkIGFuZCBpbnN0YWxsL3JlcGxhY2UgdGhlIG5ld2VzdCB2ZXJzaW9uIApcdFx0b2YgdGhlIGNvcmUgd29yZHByZXNzIGZpbGVzLiBUaGlzIGNhbiBiZSB1c2VkIHRvIHVwZ3JhZGUKXHRcdHdvcmRwcmVzcyBvciBpbnN0YWxsIGEgYnJhbmQgbmV3IGluc3RhbGxhdGlvbi4KXHQgICAgIy4jLiNcblx0XHREb3dubG9hZCBhbmQgaW5zdGFsbC9yZXBsYWNlIGEgc3BlY2lmaWMgdmVyc2lvbiBvZiAKXHRcdHRoZSBXb3JkcHJlc3MgY29yZSwgaW4gdGhlIGZvcm0gb2YgIy4jLiMKIgogICAgcmV0dXJuCiAgZWxpZiBbWyAkMSA9PSAiY3VyIiBdXTsgdGhlbiBmaWxlPXdvcmRwcmVzcy0kKHdwdmVyIC1xIHwgdGFpbCAtbiAxIHwgYXdrICd7cHJpbnQgJDF9JykKICBlbGlmIFtbICQxID09ICJkYiIgXV07IHRoZW4gZmlsZT13b3JkcHJlc3MtJCh3cHZlciAtcSB8IGF3ayAne3ByaW50ICQzfScpCiAgZWxpZiBbWyAkMSA9PSAibmV3IiBdXTsgdGhlbiBmaWxlPSJsYXRlc3QiCiAgZWxpZiBbWyAtbiAkMSBdXTsgdGhlbiBmaWxlPSJ3b3JkcHJlc3MtJDEiCiAgZWxzZSBmaWxlPSJsYXRlc3QiCiAgZmkKCiAgaWYgW1sgIiRmaWxlIiA9PSAid29yZHByZXNzLVVua25vd24iIF1dOyB0aGVuCiAgICBlY2hvIFVua25vd24gdmVyc2lvbiEKICAgIHJldHVybiA5CiAgZmkKICAKICBpZiBbWyAhIC1mICIkZmlsZS50YXIuZ3oiIF1dOyB0aGVuCiAgICBlY2hvICJEb3dubG9hZGluZyBpbnN0YWxsIGZpbGUgJGZpbGUudGFyLmd6IgogICAgIyAtLW5vLWNoZWNrLWNlcnRpZmljYXRlIGlzIGZvciBvbGRlciB2ZXJzaW9ucyBvZiB3Z2V0CiAgICAjIGRvbid0IGJlIHNpbGVudCwgaW4gY2FzZSBpdCBzdGFsbHMgYW5kIHdlIGFyZSBqdXN0IHdhaXRpbmcuLi4uLgogICAgd2dldCAtLW5vLWNoZWNrLWNlcnRpZmljYXRlICJodHRwczovL3dvcmRwcmVzcy5vcmcvJGZpbGUudGFyLmd6IgogICAgaWYgW1sgJD8gLW5lIDAgXV0gOyB0aGVuCiAgICAgIGVjaG8gIlVuYWJsZSB0byBkb3dubG9hZCAkZmlsZS50YXIuZ3oiCiAgICAgIHJtIC1mICIkZmlsZS50YXIuZ3oiCiAgICAgIHJldHVybiA5CiAgICBmaQogIGZpCiAgCiAgIyBjaGVjayBpZiBmaWxlIHdhcyBwcm9wZXJseSBkb3dubG9hZGVkIGFuZCBub3QgY29ycnVwdAogIGVjaG8gIlZlcmlmeWluZyBkb3dubG9hZGVkIGZpbGUuLi4iCiAgdGFyIHRmICIkZmlsZS50YXIuZ3oiID4gL2Rldi9udWxsCiAgdGFyX2V4aXRfY29kZT0kPwogIGlmIFtbICR0YXJfZXhpdF9jb2RlIC1uZSAwIF1dIDsgdGhlbgogICAgZWNobyAtZSAiXG5FcnJvcjogRG93bmxvYWRlZCBmaWxlIHdhcyBjb3JydXB0OiB0YXIgZ2F2ZSBlcnJvciBjb2RlICR0YXJfZXhpdF9jb2RlIgogICAgcm0gLWYgIiRmaWxlLnRhci5neiIKICAgIGVjaG8gLWUgIlJlbW92ZWQgY29ycnVwdCBmaWxlOiAkZmlsZS50YXIuZ3oiCiAgICBlY2hvICJUcnkgcnVubmluZyB0aGUgY29tbWFuZCBhZ2Fpbi4uLi4iCiAgICByZXR1cm4gOQogIGVsc2UKICAgIGVjaG8gIiRmaWxlLnRhci5neiBhcHBlYXJzIHRvIGJlIG9rYXkuIgogIGZpCiAgCiAgaWYgW1sgLXogJDEgXV0gOyB0aGVuCiAgICAjIHdlIHdlcmUgb25seSBzdXBwb3NlIHRvIGRvd25sb2FkIHRoZSBmaWxlCiAgICBlY2hvICJBcmNoaXZlIGRvd25sb2FkZWQiCiAgICByZXR1cm4KICBmaQogIAogIF9fd3BfcmFuZF9zdHJpbmcKICB0ZW1wPSQobm93KV8kd3BfcmFuZF9zdHJpbmcKICBlY2hvICJDaGVja2luZyBmb3IgV1AgZmlsZXMuLi4iCiAgbG9jYWwgd3BmaWxlcz0kKGZpbmQgLW1heGRlcHRoIDEgLW5hbWUgIndwLSoiIC1vIC1uYW1lIGluZGV4LnBocCAtbyAtbmFtZSBsaWNlbnNlLnR4dCAtbyAtbmFtZSByZWFkbWUuaHRtbCAtbyAtbmFtZSB4bWxycGMucGhwKQogIGlmIFtbIC16ICIkd3BmaWxlcyIgXV07IHRoZW4KICAgIGVjaG8gIk5vIG9sZCBXUCBmaWxlcyBmb3VuZC4uLiIKICBlbHNlCiAgICBvbGRjb3JlPSJjb3JlXyR0ZW1wIgogICAgZWNobyAiT2xkIFdQIGZpbGVzIGZvdW5kISBNb3ZpbmcgdGhlbSB0byAkb2xkY29yZS4uLiIKICAgIG1rZGlyICIkb2xkY29yZSIKICAgIHdoaWxlIHJlYWQgLXIgZjsgZG8gbXYgIiRmIiAiJG9sZGNvcmUiOyBkb25lIDw8PCAiJHdwZmlsZXMiCiAgZmkKCiAgdGFyIC14ZiAiJGZpbGUudGFyLmd6IiAtLXN0cmlwLWNvbXBvbmVudHM9MSAmJiBlY2hvICJFeHRyYWN0ZWQgbmV3IGNvcmUgZmlsZXMuLi4iCiAgcm0gLXJmICIkZmlsZS50YXIuZ3oiICYmIGVjaG8gIlJlbW92ZWQgJGZpbGUudGFyLmd6Li4uIgogIGlmIFtbIC1kICIkb2xkY29yZS93cC1jb250ZW50IiBdXTsgdGhlbgogICAgbXYgd3AtY29udGVudCB3cC1jb250ZW50X3N0b2NrICYmIGVjaG8gIk1vdmVkIGRlZmF1bHQgd3AtY29udGVudCB0byB3cC1jb250ZW50X3N0b2NrLi4uIgogICAgbXYgIiRvbGRjb3JlL3dwLWNvbnRlbnQiIC4gJiYgZWNobyAiTW92ZWQgb2xkIHdwLWNvbnRlbnQgYmFjayBpbnRvIHBsYWNlLi4uIgogICAgcm0gIndwLWNvbnRlbnRfc3RvY2siIC1yZiAmJiBlY2hvICJSZW1vdmVkIHdwLWNvbnRlbnRfc3RvY2siCiAgZmkKICBpZiBbWyAtZiAiJG9sZGNvcmUvd3AtY29uZmlnLnBocCIgXV07IHRoZW4KICAgIGNwICIkb2xkY29yZS93cC1jb25maWcucGhwIiAuCiAgICBlY2hvICJDb3BpZWQgb2xkIHdwLWNvbmZpZy5waHAgYmFjayBpbnRvIHBsYWNlLi4uIgogICAgIyBydW4gZml4ZXMgLSBubyBuZWVkIGlmIHdlIGRvbid0IGhhdmUgYSBjb25maWcgZmlsZQogICAgd3BmaXgKICBlbHNlCiAgICAjIERvIG5vdCBkbyB0aGlzLiBPbiBhIG5ldyBpbnN0YWxsIHRoZSB1c2VyIHdpbGwgZ2V0OgogICAgIyAgICAiRXJyb3IgZXN0YWJsaXNoaW5nIGEgZGF0YWJhc2UgY29ubmVjdGlvbiIKICAgICMgYmVjYXVzZSB3ZSBoYXZlIGNvcGllZCBkZWZhdWx0IChpbmNvcnJlY3QpIGRhdGEgaW50byBwbGFjZS4uLgogICAgI2NwIHdwLWNvbmZpZy1zYW1wbGUucGhwIHdwLWNvbmZpZy5waHAKICAgICNlY2hvICJDb3BpZWQgd3AtY29uZmlnLXNhbXBsZS5waHAgaW50byBwbGFjZS4uLiIKICAgIGVjaG8gIk5vIGNvbmZpZyB3YXMgZm91bmQuIFlvdSBuZWVkIHRvIGdvIHRvIHlvdXIgc2l0ZSBhbmQgcnVuIHRocm91Z2ggdGhlIHNldHVwLiIKICAgICMgaWYgaXQncyBhbiB1cGdyYWRlLCBydW4gdXBncmFkZXMKICBmaQogIAogICMgc2VhbCB1cCBjb3JlX3h4eHh4IGluIGEgdGFyLmd6IGZpbGUKICBpZiBbWyAtZCAiJG9sZGNvcmUiIF1dIDsgdGhlbgogICAgIyByZW1vdmUgYW55IHdwLWNvbmZpZy5waHAgaWYgc3RpbGwgaW4gb2xkY29yZQogICAgcm0gLWYgJG9sZGNvcmUvd3AtY29uZmlnKgogICAgdGFyIGN6ZiAkb2xkY29yZS50YXIuZ3ogJG9sZGNvcmUKICAgIHJtICRvbGRjb3JlIC1yZiAmJiBlY2hvICJPbGQgY29yZSBmaWxlcyBwbGFjZWQgaW50byBhIHRhciBmaWxlIgogIGZpCiAgCiAgIyBzZWFyY2ggZm9yIG1hbHdhcmUKICBlY2hvCiAgZWNobwogIGVjaG8gIioqKiBXQVJOSU5HOiAqKiogVGhpcyB0b29sIGlzIG5vdCBtZWFudCB0byBiZSB1c2VkIHRvIGZpeCBoYWNrZWQgc2l0ZXMuIgogIGVjaG8gIiBJZiB0aGUgc2l0ZSB5b3UgYXJlIGZpeGluZyBpcyBoYWNrZWQsIHRoaXMgdG9vbCBtYXkgYmUgYWJsZSB0byBnZXQgdGhlIgogIGVjaG8gIiBzaXRlIGJhY2sgdXAsIGJ1dCB0aGUgbWFsd2FyZSB3aWxsIHJlaGFjayB0aGUgc2l0ZSB3aXRoaW4gYSBmZXcgZGF5cyIKICBlY2hvICIgKG9yIGhvdXJzL21vbWVudHMpLCBtYWtpbmcgeW91IG9yIHlvdXIgY3VzdG9tZXIgaGF2ZSBhIG1pc2VyYWJsZSBkYXkuLi4iCiAgZWNobwogIGVjaG8gIlBlcmZvcm1pbmcgYSBxdWljayBjaGVjayBvZiB0aGUgbWFpbiBmaWxlcy4uLiIKICBzY2FucmVzdWx0cz0iJCh3cHNjYW4gcXVpY2sgc2NyaXB0KSIKICBpZiBbWyAtbiAkc2NhbnJlc3VsdHMgXV0gOyB0aGVuCiAgICBlY2hvICIKRVJST1IhISEgVGhpcyBzaXRlIGFwcGVhcnMgdG8gKHN0aWxsKSBjb250YWluIG1hbHdhcmUuIFdoaWxlIGl0IG1heSBsb2FkLCAKdGhlIHNpdGUgd2lsbCByZWluZmVjdCBpdHNlbGYgd2l0aGluIHRoZSBuZXh0IGZldyBkYXlzIChvciBzb29uZXIpCgogICAgVGhpcyBzaXRlICoqKnJlYWxseSoqKiBuZWVkcyB0byBiZSBjaGVja2VkIGFuZCBjbGVhbmVkLgogICAgCkJlZ2luIGxpc3QgSEFDS0VEIGZpbGVzIChvciBzbyB0aGV5IGFwcGVhciksIGFzICcuL3BhdGgvdG8vZmlsZTogY29kZS1leGFtcGxlJwoKJHNjYW5yZXN1bHRzCgogIEVuZCBsaXN0IEhBQ0tFRCBmaWxlcy4KICAKIEFuZCBpZiB5b3UgYXJlIGEgdGVjaCB3b3JraW5nIGZvciBhIGhvc3RpbmcgY29tcGFueSwgeW91IHNob3VsZCB0YWxrIHRvIGFuZAogbm90aWZ5IHRob3NlIGluIGNoYXJnZSBvZiBzY2FubmluZyBhbmQgc3VzcGVuZGluZyBhY291bnRzLCBiZWZvcmUgdGhpcyAKIGluZmVjdGlvbiBzcHJlYWRzLCBvciAobW9yZSkgc3BhbSBtZXNzYWdlcyBnZXQgc2VudCBvdXQuCiIKCiAgIyBzaG91bGQgd2UgcHV0IHRoZSBzaXRlIGludG8gbWFpbnRlbmFuY2UgbW9kZT8KICBlbHNlCiAgICBlY2hvICJObyBjb21tb24gaGFjayBmaWxlcyBmb3VuZC4gSWYgaW4gZG91YnQsIHlvdSBtYXkgdHJ5ICd3cHNjYW4gZnVsbCIKICBmaQp9CgpmdW5jdGlvbiB3cGZpeCgpIHsKICBlY2hvCiAgaWYgW1sgJDEgPT0gIi0taGVscCIgfHwgJDEgPT0gIi1oIiBdXTsgdGhlbgogICAgZWNobyAtZSAiVGhpcyB0b29sIHJ1bnMgdmFyaW91cyBidWlsdC1pbiBXb3JkcHJlc3MgZnVuY3Rpb25zIGFuZCBmaXhlcywKYW5kIGNhbiBydW4gYSBmZXcgb3RoZXJzIHRvby4KClVzYWdlOlx0d3BmaXggW3Blcm1zXQoKXHQoTm8gb3B0aW9ucykKXHRcdENsZWFycyBXb3JkUHJlc3MncyBjYWNoZSBhbmQgcnVucyBhbnkgbmVlZGVkIGRhdGFiYXNlIHVwZGF0ZXMuClx0XHRUaGlzIGlzIHNhZmUsIGFzIGl0J3Mgd2hhdCB5b3Ugbm9ybWFsbHkgZG8gd2hlbiB5b3UgdXBncmFkZSBXUC4KClx0cGVybXMKXHRcdEZpeCB0aGUgcGVybWlzc2lvbnMgb2YgV1AgZmlsZXMgdG8gd3JpdGVhYmxlLgoiCiAgICByZXR1cm4KICBlbGlmIFtbICQxID09ICJwZXJtcyIgXV0gfHwgW1sgJDEgPT0gIi0tcGVybXMiIF1dIDsgdGhlbgogICMgY2hhbmdpbmcgcGVybXMgZG9lcyBub3QgbmVlZCB3cC1jb25maWcsIGFuZCB3cC1hZG1pbiBjb3VsZCBiZSBibG9ja2VkCiAgIyBUT0RPOiBhbGxvdyB1c2VyIHRvIHNwZWNpZnkgcGVybXMgKDc1NSA3NzcsIDY0MCwgZXRjKQojICAgICJUaGVyZSBhcmUgc2V2ZXJhbCB3YXlzIHdlIGNhbiBjaGFuZ2UgeW91ciBwZXJtaXNzaW9uczoKIyAgICAgWzFdIGNobW9kIGEtcnd4LHU9cndYLGdvPXJYIC1SIGZpbGVzCiMgICAgIFsyXSBmaW5kMnBlcmwgZmlsZXMgLXR5cGUgW2QvZl0gfCBwZXJsIHwgY2htb2QgNzU1LzY0NCAKIyAgICAgWzNdIGZpbmQgZmlsZXMgLXR5cGUgW2QvZl0gfCBjaG1vZCA3NTUvNjQ0CiMgICAgIChOb3RlIHRoYXQgdGhlIGZpbmQgY29tbWFuZHMgd2lsbCBhY3R1YWxseSBiZSAyIGNvbW1hbmRzKQojICAgICBJZiB5b3UgZG9uJ3Qga25vdywgJzEnIGlzIGEgZ29vZCBjaG9pY2UuCiMgICAgIEhvdyB3b3VsZCB5b3UgbGlrZSB0byByZXNldCB0aGUgcGVybWlzc2lvbnM/ICBbMSwyLDNdPyIKICAgIGVjaG8gIlJlc2V0dGluZyBwZXJtaXNzaW9ucyIKICAgICMgdGhlc2UgZmlyc3Qgb25lcyBtYXkgb3IgbWF5IG5vdCBiZSBoZXJlLi4uCiAgICBjaG1vZCAtYyAtZiBhLXJ3eCx1PXJ3WCxnbz1yWCB4bWxycGMucGhwIC5odGFjY2VzcwogICAgY2htb2QgLWMgLWYgYS1yd3gsdT1yd1gsZ289clggLVIgd3AtKiBpbmRleC5waHAgXAogICAgICAmJiBlY2hvICJTdWNjZXNzZnVsbHkgY2hhbmdlZCBmaWxlIHBlcm1pc3Npb25zIiBcCiAgICAgIHx8IGVjaG8gIkZhaWxlZCB0byBmaXggcGVybWlzc2lvbnMgb3IgeW91IGFyZSBtaXNzaW5nIGZpbGVzIgogICAgcmV0dXJuICQ/CiAgICAKICBlbGlmIFtbICEgLWYgd3AtY29uZmlnLnBocCB8fCAhIC1mIHdwLWFkbWluL3VwZ3JhZGUtZnVuY3Rpb25zLnBocCBdXTsgdGhlbgogICAgZWNobyAtZSAiQ291bGQgbm90IGZpbmQgb25lIG9yIG1vcmUgb2YgdGhlIG5lY2Vzc2FyeSBmaWxlcyAod3AtY29uZmlnLnBocCBvciB3cC1hZG1pbi91cGdyYWRlLWZ1bmN0aW9ucy5waHApIVxuIgogICAgcmV0dXJuIDkKICBlbGlmIFtbIC1uICQxIF1dIDsgdGhlbgogICAgZWNobyAiVW5rbm93biBvcHRpb24ocyk6ICQqIgogICAgd3BmaXggLWgKICAgIHJldHVybiA5CiAgZmkKICAKICBlY2hvICJMb2FkaW5nIFdvcmRQcmVzcy4uIgogIHBocCAtcSA8PCJFT0YiICYmIGVjaG8gIlJhbiBmaXguLi4iIHx8IGVjaG8gRXJyb3IgcnVubmluZyBmaXghCjw/cGhwCiAgcmVxdWlyZV9vbmNlKCd3cC1jb25maWcucGhwJyk7CiAgZWNobyAiV29yZFByZXNzIGxvYWRlZC4uLlxuIjsKICByZXF1aXJlX29uY2UoJ3dwLWFkbWluL3VwZ3JhZGUtZnVuY3Rpb25zLnBocCcpOwogIGVjaG8gIlVwZ3JhZGUgZnVuY3Rpb25zIGxvYWRlZC4uLlxuIjsKICB3cF9jYWNoZV9mbHVzaCgpOwogIGVjaG8gIk9iamVjdCBjYWNoZSBmbHVzaGVkLi4uXG4iOwogIG1ha2VfZGJfY3VycmVudCgpOwogIGVjaG8gIkRhdGFiYXNlIG1hZGUgY3VycmVudC4uLlxuIjsKICAvKnVwZ3JhZGVfMTYwKCk7CiAgZWNobyAiRGF0YSB1cGdyYWRlZC4uLlxuIjsqLwogICR3cF9yZXdyaXRlLT5mbHVzaF9ydWxlcygpOwogIGVjaG8gIlJld3JpdGUgcnVsZXMgZmx1c2hlZC4uLlxuIjsKICB3cF9jYWNoZV9mbHVzaCgpOwogIGVjaG8gIk9iamVjdCBjYWNoZSBmbHVzaGVkLi4uXG4iOwogIC8qIGNsZWFyIHBsdWdpbiBjYWNoZXMuIElmIHlvdSBrbm93IG9mIGEgcGx1Z2luCiAgICogYW5kIGhvdyB0byBoYXZlIGl0IGNsZWFyIHRoZSBjYWNoZXMsIHBsZWFzZQogICAqIGxldCBtZSBrbm93IGFuZCBJIHdpbGwgc2VlIGFib3V0IHB1dHRpbmcgaXQgaW4gaGVyZSAqLwogIHJlcXVpcmVfb25jZSgnd3AtbG9hZC5waHAnKTsKICByZXF1aXJlX29uY2UoJ3dwLWluY2x1ZGVzL3BsdWdnYWJsZS5waHAnKTsKICBpZiAoZnVuY3Rpb25fZXhpc3RzKCd3M3RjX2ZsdXNoX2FsbCcpKSB7CiAgICB3M3RjX2ZsdXNoX2FsbCgpOwogICAgZWNobyAiQ2xlYXJlZCBXMyBUb3RhbCBDYWNoZXNcbiI7IAogIH0KICBpZiAoZnVuY3Rpb25fZXhpc3RzKCd3cF9jYWNoZV9jbGVhcl9jYWNoZScpKSB7CiAgICB3cF9jYWNoZV9jbGVhcl9jYWNoZSgpOwogICAgZWNobyAiQ2xlYXJlZCBXUCBTdXBlciBDYWNoZSBmaWxlc1xuIjsKICB9Cj8+CkVPRgogIGVjaG8KICBlY2hvICJBbHNvIHRyeSB3cHRlc3RzIGFuZCB3cHRyYWNlLiBUaGV5IGhlbHAgdG8gaWRlbnRpZnkgZXJyb3JzLiIKICBlY2hvCn0KCmZ1bmN0aW9uIHdwaHQoKSB7CiAgZWNobwogIGlmIFtbICQxID09ICItLWhlbHAiIHx8ICQxID09ICItaCIgXV07IHRoZW4KICAgIGVjaG8gLWUgIlRoaXMgdG9vbCBnZW5lcmF0ZXMgYSBuZXcgLmh0YWNjZXNzIGZpbGUuXG5cblVzYWdlOlxuXG5cdHdwaHRcbiIKICAgIHJldHVybgogIGVsaWYgW1sgISAtZiB3cC1jb25maWcucGhwIHx8ICEgLWYgd3AtYWRtaW4vaW5jbHVkZXMvbWlzYy5waHAgXV07IHRoZW4KICAgIGVjaG8gLWUgIkNvdWxkIG5vdCBmaW5kIG9uZSBvciBtb3JlIG9mIHRoZSBuZWNlc3NhcnkgZmlsZXM6XG4iCiAgICBlY2hvIC1lICJcdHdwLWNvbmZpZy5waHBcblx0d3AtYWRtaW4vaW5jbHVkZXMvbWlzYy5waHBcbiIKICAgIHJldHVybiA5CiAgZmkKICB0ZW1wPSQobm93KQogIFtbIC1mIC5odGFjY2VzcyBdXSAmJiBjcCAuaHRhY2Nlc3MgLmh0YWNjZXNzXyR0ZW1wCiAgZWNobyAiTG9hZGluZyBXb3JkUHJlc3MuLi4iCiAgcGhwIC1xIDw8IkVPRiIgJiYgZWNobyAiR2VuZXJhdGVkIC5odGFjY2VzcyBydWxlcy4uLiIgfHwgZWNobyBFcnJvciB3cml0aW5nIHRvIC5odGFjY2VzcyEKPD9waHAKICAkX1NFUlZFUlsnU0NSSVBUX05BTUUnXSA9ICIiOwogIHJlcXVpcmVfb25jZSgnd3AtY29uZmlnLnBocCcpOwogIHJlcXVpcmVfb25jZSgnd3AtYWRtaW4vaW5jbHVkZXMvbWlzYy5waHAnKTsKICAkcnVsZXMgPSBleHBsb2RlKCAiXG4iLCAkd3BfcmV3cml0ZS0+bW9kX3Jld3JpdGVfcnVsZXMoKSApOwogIGVjaG8gIkluc2VydGluZyAob3IgdXBkYXRpbmcpIHRoZSBmb2xsb3dpbmcgcnVsZXMgaW50byAuaHRhY2Nlc3M6XG5cbiI7CiAgZm9yZWFjaCAoJHJ1bGVzIGFzICRyKSB7CiAgICBlY2hvICIkclxuIjsKICB9CiAgaW5zZXJ0X3dpdGhfbWFya2VycyggJy5odGFjY2VzcycsICdXb3JkUHJlc3MnLCAkcnVsZXMgKTsKPz4KRU9GCiAgZWNobwp9CgpmdW5jdGlvbiB3cGNvbm4oKSB7CiAgW1sgLXogJDEgfHwgJDEgIT0gd3AqIF1dICYmIHJldHVybgogIGlmIFtbICEgLWYgd3AtY29uZmlnLnBocCBdXTsgdGhlbgogICAgZWNobyAtZSAiXG5Db3VsZCBub3QgZmluZCB3cC1jb25maWcucGhwIVxuIgogICAgcmV0dXJuIDkKICBmaQogIG15Y29ubj0iIgogIHJlYWQgLXIgZGJob3N0IGRibmFtZSBkYnBhc3MgZGJ1c2VyIGRicHJlZml4IDw8PCAkKGNhdCB3cC1jb25maWcucGhwIHwgZWdyZXAgIl5bXi9dLipbXCInXURCXyhOQU1FfFVTRVJ8UEFTU1dPUkR8SE9TVFteX10pfHRhYmxlX3ByZWZpeCIgfCBzb3J0IC1kIHwgc2VkICJzLy4qW1wiJ11cKC4qXClbXCInXS4qOy4qL1wxLyIgKQogICNbWyAteiAkZGJwcmVmaXggXV0gJiYgZGJwcmVmaXg9JGp1bmsgI3NvbWV0aW1lcyB0aGVyZSBpc24ndCBhIGp1bmsgZW50cnkKICBxPSJVU0UgJGRibmFtZTsgIgogIGlmIFtbICQxID09ICJ3cGRiaW1wb3J0IiBdXTsgdGhlbgogICAgZWNobyAiU3RhcnRpbmcgaW1wb3J0Li4uIgogICAgbXlzcWwgLWggIiRkYmhvc3QiIC11ICIkZGJ1c2VyIiAtcCIkZGJwYXNzIiAiJGRibmFtZSIgPCAiJDIiICYmIGVjaG8gLWUgIkltcG9ydGVkIGZpbGUgJyQyJyB0byBkYXRhYmFzZSAnJGRibmFtZScuXG4iIHx8IGVjaG8gLWUgIkZhaWxlZCB0byBpbXBvcnQgZmlsZSAnJDInIHRvIGRhdGFiYXNlICckZGJuYW1lJyFcbiIKICAgIHJldHVybgogIGVsaWYgW1sgJDEgPT0gIndwZGJpbXBvcnRneiIgXV07IHRoZW4KICAgIGVjaG8gIlN0YXJ0aW5nIGltcG9ydC4uLiIKICAgIGd1bnppcCA8ICIkMiIgfCBteXNxbCAtaCAiJGRiaG9zdCIgLXUgIiRkYnVzZXIiIC1wIiRkYnBhc3MiICIkZGJuYW1lIiAmJiBlY2hvIC1lICJJbXBvcnRlZCBnemlwcGVkIGZpbGUgJyQyJyB0byBkYXRhYmFzZSAnJGRibmFtZScuXG4iIHx8IGVjaG8gLWUgIkZhaWxlZCB0byBpbXBvcnQgZmlsZSAnJDInIHRvIGRhdGFiYXNlICckZGJuYW1lJyFcbiIKICAgIHJldHVybgogIGVsaWYgW1sgJDEgPT0gIndwZGJleHBvcnQiIF1dOyB0aGVuCiAgICBlY2hvICJTdGFydGluZyBleHBvcnQuLi4iCiAgICBmaWxlPSIkMiIKICAgIFtbIC16ICIkZmlsZSIgXV0gJiYgX193cF9yYW5kX3N0cmluZyAmJiBmaWxlPSIkZGJuYW1lIl8kKG5vdyktJHt3cF9yYW5kX3N0cmluZ30uc3FsCiAgICBteXNxbGR1bXAgLWggIiRkYmhvc3QiIC11ICIkZGJ1c2VyIiAtcCIkZGJwYXNzIiAiJGRibmFtZSIgPiAiJGZpbGUiICYmIGVjaG8gLWUgIkV4cG9ydGVkIGRhdGFiYXNlICckZGJuYW1lJyB0byBmaWxlICckZmlsZScuXG4iIHx8IGVjaG8gLWUgIkZhaWxlZCB0byBleHBvcnQgZGF0YWJhc2UgJyRkYm5hbWUnIHRvIGZpbGUgJyRmaWxlJyFcbiIKICAgIHJldHVybgogIGVsaWYgW1sgJDEgPT0gIndwZGJleHBvcnRneiIgXV07IHRoZW4KICAgIGVjaG8gIlN0YXJ0aW5nIGV4cG9ydC4uLiIKICAgIGZpbGU9IiQyIgogICAgW1sgLXogIiRmaWxlIiBdXSAmJiBfX3dwX3JhbmRfc3RyaW5nICYmIGZpbGU9IiRkYm5hbWUiXyQobm93KS0ke3dwX3JhbmRfc3RyaW5nfS5zcWwuZ3oKICAgIG15c3FsZHVtcCAtaCAiJGRiaG9zdCIgLXUgIiRkYnVzZXIiIC1wIiRkYnBhc3MiICIkZGJuYW1lIiB8IGd6aXAgPiAiJGZpbGUiICYmIGVjaG8gLWUgIkV4cG9ydGVkIGd6aXBwZWQgZGF0YWJhc2UgJyRkYm5hbWUnIHRvIGZpbGUgJyRmaWxlJy5cbiIgfHwgZWNobyAtZSAiRmFpbGVkIHRvIGV4cG9ydCBkYXRhYmFzZSAnJGRibmFtZScgdG8gZmlsZSAnJGZpbGUnIVxuIgogICAgcmV0dXJuCiAgZWxpZiBbWyAkMSA9PSAid3BkYmRyb3AiIF1dOyB0aGVuIHE9J0RST1AgZGF0YWJhc2UgJyRkYm5hbWUnOyBDUkVBVEUgREFUQUJBU0UgJyRkYm5hbWUnOyc7CiAgZWxpZiBbWyAkMSA9PSAid3BkYiIgXV07IHRoZW4gcT0kcSdTSE9XIHRhYmxlcyBsaWtlICInJGRicHJlZml4JyUiOyc7CiAgZWxpZiBbWyAkMSA9PSAid3BkYnZlciIgXV07IHRoZW4gcT0kcSdTRUxFQ1Qgb3B0aW9uX3ZhbHVlIEZST00gJyRkYnByZWZpeCdvcHRpb25zIFdIRVJFIG9wdGlvbl9uYW1lID0gImRiX3ZlcnNpb24iOycKICBlbGlmIFtbICQxID09ICJ3cHVybCIgXV07IHRoZW4gcT0kcSdTRUxFQ1Qgb3B0aW9uX2lkLCBvcHRpb25fbmFtZSwgb3B0aW9uX3ZhbHVlIEZST00gJyRkYnByZWZpeCdvcHRpb25zIFdIRVJFIG9wdGlvbl9uYW1lID0gInNpdGV1cmwiIE9SIG9wdGlvbl9uYW1lID0gImhvbWUiOycKICBlbGlmIFtbICQxID09ICJ3cHVybG1vZCIgXV07IHRoZW4KICAgIFtbIC16ICQyIF1dICYmIGVjaG8gTm8gVVJMIHNwZWNpZmllZCEgJiYgcmV0dXJuIDkKICAgIHE9JHEnVVBEQVRFICckZGJwcmVmaXgnb3B0aW9ucyBTRVQgb3B0aW9uX3ZhbHVlPSInJDInIiBXSEVSRSBvcHRpb25fbmFtZT0ic2l0ZXVybCIgT1Igb3B0aW9uX25hbWU9ImhvbWUiOycKICAjIGdldHRpbmcgYW5kIHNldHRpbmcgb25seSBzaXRldXJsIG9yIGhvbWV1cmwKICBlbGlmIFtbICQxID09ICJ3cHNpdGV1cmwiIF1dOyB0aGVuIHE9JHEnU0VMRUNUIG9wdGlvbl9pZCwgb3B0aW9uX25hbWUsIG9wdGlvbl92YWx1ZSBGUk9NICckZGJwcmVmaXgnb3B0aW9ucyBXSEVSRSBvcHRpb25fbmFtZSA9ICJzaXRldXJsIjsnCiAgZWxpZiBbWyAkMSA9PSAid3Bob21ldXJsIiBdXTsgdGhlbiBxPSRxJ1NFTEVDVCBvcHRpb25faWQsIG9wdGlvbl9uYW1lLCBvcHRpb25fdmFsdWUgRlJPTSAnJGRicHJlZml4J29wdGlvbnMgV0hFUkUgb3B0aW9uX25hbWUgPSAiaG9tZSI7JwogIGVsaWYgW1sgJDEgPT0gIndwc2l0ZXVybG1vZCIgXV07IHRoZW4KICAgIFtbIC16ICQyIF1dICYmIGVjaG8gTm8gVVJMIHNwZWNpZmllZCEgJiYgcmV0dXJuIDkKICAgIHE9JHEnVVBEQVRFICckZGJwcmVmaXgnb3B0aW9ucyBTRVQgb3B0aW9uX3ZhbHVlPSInJDInIiBXSEVSRSBvcHRpb25fbmFtZT0ic2l0ZXVybCI7JwogIGVsaWYgW1sgJDEgPT0gIndwaG9tZXVybG1vZCIgXV07IHRoZW4KICAgIFtbIC16ICQyIF1dICYmIGVjaG8gTm8gVVJMIHNwZWNpZmllZCEgJiYgcmV0dXJuIDkKICAgIHE9JHEnVVBEQVRFICckZGJwcmVmaXgnb3B0aW9ucyBTRVQgb3B0aW9uX3ZhbHVlPSInJDInIiBXSEVSRSBvcHRpb25fbmFtZT0iaG9tZSI7JwogICMgc2VhcmNoIHRoZSBwb3N0cyBhbmQgcmVuYW1lIHRoZSBvbGQgdXJsIHRvIGEgbmV3IG9uZQogIGVsaWYgW1sgJDEgPT0gIndwdXJscmVwbGFjZSIgXV07IHRoZW4KICAgIFtbIC16ICIkMiIgfHwgLXogIiQzIiBdXSAmJiBlY2hvIFRvIHJlcGxhY2UgdXJscyBpbiBwb3N0cyB0aGVyZSBoYXMgdG8gYmUgdHdvIHVybHMhICYmIHJldHVybiA5CiAgICAjIEkgZG9uJ3QgZG8gYSBzZWFyY2ggYW5kIHJlcGxhY2UgaW4gdGhlIG9wdGlvbnMgdGFibGUsIGFzIEkndmUgc2VlbiB0aGVtZXMgZGVzdHJveWVkIHRoYXQgd2F5CiAgICBxPSRxJ1VQREFURSAnJGRicHJlZml4J3Bvc3RzIFNFVCBndWlkID0gcmVwbGFjZShndWlkLCAiJyQyJyIsIickMyciKTsKICAgICAgICBVUERBVEUgJyRkYnByZWZpeCdwb3N0cyBTRVQgcG9zdF9jb250ZW50ID0gcmVwbGFjZShwb3N0X2NvbnRlbnQsICInJDInIiwgIickMyciKTsKICAgICAgICBVUERBVEUgJyRkYnByZWZpeCdwb3N0bWV0YSBTRVQgbWV0YV92YWx1ZSA9IHJlcGxhY2UobWV0YV92YWx1ZSwgIickMiciLCAiJyQzJyIpOycKICBlbGlmIFtbICQxID09ICJ3cHBsdWciIF1dOyB0aGVuIHE9JHEnU0VMRUNUIG9wdGlvbl92YWx1ZSBGUk9NICckZGJwcmVmaXgnb3B0aW9ucyBXSEVSRSBvcHRpb25fbmFtZSA9ICJhY3RpdmVfcGx1Z2lucyI7JwogIGVsaWYgW1sgJDEgPT0gIndwcGx1Z2Rpc2FibGVhbGwiIF1dOyB0aGVuIHE9JHEnVVBEQVRFICckZGJwcmVmaXgnb3B0aW9ucyBTRVQgb3B0aW9uX3ZhbHVlPSJhOjA6e30iIFdIRVJFIG9wdGlvbl9uYW1lID0gImFjdGl2ZV9wbHVnaW5zIjsnCiAgZWxpZiBbWyAkMSA9PSAid3BwbHVncmVzdG9yZWFsbCIgXV07IHRoZW4gCiAgICBpZiBbWyAteiAiJHdwdF9kaXNhYmxlZF9wbHVnaW5zIiBdXSA7IHRoZW4KICAgICAgZWNobyAiVmFyaWFibGUgXCR3cHRfZGlzYWJsZWRfcGx1Z2lucyBpcyBlbXB0eS4gTm90aGluZyB0byBkby4iICYmIHJldHVybiA5CiAgICBmaQogICAgd3B0X2Rpc2FibGVkX3BsdWdpbnNfbm9xdW90PSIkKGVjaG8gJHdwdF9kaXNhYmxlZF9wbHVnaW5zIHwgc2VkICdzLyIvXFwiL2cnKSIKICAgIHE9JHEnVVBEQVRFICckZGJwcmVmaXgnb3B0aW9ucyBTRVQgb3B0aW9uX3ZhbHVlPSInJHdwdF9kaXNhYmxlZF9wbHVnaW5zX25vcXVvdCciIFdIRVJFIG9wdGlvbl9uYW1lID0gImFjdGl2ZV9wbHVnaW5zIjsnCiAgZWxpZiBbWyAkMSA9PSAid3BwbHVnc2V0IiBdXTsgdGhlbiAKICAgIGlmIFtbIC16ICIkMiIgXV0gOyB0aGVuCiAgICAgIGVjaG8gIk5vIHBsdWdpbiBkYXRhIHdhcyBnaXZlbi4gSWYgeW91IGFyZSB0cnlpbmcgdG8gZGlzYWJsZSBhbGwsIHRyeSAnd3Bjb25uIHdwcGx1Z2Rpc2FibGVhbGwnIgogICAgICByZXR1cm4gOQogICAgZmkKICAgIHdwdF9wbHVnaW5zX3NldD0kMgogICAgd3B0X3BsdWdpbnNfc2V0X25vcXVvdD0iJChlY2hvICR3cHRfcGx1Z2luc19zZXQgfCBzZWQgJ3MvIi9cXCIvZycpIgogICAgcT0kcSdVUERBVEUgJyRkYnByZWZpeCdvcHRpb25zIFNFVCBvcHRpb25fdmFsdWU9Iickd3B0X3BsdWdpbnNfc2V0X25vcXVvdCciIFdIRVJFIG9wdGlvbl9uYW1lID0gImFjdGl2ZV9wbHVnaW5zIjsnCiAgZWxpZiBbWyAkMSA9PSAid3B0aGVtZSIgXV07IHRoZW4gcT0kcSdTRUxFQ1Qgb3B0aW9uX2lkLCBvcHRpb25fbmFtZSwgb3B0aW9uX3ZhbHVlIEZST00gJyRkYnByZWZpeCdvcHRpb25zIFdIRVJFIG9wdGlvbl9uYW1lID0gInN0eWxlc2hlZXQiIE9SIG9wdGlvbl9uYW1lID0gInRlbXBsYXRlIjsnCiAgZWxpZiBbWyAkMSA9PSAid3B0aGVtZW1vZCIqIF1dOyB0aGVuCiAgICBbWyAteiAkMiBdXSAmJiBlY2hvIE5vIHRoZW1lIHNwZWNpZmllZCEgJiYgcmV0dXJuIDkKICAgIGlmIFtbICQxID09ICJ3cHRoZW1lbW9kIiBdXTsgdGhlbiBxPSRxJ1VQREFURSAnJGRicHJlZml4J29wdGlvbnMgU0VUIG9wdGlvbl92YWx1ZT0iJyQyJyIgV0hFUkUgb3B0aW9uX25hbWU9InN0eWxlc2hlZXQiIE9SIG9wdGlvbl9uYW1lPSJ0ZW1wbGF0ZSIgT1Igb3B0aW9uX25hbWU9ImN1cnJlbnRfdGhlbWUiOycKICAgIGVsaWYgW1sgJDEgPT0gIndwdGhlbWVtb2RzIiBdXTsgdGhlbiBxPSRxJ1VQREFURSAnJGRicHJlZml4J29wdGlvbnMgU0VUIG9wdGlvbl92YWx1ZT0iJyQyJyIgV0hFUkUgb3B0aW9uX25hbWU9InN0eWxlc2hlZXQiOycKICAgIGVsaWYgW1sgJDEgPT0gIndwdGhlbWVtb2R0IiBdXTsgdGhlbiBxPSRxJ1VQREFURSAnJGRicHJlZml4J29wdGlvbnMgU0VUIG9wdGlvbl92YWx1ZT0iJyQyJyIgV0hFUkUgb3B0aW9uX25hbWU9InRlbXBsYXRlIiBPUiBvcHRpb25fbmFtZT0iY3VycmVudF90aGVtZSI7JwogICAgZWxzZSBlY2hvIC1lICJcdEludmFsaWQgcXVlcnkiISAmJiByZXR1cm4gMQogICAgZmkKICBlbGlmIFtbICQxID09ICJ3cHVzZXIiIF1dOyB0aGVuIHE9JHEnU0VMRUNUICogRlJPTSAnJGRicHJlZml4J3VzZXJzIExJTUlUIDIzOycKICBlbGlmIFtbICQxID09ICJ3cHVzZXJhbGwiIF1dOyB0aGVuIHE9JHEnU0VMRUNUICogRlJPTSAnJGRicHJlZml4J3VzZXJzOycKICBlbGlmIFtbICQxID09ICJ3cHVzZXJhZG1pbnMiIF1dOyB0aGVuIHE9JHEnU0VMRUNUIElELCB1c2VyX2xvZ2luIEZST00gJyRkYnByZWZpeCd1c2VycyBKT0lOICckZGJwcmVmaXgndXNlcm1ldGEgT04gKCckZGJwcmVmaXgndXNlcnMuSUQgPSAnJGRicHJlZml4J3VzZXJtZXRhLnVzZXJfaWQpIFdIRVJFIG1ldGFfdmFsdWU9MTA7JwogIGVsaWYgW1sgJDEgPT0gIndwdXNlcjEiIF1dOyB0aGVuIHE9JHEnU0VMRUNUIHVzZXJfbG9naW4gRlJPTSAnJGRicHJlZml4J3VzZXJzIFdIRVJFIElEPTE7JwogIGVsaWYgW1sgJDEgPT0gIndwdXNlcmluZm8iIF1dOyB0aGVuIHE9JHEnU0VMRUNUIElELCB1c2VyX2xvZ2luLCB1c2VyX2VtYWlsLCB1c2VyX3N0YXR1cywgdW1ldGFfaWQsIG1ldGFfa2V5LCBtZXRhX3ZhbHVlIEZST00gJyRkYnByZWZpeCd1c2VycyBKT0lOICckZGJwcmVmaXgndXNlcm1ldGEgT04gKCckZGJwcmVmaXgndXNlcnMuSUQgPSAnJGRicHJlZml4J3VzZXJtZXRhLnVzZXJfaWQpIFdIRVJFIElEPSckMic7JwogIGVsaWYgW1sgJDEgPT0gIndwdXNlcmEiIF1dOyB0aGVuIHE9JHEnREVMRVRFIEZST00gJyRkYnByZWZpeCd1c2VybWV0YSBXSEVSRSB1c2VyX2lkPSckMicgQU5EIChtZXRhX2tleT0iJyRkYnByZWZpeCdjYXBhYmlsaXRpZXMiIE9SIG1ldGFfa2V5PSInJGRicHJlZml4J3VzZXJfbGV2ZWwiKTsgSU5TRVJUIElOVE8gJyRkYnByZWZpeCd1c2VybWV0YSAodXNlcl9pZCxtZXRhX2tleSxtZXRhX3ZhbHVlKSBWQUxVRVMgKCckMicsICInJGRicHJlZml4J2NhcGFiaWxpdGllcyIsICciJ2E6MTp7czoxMzpcImFkbWluaXN0cmF0b3JcIjtiOjE7fSciJyk7IElOU0VSVCBJTlRPICckZGJwcmVmaXgndXNlcm1ldGEgKHVzZXJfaWQsbWV0YV9rZXksbWV0YV92YWx1ZSkgVkFMVUVTICgnJDInLCAiJyRkYnByZWZpeCd1c2VyX2xldmVsIiwgMTApOyBTRUxFQ1QgdXNlcl9sb2dpbiBGUk9NICckZGJwcmVmaXgndXNlcnMgV0hFUkUgSUQ9JyQyJzsnCiAgZWxpZiBbWyAkMSA9PSAid3B1c2VycCIgXV07IHRoZW4gcT0kcSdVUERBVEUgJyRkYnByZWZpeCd1c2VycyBTRVQgdXNlcl9wYXNzPU1ENSgiJyQzJyIpIFdIRVJFIElEPSckMic7IFNFTEVDVCB1c2VyX2xvZ2luIEZST00gJyRkYnByZWZpeCd1c2VycyBXSEVSRSBJRD0nJDInOycKICBlbGlmIFtbICQxID09ICJ3cHVzZXJ1IiBdXTsgdGhlbiBxPSRxJ1NFTEVDVCB1c2VyX2xvZ2luIEZST00gJyRkYnByZWZpeCd1c2VycyBXSEVSRSBJRD0nJDInOyBVUERBVEUgJyRkYnByZWZpeCd1c2VycyBTRVQgdXNlcl9sb2dpbj0iJyQzJyIgV0hFUkUgSUQ9JyQyJzsnCiAgZWxpZiBbWyAkMSA9PSAid3B1c2VyZCIgXV07IHRoZW4gcT0kcSdTRUxFQ1QgdXNlcl9sb2dpbiBGUk9NICckZGJwcmVmaXgndXNlcnMgV0hFUkUgSUQ9JyQyJzsgREVMRVRFIEZST00gJyRkYnByZWZpeCd1c2VycyBXSEVSRSBJRD0nJDInOyBERUxFVEUgRlJPTSAnJGRicHJlZml4J3VzZXJtZXRhIFdIRVJFIHVzZXJfaWQ9JyQyJzsnCiAgZWxpZiBbWyAkMSA9PSAid3B1c2VybmV3IiBdXTsgdGhlbgogICAgIyBnZW5lcmF0ZSAyMCBjaGFyIHJhbmRvbSBwYXNzd29yZAogICAgX193cF9yYW5kX3N0cmluZwogICAgZGVsZXRlbWVfcGFzcz0iJHdwX3JhbmRfc3RyaW5nIgogICAgcT0kcSdJTlNFUlQgSU5UTyAnJGRicHJlZml4J3VzZXJzICh1c2VyX2xvZ2luLCB1c2VyX3Bhc3MsIHVzZXJfZW1haWwpIFZBTFVFUyAoImRlbGV0ZW1lIiwgTUQ1KCInJGRlbGV0ZW1lX3Bhc3MnIiksICJkZWxldGVtZUBleGFtcGxlLmNvbSIpOyBTRVQgQG5ld19pZD1MQVNUX0lOU0VSVF9JRCgpOyBJTlNFUlQgSU5UTyAnJGRicHJlZml4J3VzZXJtZXRhICh1c2VyX2lkLG1ldGFfa2V5LG1ldGFfdmFsdWUpIFZBTFVFUyAoQG5ld19pZCwgIickZGJwcmVmaXgnY2FwYWJpbGl0aWVzIiwgJyInYToxOntzOjEzOlwiYWRtaW5pc3RyYXRvclwiO2I6MTt9JyInKTsgSU5TRVJUIElOVE8gJyRkYnByZWZpeCd1c2VybWV0YSAodXNlcl9pZCxtZXRhX2tleSxtZXRhX3ZhbHVlKSBWQUxVRVMgKEBuZXdfaWQsICInJGRicHJlZml4J3VzZXJfbGV2ZWwiLCAxMCk7IFNFTEVDVCBAbmV3X2lkOycKICBlbGlmIFtbICQxID09ICJ3cHRhYmxlc2l6ZSIgXV0gOyB0aGVuCiAgICBteXNxbCAtdSAiJGRidXNlciIgLXAiJGRicGFzcyIgLWggIiRkYmhvc3QiIC1lICdTRUxFQ1QgVEFCTEVfTkFNRSwgCiAgICAgIHRhYmxlX3Jvd3MsIHJvdW5kKCgoZGF0YV9sZW5ndGggKyBpbmRleF9sZW5ndGgpIC8gMTAyNCAvIDEwMjQpLDIpIFwKICAgICAgIlNpemUgaW4gTUIiIEZST00gaW5mb3JtYXRpb25fc2NoZW1hLlRBQkxFUyBXSEVSRSB0YWJsZV9zY2hlbWEgPSAiJyRkYm5hbWUnIjsnCiAgICAgIHJldHVybgogIGVsaWYgW1sgJDEgPT0gIndwZGJzaXplIiBdXSA7IHRoZW4KI2lmIFsgMSA9PSAxIF0gOyB0aGVuCiMgICAgIyBnZXQgZGIgc2l6ZSBhbmQgbnVtYmVyIG9mIHRhYmxlcyBhbmQgb3RoZXIgaW5mbwojICAgIHE9JHEnU0VMRUNUIHMuc2NoZW1hX25hbWUsCiMgICAgQ09OQ0FUKElGTlVMTChST1VORCgoU1VNKHQuZGF0YV9sZW5ndGgpK1NVTSh0LmluZGV4X2xlbmd0aCkpIAojICAgICAgLzEwMjQvMTAyNCwyKSwwLjAwKSwiTWIiKSB0b3RhbF9zaXplLCAKIyAgICBDT05DQVQoSUZOVUxMKFJPVU5EKCgoU1VNKHQuZGF0YV9sZW5ndGgpK1NVTSh0LmluZGV4X2xlbmd0aCkpLQojICAgICAgU1VNKHQuZGF0YV9mcmVlKSkvMTAyNC8xMDI0LDIpLDAuMDApLCJNYiIpIGRhdGFfdXNlZCwKIyAgICBDT05DQVQoSUZOVUxMKFJPVU5EKFNVTShkYXRhX2ZyZWUpLzEwMjQvMTAyNCwyKSwwLjAwKSwiTWIiKSBkYXRhX2ZyZWUsCiMgICAgSUZOVUxMKFJPVU5EKCgoKFNVTSh0LmRhdGFfbGVuZ3RoKStTVU0odC5pbmRleF9sZW5ndGgpKS1TVU0odC5kYXRhX2ZyZWUpKSAKIyAgICAgIC8oKFNVTSh0LmRhdGFfbGVuZ3RoKStTVU0odC5pbmRleF9sZW5ndGgpKSkqMTAwKSwyKSwwKSBwY3RfdXNlZCwKIyAgICBDT1VOVCh0YWJsZV9uYW1lKSB0b3RhbF90YWJsZXMgCiMgICAgICBGUk9NIElORk9STUFUSU9OX1NDSEVNQS5TQ0hFTUFUQSBzCiMgICAgICBMRUZUIEpPSU4gSU5GT1JNQVRJT05fU0NIRU1BLlRBQkxFUyB0IE9OIHMuc2NoZW1hX25hbWUgPSB0LnRhYmxlX3NjaGVtYSAKIyAgICAgIFdIRVJFIHMuc2NoZW1hX25hbWUgPSAiJyRkYm5hbWUnIjsnCiNlbHNlICNzaW1wbGVyIGJ1dCBkb2VzIG5vdCBnZXQgbnVtYmVyIG9mIHRhYmxlcwojICAgICAgcT0kcSdTRUxFQ1QgIickZGJuYW1lJyIsIAojICAgICAgU1VNKCBkYXRhX2xlbmd0aCArIGluZGV4X2xlbmd0aCApIC8gMTAyNCAvIDEwMjQgIkRhdGEgQmFzZSBTaXplIGluIE1CIiwgCiMgICAgICBTVU0oIGRhdGFfZnJlZSApLyAxMDI0IC8gMTAyNCAiRnJlZSBTcGFjZSBpbiBNQiIKIyAgICAgIEZST00gaW5mb3JtYXRpb25fc2NoZW1hLlRBQkxFUzsnCiNlbHNlCiAgICAgICMgc2hhcmVkIGhvc3RzIGRvbnQgYWx3YXlzIGFsbG93IHRoZSBhYm92ZSwgc28gd2Ugd2lsbCBjb3VudCBlYWNoIG9uZQogICAgICBxPSRxJ1NFTEVDVCBST1VORChTVU0oKGRhdGFfbGVuZ3RoICsgaW5kZXhfbGVuZ3RoKS8xMDI0LzEwMjQpLDIpIHRvdGFsX3NpemUsCiAgICAgICAgQ09VTlQodGFibGVfbmFtZSkgdG90YWxfdGFibGVzIEZST00gaW5mb3JtYXRpb25fc2NoZW1hLlRBQkxFUyAKICAgICAgICBXSEVSRSB0YWJsZV9zY2hlbWEgPSAiJyRkYm5hbWUnIjsnCgojZmkKICBlbHNlIGVjaG8gLWUgIlx0SW52YWxpZCBhcmd1bWVudCB3YXMgZ2l2ZW4gdG8gd3Bjb25uLi4uIG5vdGhpbmcgdG8gZG8iICYmIHJldHVybiAxCiAgZmkKICBteWNvbm49JChteXNxbCAtdSAiJGRidXNlciIgLXAiJGRicGFzcyIgLWggIiRkYmhvc3QiIC1lICIkcSIgMj4mMSkKICBpZiBbWyAxIC1lcSAwIF1dOyB0aGVuICNEZWJ1ZwogICAgZWNobyAtZSAiXG5Db25uZWN0ZWQgdG8gdGhlIGRhdGFiYXNlLi4uIgogICAgZWNobyAtZSAiUXVlcnk6XG5cblx0JHEiCiAgICBlY2hvIC1lICIkbXljb25uIi4KICBlbGlmIFtbICRteWNvbm4gPT0gIkVSUk9SIiogXV07IHRoZW4gCiAgICBlY2hvICJUaGVyZSB3YXMgYSBkYXRhYmFzZSBlcnJvcjogJG15Y29ubiIKICAgIHJldHVybiA5CiAgZmkKICAjIGNoZWNrIHRoYXQgd2Ugc2F2ZWQgaXQgcHJvcGVybHkKICBpZiBbWyAkMSA9PSAid3BwbHVncmVzdG9yZWFsbCIgXV07IHRoZW4gCiAgICB3cGNvbm4gIndwcGx1ZyIKICAgIHdwdF9kaXNhYmxlZF9wbHVnaW5zX3Rlc3Q9JChlY2hvICIkbXljb25uIiB8IHRhaWwgLW4gKzIpCiAgICBpZiBbWyAiJHdwdF9kaXNhYmxlZF9wbHVnaW5zX3Rlc3QiICE9ICIkd3B0X2Rpc2FibGVkX3BsdWdpbnMiIF1dIDsgdGhlbgogICAgICBlY2hvICJJIGNoZWNrZWQgdGhlIGFjdHVhbCBzYXZlZCBhY3RpdmVfcGx1Z2lucyBhbmQgaXQgZG9lc24ndCBtYXRjaCB3aGF0IGl0IHNob3VsZCBiZSIKICAgICAgcmV0dXJuIDkKICAgIGZpCiAgZWxpZiBbWyAkMSA9PSAid3BwbHVnc2V0IiBdXTsgdGhlbiAKICAgIHdwY29ubiAid3BwbHVnIgogICAgd3B0X3BsdWdpbnNfc2V0X3Rlc3Q9JChlY2hvICIkbXljb25uIiB8IHRhaWwgLW4gKzIpCiAgICBpZiBbWyAiJHdwdF9wbHVnaW5zX3NldF90ZXN0IiAhPSAiJHdwdF9wbHVnaW5zX3NldCIgXV0gOyB0aGVuCiAgICAgIGVjaG8gIkkgY2hlY2tlZCB0aGUgYWN0dWFsIHNhdmVkIGFjdGl2ZV9wbHVnaW5zIGtleSBhbmQgaXQgZG9lc24ndCBtYXRjaCB3aGF0IGl0IHNob3VsZCBiZSIKICAgICAgcmV0dXJuIDkKICAgIGZpCiAgZmkKfQoKZnVuY3Rpb24gd3BkYigpIHsKICAjTmVlZCB0byBpbmNsdWRlIGEgb3B0aW1pemUvZml4IG9wdGlvbgogIGlmIFtbICQxID09ICItLWhlbHAiIHx8ICQxID09ICItaCIgXV07IHRoZW4KICAgIGVjaG8gLWUgIlxuVGhpcyB0b29sIHRlc3RzIHRoZSBkYXRhYmFzZSBjb25uZWN0aXZpdHkgYmFzZWQgb24gc2V0dGluZ3MgaW4gdGhlIHdwLWNvbmZpZy5waHAgZmlsZSwgYW5kIGNhbiBpbXBvcnQvZXhwb3J0IGEgZGF0YWJhc2UgYmFzZWQgb24gaXRzIHNldHRpbmdzLlxuIgogICAgZWNobyAtZSAiVXNhZ2U6XG4iCiAgICBlY2hvIC1lICJcdHdwZGIgW29wdGlvbiBbcGFyYW1dXVxuIgogICAgZWNobyAtZSAiXHQtaSBGSUxFXG5cdFx0ZXhwb3J0IGN1cnJlbnQgZGF0YWJhc2UgdG8gZmlsZSBGSUxFLlxuXHRcdFRoZSBzcGVjaWZpZWQgRklMRSBtdXN0IGVuZCBpbiAuc3FsXG4iCiAgICBlY2hvIC1lICJcdC1lIFtGSUxFXVxuXHRcdGV4cG9ydCBjdXJyZW50IGRhdGFiYXNlIHRvIG9wdGlvbmFsIGZpbGUgRklMRS5cblx0XHRJZiBhIEZJTEUgaXMgc3BlY2lmaWVkLCBpdCBtdXN0IGVuZCBpbiAuc3FsXG4iCiAgICBlY2hvIC1lICJcdC1zXG5cdFx0c2hvdyB0aGUgc2l6ZSBvZiBhbGwgdGFibGVzIGFuZCB0aGUgZGF0YWJhc2VcbiIKICAgIHJldHVybgogIGVsaWYgW1sgISAtZiB3cC1jb25maWcucGhwIF1dOyB0aGVuIGVjaG8gQ291bGQgbm90IGZpbmQgd3AtY29uZmlnLnBocCEgJiYgcmV0dXJuIDkKICBmaQogIAogIGlmIFtbICQxID09ICctcycgXV0gOyB0aGVuCiAgICBpZiBbWyAkMiA9PSAnLXEnIF1dIDsgdGhlbgogICAgICB3cGNvbm4gIndwZGJzaXplIgogICAgICBlY2hvICIkbXljb25uIiB8IGF3ayAnRU5Ee3ByaW50ICQwfScgfCBcCiAgICAgIGF3ayAnTkYgJiYgTkYtMSB7cHJpbnQgIlx0REIgc2l6ZTpcdCIgKCAkKE5GLTEpICkgIiBNQiIgXAogICAgICAgICJcblx0REIgdGFibGVzOlx0IiAoICQoTkYpICkgIiB0YWJsZXMifScKICAgICAgcmV0dXJuCiAgICBlbHNlCiAgICAgIGVjaG8KICAgICAgd3Bjb25uICJ3cHRhYmxlc2l6ZSIKICAgICAgZWNobwogICAgICBlY2hvICJBYm92ZSB5b3Ugd2lsbCBzZWUgZWFjaCB0YWJsZSdzIHRvdGFsIHJvd3MgYW5kIHNpemUiCiAgICAgIGVjaG8gLWUgIkJlbG93IGlzIHRoZSB0b3RhbCBhbW91bnQgb2Ygc3BhY2UgdXNlZCBieSB0aGUgZGF0YWJhc2UuXG4iCiAgICAgIHdwZGIgLXMgLXEKIyAjIyByZW1vdmVkIGJlY2F1c2Ugc2hhcmVkIGhvc3Qgd2FzIGxvY2tpbmcgdXAgb24gZnVsbCBzaXplIHF1ZXJ5CiMgICAgICBhd2sgJ05GICYmIE5GLTQgeyBwcmludCAiXHREQiB0b3RhbCBzaXplOiAgXHQiICggJChORi00KSApIFwKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAiXG5cdERCIGRhdGEgdXNlZDogICBcdCIgKCAkKE5GLTMpICkgXAojICAgICAgICAgICAgICAgICAgICAgICAgICAgICJcblx0REIgZGF0YSBmcmVlOiAgIFx0IiAoICQoTkYtMikgKSBcCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlxuXHREQiBwZXJjZW50IHVzZWQ6XHQiICggJChORi0xKSAiJSIgKSBcCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlxuXHREQiB0b3RhbCB0YWJsZXM6XHQiICggJChORikgKSAiIHRhYmxlcyIgfScKICAgICAgZWNobwogIGZpCiAgICByZXR1cm4KICBmaQogIAogIHdwY29ubiAid3BkYiIKICBpZiBbWyAkMSAhPSAiLXEiIF1dIDsgdGhlbgogICAgZWNobyAtZSAiXG4KXHREQiB1c2VyOlx0JGRidXNlcgpcdERCIHBhc3M6XHQkZGJwYXNzClx0REIgaG9zdDpcdCRkYmhvc3QKXHREQiBuYW1lOlx0JGRibmFtZQpcdERCIHByZWZpeDpcdCRkYnByZWZpeFxuIgogIGZpCiAgaWYgW1sgLXogJG15Y29ubiBdXTsgdGhlbgogICAgW1sgJDEgPT0gIi1xIiBdXSAmJiBlY2hvIC1lICJcdERhdGFiYXNlOlx0UHJlZml4PyIgfHwgZWNobyAtZSAiQ29ubmVjdGVkIHdpdGggbm8gZXJyb3JzLCBidXQgbm8gdGFibGVzIHRoYXQgbWF0Y2ggc3BlY2lmaWVkIHByZWZpeCIhIlxuIgogICAgIyBwdXQgc2l6ZSBhbmQgdGFibGVzIGxvb2t1cHMgaGVyZSwgc28gaWYgZGIgaXMgc2xvdyB3ZSBhcmVuJ3Qgd2FpdGluZyBmb3JldmVyCiAgICBbWyAkMSAhPSAiLXEiIF1dICYmIHdwZGIgLXMgLXEgJiYgZWNobwogICAgCiAgZWxpZiBbWyAkbXljb25uID09ICJFUlJPUiIqIF1dOyB0aGVuCiAgICBbWyAkMSA9PSAiLXEiIF1dICYmIGVjaG8gLWUgIlx0RGF0YWJhc2U6XHRFcnJvciIhIHx8IGVjaG8gLWUgIiRteWNvbm5cbiIKICAgIHJldHVybiA5CiAgZWxzZQogICAgW1sgJDEgPT0gIi1xIiBdXSAmJiBlY2hvIC1lICJcdERhdGFiYXNlOlx0T0siIHx8IGVjaG8gLWUgIkRhdGFiYXNlIGNvbm5lY3Rpb24gc2V0dGluZ3MgYXBwZWFyIHRvIGJlIGZpbmUuXG4iCiAgICAjIHB1dCBzaXplIGFuZCB0YWJsZXMgbG9va3VwcyBoZXJlLCBzbyBpZiBkYiBpcyBzbG93IHdlIGFyZW4ndCB3YWl0aW5nIGZvcmV2ZXIKICAgIFtbICQxICE9ICItcSIgXV0gJiYgd3BkYiAtcyAtcSAmJiBlY2hvCiAgZmkKICBpZiBbWyAkMSA9PSAiLWkiIF1dOyB0aGVuCiAgICBpZiBbWyAteiAiJDIiIF1dOyB0aGVuIGVjaG8gLWUgIk5vIGltcG9ydCBmaWxlIHNwZWNpZmllZCFcbiIKICAgIGVsaWYgW1sgISAtZiAiJDIiIF1dOyB0aGVuIGVjaG8gLWUgIkZpbGUgJyQyJyBkb2VzIG5vdCBleGlzdCFcbiIKICAgIGVsaWYgW1sgIiQyIiA9PSAqc3FsIF1dOyB0aGVuIHdwY29ubiAid3BkYmltcG9ydCIgIiQyIgogICAgZWxpZiBbWyAiJDIiID09ICpzcWwuZ3ogXV07IHRoZW4gd3Bjb25uICJ3cGRiaW1wb3J0Z3oiICIkMiIKICAgIGVsc2UgZWNobyAtZSAiJyQyJyBpcyBub3QgYSB2YWxpZCBmaWxlIVxuIgogICAgZmkKICBlbGlmIFtbICQxID09ICItZSIgXV07IHRoZW4KICAgIGlmIFtbIC1uICIkMiIgXV07IHRoZW4KICAgICAgaWYgW1sgLWYgIiQyIiBdXTsgdGhlbiBlY2hvIC1lICJGaWxlICckMicgYWxyZWFkeSBleGlzdHMhXG4iCiAgICAgIGVsaWYgW1sgIiQyIiA9PSAqc3FsIF1dOyB0aGVuIHdwY29ubiAid3BkYmV4cG9ydCIgIiQyIgogICAgICBlbGlmIFtbICIkMiIgPT0gKnNxbC5neiBdXTsgdGhlbiB3cGNvbm4gIndwZGJleHBvcnRneiIgIiQyIgogICAgICBlbHNlIGVjaG8gLWUgIickMicgaXMgbm90IGEgdmFsaWQgZmlsZW5hbWUhXG4iICYmIHJldHVybgogICAgICBmaQogICAgZWxzZQogICAgICB3cGNvbm4gIndwZGJleHBvcnQiCiAgICBmaQogIGVsaWYgW1sgJDEgPT0gImRyb3AiIF1dOyB0aGVuCiAgICByZWFkIC1wICIkKGVjaG8gJCdcdCcpRGVsZXRlIGRhdGFiYXNlPyAiIC1uIDEgLXIKICAgIGlmIFtbICRSRVBMWSA9fiBeW1l5XSQgXV07IHRoZW4KICAgICAgZWNobyAtZSAiXG5Ecm9wcGluZyBkYXRhYmFzZS4uLiIKICAgICAgd3Bjb25uICJ3cGRiZHJvcCIKICAgICAgW1sgJG15Y29ubiAhPSAiRVJST1IiKiBdXSAmJiBlY2hvIC1lICJEcm9wcGVkIGRhdGFiYXNlIVxuIiB8fCBlY2hvIC1lICJGYWlsZWQgdG8gZHJvcCBkYXRhYmFzZSFcbiIKICAgIGVsc2UgZWNobyAtZSAiXHREZWxldGlvbiBvZiBkYXRhYmFzZSAnJDEnIGNhbmNlbGxlZCIhIlxuIgogICAgZmkKICBmaQp9CgpmdW5jdGlvbiB3cHVybCgpIHsKICBpZiBbWyAkMSA9PSAiLXEiIF1dICYmIFtbICQyID09ICItLXNpdGUiIF1dIDsgdGhlbgogICAgd3Bjb25uICJ3cHNpdGV1cmwiIAogICAgZWNobyAiJG15Y29ubiIgfCBhd2sgJ0VORHtwcmludCAkM30nCiAgICByZXR1cm4KICBmaQogIFtbICQxID09ICItcSIgXV0gJiYgd3Bjb25uICJ3cHVybCIgJiYgZWNobyAiJG15Y29ubiIgfCB0YWlsIC1uICsyICYmIHJldHVybgogIGVjaG8KICBpZiBbWyAkMSA9PSAiLS1oZWxwIiB8fCAkMSA9PSAiLWgiIF1dOyB0aGVuCiAgICBlY2hvIC1lICJUaGlzIHRvb2wgcmV0dXJucyB0aGUgY3VycmVudCBVUkwgc2V0dGluZ3MgaW4gdGhlIGRhdGFiYXNlLCBvciB1cGRhdGVzIHRoZW0gdG8gYSBzcGVjaWZpZWQgVVJMLgoKVXNhZ2U6XHR3cHVybCBbVVJMXQoKXHRObyBvcHRpb25zIC0gc2hvdyB0aGUgY3VycmVudCBzaXRlIGFuZCBob21lIHVybHMKClx0VVJMClx0XHRzcGVjaWZ5IGEgVVJMIHRvIGNoYW5nZSB0aGUgc2l0ZSB0by4KClx0T0xEVVJMIE5FV1VSTApcdFx0ZG8gYSBzZWFyY2ggYW5kIHJlcGxhY2UgaW4gcG9zdHMgZm9yIGEgbmV3IHVybC4KXHRcdHVzZWZ1bCBpZiB5b3UgbW92ZWQvcmVuYW1lZCBhIHNpdGUncyB1cmwgYW5kIHRoZSAKXHRcdHBpY3R1cmVzIGFyZW4ndCBsb2FkaW5nLiBXZSBvbmx5IHNlYXJjaCB0aGUgcG9zdHMgClx0XHRhbmQgcG9zdHNtZXRhIHRhYmxlcy4gQnV0IHRoYXQgc2hvdWxkIGJlIGVub3VnaCBmb3IgbW9zdC4KClx0LS1zZXRzaXRlfC11IFt1cmxdICAgc2V0IHRoZSBzaXRldXJsIHRvIFt1cmxdICh1c2VkIGZvciBmaWxlcykKXHQtLXNldGhvbWV8LW0gW3VybF0gICBzZXQgdGhlIGhvbWV1cmwgdG8gW3VybF0gKHVzZWQgZm9yIGxpbmtzKQoKXHRJZiBhbnkgb2YgdGhlIGFib3ZlIFVSTHMgZG8gbm90IHN0YXJ0IHdpdGggJ2h0dHA6Ly8nIG9yICdodHRwczovLycsIApcdGl0IHdpbGwgYXV0b21hdGljYWxseSBiZSBhcHBlbmRlZCB3aXRoICdodHRwOi8vJy4KIgogICAgcmV0dXJuCiAgZWxpZiBbWyAhIC1mIHdwLWNvbmZpZy5waHAgXV07IHRoZW4gZWNobyBDb3VsZCBub3QgZmluZCB3cC1jb25maWcucGhwISAmJiByZXR1cm4gOQogIGZpCiAgCiAgaWYgW1sgJCMgLWVxIDIgXV0gOyB0aGVuCiAgICBpZiBbWyAkMSA9PSAnLS1zZXRzaXRlJyBdXSB8fCBbWyAkMSA9PSAnLXUnIF1dIDsgdGhlbgogICAgICAjIHNldCBzaXRldXJsCiAgICAgIG5ld3VybD0kMgogICAgICBfX3dwdXJsX2NoZWNrX2h0dHAgYWRkZm9sbG93CiAgICAgIHdwY29ubiB3cHNpdGV1cmxtb2QgJG5ld3VybCAmJiBlY2hvICJVcGRhdGVkIHNpdGUgVVJMIHRvICRuZXd1cmwuLi4iCiAgICAgIHJldHVybgogICAgZWxpZiBbWyAkMSA9PSAnLS1zZXRob21lJyBdXSB8fCBbWyAkMSA9PSAnLW0nIF1dIDsgdGhlbgogICAgICAjIHNldCBob21lIHVybAogICAgICBuZXd1cmw9JDIKICAgICAgIyB3ZSBkb24ndCBuZWVkIGEgdHJhaWxpbmcgLyBvbiBob21lCiAgICAgIF9fd3B1cmxfY2hlY2tfaHR0cAogICAgICB3cGNvbm4gd3Bob21ldXJsbW9kICRuZXd1cmwgJiYgZWNobyAiVXBkYXRlZCBob21lIFVSTCB0byAkbmV3dXJsLi4uIgogICAgICByZXR1cm4KICAgIGZpCiAgICAjIGlmIHRoZXkgZGlkbid0IG1hdGNoLCB3ZSBrZWVwIGdvaW5nCiAgZmkKICBpZiBbWyAkIyAtZXEgMSBdXSA7IHRoZW4KICAgIGlmIFtbICQxID09ICctLXNpdGUnIF1dIDsgdGhlbgogICAgICAgIyBnZXQgc2l0ZSB1cmwKICAgICAgIHdwY29ubiB3cHNpdGV1cmwKICAgICAgIGVjaG8gLWVuICIkbXljb25uIiB8IGF3ayAnRU5Ee3ByaW50ICQzfScKICAgICAgIHJldHVybgogICAgZWxpZiBbWyAkMSA9PSAnLS1ob21lJyBdXSA7IHRoZW4KICAgICAgICMgZ2V0IGhvbWUgdXJsCiAgICAgICB3cGNvbm4gd3Bob21ldXJsCiAgICAgICBlY2hvIC1lbiAiJG15Y29ubiIgfCBhd2sgJ0VORHtwcmludCAkM30nCiAgICAgICByZXR1cm4KICAgIGZpCiAgICAjIGlmIHRoZXkgZGlkbid0IG1hdGNoLCB3ZSBrZWVwIGdvaW5nCiAgZmkKICAKICBpZiBbWyAkIyAtZXEgMiBdXSA7IHRoZW4KICAgICMgc2VhcmNoIGFuZCByZXBsYWNlIG9mIHVybAogICAgbmV3dXJsPSQxCiAgICBfX3dwdXJsX2NoZWNrX2h0dHAgYWRkZm9sbG93CiAgICBvbGR1cmw9JG5ld3VybAogICAgbmV3dXJsPSQyCiAgICBfX3dwdXJsX2NoZWNrX2h0dHAgYWRkZm9sbG93CiAgICAKICAgIGVjaG8gLWUgIlx0U3RhcnRpbmcgdGhlIHNpdGV1cmwvaG9tZSByZW5hbWUgcHJvY2Vzcy4uLlxuIgogICAgZWNobyAtZSAiXHRJIHJlY29tbWVuZCBydW5uaW5nIGEgYmFja3VwIG9mIHlvdXIgZGF0YWJhc2UgYmVmb3JlIGNvbnRpbnVpbmc6XG4iCiAgICB3cGRiIC1zIC1xCiAgICBlY2hvCiAgICByZWFkIC1wICIkKGVjaG8gJCdcdCcpVG8gcnVuIGEgYmFja3VwIG5vdyB3aXRoICd3cGJhY2t1cCBkYicgcHJlc3MgJ3knIChOL3kpICIgLW4gMSAtcgogICAgW1sgJFJFUExZID1+IF5bWXldJCBdXSAmJiBlY2hvIC1lICdcblxuJyAmJiB3cGJhY2t1cCBkYiAtcQogICAgCiAgICBlY2hvIC1lICJcdEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBzZWFyY2ggYW5kIHJlcGxhY2UgeW91ciBwb3N0cyBhcyBmb2xsb3dzOlxuIgogICAgZWNobyAtZSAiXHRPbGQgdXJsOiAkb2xkdXJsIgogICAgZWNobyAtZSAiXHROZXcgdXJsOiAkbmV3dXJsXG4iCiAgICByZWFkIC1wICIkKGVjaG8gJCdcdCcpUHJlc3MgeSB3aGVuIHlvdSBhcmUgc3VyZSB0aGUgYWJvdmUgaXMgY29ycmVjdCAoTi95KSAiIC1uIDEgLXIKICAgIFtbICEgJFJFUExZID1+IF5bWXldJCBdXSAmJiBlY2hvIC1lICJcblxuTm90aGluZyBkb25lIiAmJiByZXR1cm4KICAgIGVjaG8gLWUgIlxuXG5TZWFyY2hpbmcgYW5kIHJlcGxhY2luZy4gVGhpcyBtYXkgdGFrZSBzb21lIHRpbWUuLi5cbiIKICAgIHdwY29ubiAid3B1cmxyZXBsYWNlIiAkb2xkdXJsICRuZXd1cmwKICAgIGlmIFtbICQ/IC1lcSAwIF1dIDsgdGhlbgogICAgICBlY2hvICJTdWNjZXNzZnVsbHkgcmVwbGFjZWQgYWxsIGluc3RhbmNlcyBvZiAkb2xkdXJsIHdpdGggJG5ld3VybCIKICAgICAgd3BmaXgKICAgICAgZWNobyAiV2hpbGUgd2UgaGF2ZSB0cmllZCB0byBjbGVhciBhbGwgY2FjaGVzLCBpZiB0aGV5IGhhdmUgYSBjYWNoaW5nIHBsdWdpbiB0aGVyZSBtYXkgYmUgZXJyb3JzIHVudGlsIHRoZSAqc2l0ZSoncyBjYWNoZWQgZmlsZXMgYXJlIGNsZWFyZWQuIgogICAgZWxzZQogICAgICBlY2hvICJGYWlsZWQgdG8gcmVwbGFjZSB1cmxzIGluIGRhdGFiYXNlIgogICAgZmkKICBlbGlmIFtbIC1uICQxIF1dOyB0aGVuCiAgICAjIHNldHRpbmcgCiAgICBvbGRzaXRlPSIkKHdwdXJsIC1xIHwgYXdrICd7aWYgKE5SPT0xKSB7cHJpbnQgJDN9fScpIgogICAgbmV3dXJsPSQxCiAgICBfX3dwdXJsX2NoZWNrX2h0dHAKICAgIHdwY29ubiAid3B1cmxtb2QiICRuZXd1cmwgJiYgZWNobyAiVXBkYXRlZCBob21lIGFuZCBzaXRlIFVSTHMgdG8gJG5ld3VybC4uLiIKICAgICMgaWYgdGhleSBwdXQgaXQgaW4gYSBzdWJmb2xkZXIsIHRoZSAuaHRhY2Nlc3MgZmlsZXMgbmVlZCB1cGRhdGluZwogICAgZWNobyAiUnVubmluZyB3cGh0IHRvIHVwZGF0ZSAuaHRhY2Nlc3MgcnVsZXMiCiAgICB3cGh0CiAgICAKICAgIGVjaG8gIldvdWxkIHlvdSBsaWtlIHRvIHVwZGF0ZSB5b3VyIHBpY3R1cmUgdXJscyB0b28/IEl0IHdpbGwgcnVuOiIKICAgIGVjaG8gLWUgIlxuICB3cHVybCAkb2xkc2l0ZSAkbmV3dXJsXG4iCiAgICByZWFkIC1wICJJdCBpcyByZWNvbW1lbmRlZCB0aGF0IHlvdSBkbyB0aGlzIGlmIHlvdXIgdXJsIGlzIGNoYW5nZWQgKE4veSkgIiAtbiAxIC1yCiAgICBpZiBbWyAkUkVQTFkgPX4gXltZeV0kIF1dIDsgdGhlbgogICAgICBlY2hvCiAgICAgIHdwdXJsICRvbGRzaXRlICRuZXd1cmwKICAgIGVsc2UKICAgICAgZWNobyAiQ2xlYXJpbmcgY2FjaGVzIgogICAgICB3cGZpeAogICAgICBlY2hvICJTa2lwcGluZyB0aGUgcmVwbGFjZW1lbnQgb2YgcGljdHVyZSB1cmxzLiBZb3UgY2FuIHN0aWxsIHJ1biB0aGUgYWJvdmUgY29tbWFuZCB5b3Vyc2VsZi4iCiAgICBmaQogIGVsaWYgW1sgLXogIiQxIiBdXSA7IHRoZW4KICAgIHdwY29ubiAid3B1cmwiCiAgICBbWyAteiAkbXljb25uIF1dICYmIGVjaG8gLWUgIlx0aG9tZTpcdG5vdCBmb3VuZFxuXHRzaXRldXJsOlx0bm90IGZvdW5kXG4iICYmIHJldHVybgogICAgZWNobyAtZSAiJG15Y29ubiIgfCB0YWlsIC1uICsyIHwgYXdrICd7cHJpbnQgIlx0IiQyIigiJDEiKTpcdCIkM30nCiAgZWxzZQogICAgZWNobyAiVW5rbm93biBvcHRpb24iCiAgZmkKICBlY2hvCn0KIyB0aGlzIGZ1bmN0aW9uIGNoZWNrcyB0aGF0IHRoZSB1cmwgaW4gJG5ld3VybCBoYXMgYSBodHRwIG9yIGh0dHBzIGJlZm9yZSBpdC4gCiMgaWYgaXQgZG9lcyBub3QsIGl0IGFkZHMgaXQKIyB1c2UgJ2FkZGZvbGxvdycgdG8gYWxzbyBhZGQgYSAnLycgaWYgbmVlZGVkCiMgc2V0cyB1cmwgdG8gJG5ld3VybApmdW5jdGlvbiBfX3dwdXJsX2NoZWNrX2h0dHAoKSB7CiAgW1sgISAkbmV3dXJsID1+IGh0dHBzPzovLyogXV0gJiYgbmV3dXJsPSJodHRwOi8vIiRuZXd1cmwgJiYgZWNobyAiTm8gJ2h0dHA6Ly8nIG9yICdodHRwczovLycgaW4gcHJvdmlkZWQgVVJMIiAmJiBlY2hvIC1lICJVc2luZyAnJG5ld3VybCcgaW5zdGVhZC4uLlxuIgogIGlmIFtbICIkMSIgPT0gImFkZGZvbGxvdyIgXV0gOyB0aGVuCiAgICBuZXd1cmw9IiQoZWNobyAkbmV3dXJsIHwgc2VkICdzfC8qJHx8JykiCiAgICBuZXd1cmw9IiRuZXd1cmwvIgogIGZpCn0KCmZ1bmN0aW9uIHdwdGhlbWUoKSB7CiAgW1sgJDEgIT0gIi1xIiBdXSAmJiBlY2hvCiAgaWYgW1sgJDEgPT0gIi0taGVscCIgfHwgJDEgPT0gIi1oIiBdXTsgdGhlbgogICAgZWNobyAtZSAiVGhpcyB0b29sIHJldHVybnMgdGhlIGN1cnJlbnQgdGhlbWUsIGFzIHdlbGwgYXMgbGlzdGluZyBhbnkgYXZhaWxhYmxlIG9uZXMgZm91bmQgaW4gdGhlIHdwLWNvbnRlbnQvdGhlbWVzIGZvbGRlci4gSXQgYWxzbyBjYW4gY2hhbmdlIHRvIGEgc3BlY2lmaWVkIHN0eWxlc2hlZXQsIHRlbXBsYXRlLCBib3RoLCBvciB0byBhIG5ldyBjb3B5IG9mIHR3ZW50eXR3ZWx2ZS5cbiIKICAgIGVjaG8gLWUgIlVzYWdlOlxuIgogICAgZWNobyAtZSAiXHR3cHRoZW1lIFtUSEVNRSBbb3B0aW9uXXxmcmVzaF1cbiIKICAgIGVjaG8gLWUgIlx0VEhFTUVcblx0XHRzcGVjaWZ5IGEgVEhFTUUgZm9yIGJvdGggdGhlIHN0eWxlc2hlZXQgYW5kIHRlbXBsYXRlLiIKICAgIGVjaG8gLWUgIlx0VEhFTUUgLXNcblx0XHRjaGFuZ2Ugb25seSB0aGUgV1Agc3R5bGVzaGVldCIKICAgIGVjaG8gLWUgIlx0VEhFTUUgLXRcblx0XHRjaGFuZ2Ugb25seSB0aGUgV1AgdGVtcGxhdGUiCiAgICBlY2hvIC1lICJcdGZyZXNoXG5cdFx0ZG93bmxvYWQgYW5kIGluc3RhbGwgdGhlICd0d2VudHl0d2VsdmUnIHRoZW1lLiBcblx0XHR1c2VmdWwgaWYgeW91IGhhdmUgbm8gdGhlbWVzIG9yIG9ubHkgZGFtYWdlZCBvbmVzIgogICAgZWNobwogICAgcmV0dXJuCiAgZWxpZiBbWyAhIC1mIHdwLWNvbmZpZy5waHAgXV07IHRoZW4gZWNobyBDb3VsZCBub3QgZmluZCB3cC1jb25maWcucGhwISAmJiByZXR1cm4gOQogIGZpCiAgZm9sZGVyPXdwLWNvbnRlbnQvdGhlbWVzCiAgaWYgW1sgJDEgPT0gIi1xIiB8fCAteiAkMSBdXTsgdGhlbgogICAgd3Bjb25uICJ3cHRoZW1lIgogICAgaWYgW1sgJG15Y29ubiA9PSAiIiBdXTsgdGhlbiBlY2hvIC1lICJcdHN0eWxlc2hlZXQ6XHRub3QgZm91bmRcblx0dGVtcGxhdGU6XHRub3QgZm91bmQiCiAgICBlbGlmIFtbICRteWNvbm4gIT0gIkVSUk9SIiogXV07IHRoZW4KICAgICAgZWNobyAtZSAiJG15Y29ubiIgfCB0YWlsIC0yIHwgYXdrICd7cHJpbnQgIlx0IiQyIigiJDEiKTpcdCIkM30nCiAgICBmaQogIGZpCiAgW1sgISAtZCAkZm9sZGVyICYmICQxICE9ICItcSIgXV0gJiYgbWtkaXIgLXAgJGZvbGRlciAmJiBlY2hvIC1lICJcbkNyZWF0ZWQgJGZvbGRlci4uLiIKICBpZiBbWyAkMSA9PSAiLXEiIF1dOyB0aGVuIHJldHVybgogIGVsaWYgW1sgLXogJDEgXV07IHRoZW4KICAgIGVjaG8gLWUgIlxuQXZhaWxhYmxlIHRoZW1lczpcbiIKICAgIGxzIC1GICRmb2xkZXIgfGdyZXAgIi8ifGdyZXAgLXYgIl5cLiJ8c2VkICJzfF5cKC4qXCkvfFx0XDF8IiAjbHMgLUEgaXMgb3ZlcndyaXR0ZW4gYnkgZGVmYXVsdCAkTFNfT1BUSU9OUyBpbiBhbGlhcwogIGVsaWYgW1sgJDEgPT0gImZyZXNoIiBdXTsgdGhlbgogICAgaWYgISBbWyAtZiAiJGZvbGRlci90d2VudHl0d2VsdmUuMS4xLnppcCIgXV0gOyB0aGVuIAogICAgd2dldCAtLW5vLWNoZWNrLWNlcnRpZmljYXRlIC1QICRmb2xkZXIgaHR0cHM6Ly93b3JkcHJlc3Mub3JnL2V4dGVuZC90aGVtZXMvZG93bmxvYWQvdHdlbnR5dHdlbHZlLjEuMS56aXAgJiYgZWNobyAiRG93bmxvYWRlZCB0d2VudHl0d2VsdmUuMS4xLnppcC4uLiIgfHwgewogICAgICBlY2hvIFVuYWJsZSB0byBkb3dubG9hZCB0d2VudHl0d2VsdmUuMS4xLnppcCEKICAgICAgcmV0dXJuIDkKICAgIH0KICAgIGZpCiAgICAjIGNoZWNrIGlmIGZpbGUgd2FzIHByb3Blcmx5IGRvd25sb2FkZWQgYW5kIG5vdCBjb3JydXB0CiAgICBlY2hvICJWZXJpZnlpbmcgZG93bmxvYWRlZCBmaWxlLi4uIgogICAgdW56aXAgLXQgIiRmb2xkZXIvdHdlbnR5dHdlbHZlLjEuMS56aXAiID4gL2Rldi9udWxsCiAgICB6aXBfZXhpdF9jb2RlPSQ/CiAgICBpZiBbWyAkemlwX2V4aXRfY29kZSAtbmUgMCBdXSA7IHRoZW4KICAgICAgZWNobyAtZSAiXG5FcnJvcjogRG93bmxvYWRlZCBmaWxlIHdhcyBjb3JydXB0OiB1bnppcCB0ZXN0IGdhdmUgZXJyb3IgY29kZSAkemlwX2V4aXRfY29kZSIKICAgICAgcm0gLWYgIiRmb2xkZXIvdHdlbnR5dHdlbHZlLjEuMS56aXAiCiAgICAgIGVjaG8gLWUgIlJlbW92ZWQgY29ycnVwdCBmaWxlOiAkZm9sZGVyL3R3ZW50eXR3ZWx2ZS4xLjEuemlwIgogICAgICBlY2hvICJUcnkgcnVubmluZyB0aGUgY29tbWFuZCBhZ2Fpbi4uLi4iCiAgICAgIHJldHVybiA5CiAgICBlbHNlCiAgICAgIGVjaG8gInR3ZW50eXR3ZWx2ZS4xLjEuemlwIGFwcGVhcnMgdG8gYmUgb2theS4iCiAgICBmaQogICAgdGVtcD0kKG5vdykKICAgIFtbIC1kICRmb2xkZXIvdHdlbnR5dHdlbHZlIF1dICYmIG12ICRmb2xkZXIvdHdlbnR5dHdlbHZlICRmb2xkZXIvdHdlbnR5dHdlbHZlXyR0ZW1wICYmIGVjaG8gIk1vdmVkIG9sZCB0d2VudHl0d2VsdmUgZmlsZXMgdG8gdHdlbnR5dHdlbHZlXyR0ZW1wLi4uIgogICAgdW56aXAgJGZvbGRlci90d2VudHl0d2VsdmUuMS4xLnppcCAtZCAkZm9sZGVyID4vZGV2L251bGwgJiYgZWNobyAiRXh0cmFjdGVkIG5ldyB0d2VudHl0d2VsdmUgZmlsZXMuLi4iIHx8IHsKICAgICAgZWNobyAiRmFpbGVkIHRvIGV4dHJhY3QgdHdlbnR5dHdlbHZlIGZpbGVzIiEKICAgICAgcmV0dXJuIDEKICAgIH0KICAgIHdwY29ubiAid3B0aGVtZW1vZCIgInR3ZW50eXR3ZWx2ZSIgJiYgZWNobyAiQ2hhbmdlZCB0byB0aGVtZSAndHdlbnR5dHdlbHZlJy4uLiIKICAgIHJtIC1mICRmb2xkZXIvdHdlbnR5dHdlbHZlLjEuMS56aXAgJiYgZWNobyAiRGVsZXRlZCB0d2VudHl0d2VsdmUuMS4xLnppcC4uLiIKICBlbHNlCiAgICBbWyAhIC1kIHdwLWNvbnRlbnQvdGhlbWVzLyQxIF1dICYmIGVjaG8gLWUgIk5vIHN1Y2ggdGhlbWU6ICQxXG4iICYmIHJldHVybiAxCiAgICBpZiBbWyAkMiA9PSAiLXMiIF1dOyB0aGVuIHdwY29ubiAid3B0aGVtZW1vZHMiICQxICYmIGVjaG8gIkNoYW5nZWQgdG8gc3R5bGVzaGVldCAnJDEnLi4uIgogICAgZWxpZiBbWyAkMiA9PSAiLXQiIF1dOyB0aGVuIHdwY29ubiAid3B0aGVtZW1vZHQiICQxICYmIGVjaG8gIkNoYW5nZWQgdG8gdGVtcGxhdGUgJyQxJy4uLiIKICAgIGVsaWYgW1sgLW4gJDIgXV07IHRoZW4gZWNobyAiSW52YWxpZCBvcHRpb24iIQogICAgZWxzZSB3cGNvbm4gIndwdGhlbWVtb2QiICQxICYmIGVjaG8gIkNoYW5nZWQgdG8gdGhlbWUgJyQxJy4uLiI7IGZpCiAgZmkKICBlY2hvCn0KCmZ1bmN0aW9uIHdwdmVyKCkgewogIGlmIFtbICQxID09ICItLWhlbHAiIHx8ICQxID09ICItaCIgXV07IHRoZW4KICAgIGVjaG8gLWUgIgpUaGlzIHRvb2wgcmV0dXJucyB0aGUgY3VycmVudCBpbnN0YWxsJ3MgZmlsZSBhbmQgZGF0YWJhc2UgdmVyc2lvbnMuCgogIFVzYWdlOgoKXHR3cHZlciBbb3B0aW9uXQoKXHQgICAgLXFcblx0XHRkaXNwbGF5IGFiYnJldmlhdGVkIHZlcnNpb24gb3V0cHV0Clx0ICAgIC1oXG5cdFx0ZGlzcGxheSB0aGlzIGhlbHAgb3V0cHV0CiIKICAgIHJldHVybgogIGZpCiAgbG9jYWwgZmlsZXZlcj0iVW5rbm93biIKICBsb2NhbCBkYnZlcj0iVW5rbm93biIKICBsb2NhbCBkYnZlcl9maWxlcz0iVW5rbm93biIKICBbWyAtZiB3cC1pbmNsdWRlcy92ZXJzaW9uLnBocCBdXSAmJiBmaWxldmVyPSQoY2F0IHdwLWluY2x1ZGVzL3ZlcnNpb24ucGhwIHwgZ3JlcCAid3BfdmVyc2lvbiAiIHwgc2VkICJzLy4qJ1woLipcKScuKi9cMS8iKQogIHdwY29ubiAid3BkYnZlciIKICBpZiBbWyAkPyA9PSAwICYmICRteWNvbm4gIT0gIkVSUk9SIiogXV07IHRoZW4KICAgIGRidmVyPSQoZWNobyAtZSAiJG15Y29ubiIgfCB0YWlsIC0xKQogICAgZGJ2ZXJfZmlsZXM9JChjdXJsIC1TcyBodHRwczovL2NvZGV4LndvcmRwcmVzcy5vcmcvRkFRX0luc3RhbGxhdGlvbiB8IGdyZXAgIj0gJGRidmVyIiB8IGhlYWQgLTEgfCBhd2sgJ3twcmludCAkMX0nKQogIGZpCiAgaWYgW1sgIiQxIiA9PSAiLXEiIF1dOyB0aGVuIGVjaG8gLWUgIiRmaWxldmVyICRkYnZlciAkZGJ2ZXJfZmlsZXMiCiAgZWxzZSBlY2hvIC1lICJcblx0V1AgdmVyc2lvbjpcdCRmaWxldmVyXG5cdERCIHZlcnNpb246XHQkZGJ2ZXIgKHVwIHRvICRkYnZlcl9maWxlcylcbiIKICBmaQp9CgojIFNob3dzIHRoZSBtYWluIGxvZ3MKIyBUT0RPOiBhZGQgYXJnIHRvIHNlYXJjaCBmb3IgYWxsIGVycm9yX2xvZ3MsCiMgYnV0IGNhbm5vdCB1c2UgZmluZC4gbm90IGdvb2Qgb24gbG9uZyBydW5uaW5nIHNlcnZlcnMKZnVuY3Rpb24gd3BlcnIoKSB7CiAgZm9yIGVhY2ggaW4gIndwLWFkbWluL2Vycm9yX2xvZyIgImVycm9yX2xvZyIgOyBkbwogICAgZWNobwogICAgaWYgWyAtZiAiJGVhY2giIF0gOyB0aGVuCiAgICAgIGlmIFsgLXMgIiRlYWNoIiBdIDsgdGhlbgogICAgICAgIGVjaG8gIj09PiAkZWFjaCA8PT0iCiAgICAgICAgdGFpbCAiJGVhY2giCiAgICAgIGVsc2UKICAgICAgICBlY2hvICIkZWFjaCBpcyBlbXB0eSIKICAgICAgZmkKICAgIGVsc2UKICAgICAgZWNobyAibm8gJGVhY2ggd2FzIGZvdW5kIgogICAgZmkKICAgIGVjaG8gIi0tIgogIGRvbmUKICAjIFRPRE86IHNlYXJjaCBmb3Igb3RoZXIgZXJyb3IgbG9ncy4KfQogICAgCgpmdW5jdGlvbiB3cHVzZXIoKSB7CiAgW1sgJDEgIT0gIi1xIiBdXSAmJiBlY2hvCiAgaWYgW1sgJDEgPT0gIi0taGVscCIgfHwgJDEgPT0gIi1oIiBdXTsgdGhlbgogICAgZWNobyAtZSAiVGhpcyB0b29sIHBlcmZvcm1zIHZhcmlvdXMgdXNlciBmdW5jdGlvbnMsIGluY2x1ZGluZyByZXR1cm5pbmcgaW5mbyBmb3IgYSBzcGVjaWZpZWQgdXNlciwgY2hhbmdpbmcgdXNlcm5hbWVzLCBwYXNzd29yZHMsIGNoYW5naW5nIGEgdXNlciB0byBhbiBhZG1pbiwgY3JlYXRpbmcgbmV3IGFkbWluIHVzZXJzLCBhbmQgZGVsZXRpbmcgdXNlcnMuXG4iCiAgICBlY2hvIC1lICJVc2FnZTpcbiIKICAgIGVjaG8gLWUgIlx0d3B1c2VyIFtwYXJhbSBbb3B0aW9uIFtwYXJhbV1dXVxuIgogICAgZWNobyAtZSAiXHRVU0VSSURcblx0XHRSZXR1cm5zIGRldGFpbHMgYWJvdXQgc3BlY2lmaWVkIHVzZXIgVVNFUklEIgogICAgZWNobyAtZSAiXHRVU0VSSUQgLXUgTkFNRVxuXHRcdGNoYW5nZSB1c2VybmFtZSBvZiB1c2VyIFVTRVJJRCB0byBOQU1FIgogICAgZWNobyAtZSAiXHRVU0VSSUQgLXAgUEFTU1xuXHRcdGNoYW5nZSBwYXNzd29yZCBvZiB1c2VyIFVTRVJJRCB0byBQQVNTIgogICAgZWNobyAtZSAiXHRVU0VSSUQgLWFcblx0XHRwcm9tb3RlIHVzZXIgVVNFUklEIHRvIGFkbWluIgogICAgZWNobyAtZSAiXHRVU0VSSUQgLWRcblx0XHRkZWxldGUgdXNlciBVU0VSSUQiCiAgICBlY2hvIC1lICJcdFVTRVJJRCAtbCwgbG9naW5cblx0XHRtYWtlIGxvZ2luL2FjY2VzcyBsaW5rIGZvciB1c2VyIFVTRVJJRCIKICAgIGVjaG8gLWUgIlx0ICAgICAgICAtPiB0aGlzIGlzIGVhc2llciBhbmQgZmFzdGVyIHRoYW4gbWFraW5nIGEgdXNlciIKICAgIGVjaG8gLWUgIlx0ICAgICAgICAtPiB5b3UgY2FuIGFsc28ganVzdCBydW4gJ3dwbG9naW4nIGFzIGEgc2hvcnRjdXQiCiAgICBlY2hvIC1lICJcdC1uLCBuZXdcblx0XHRjcmVhdGUgbmV3IGFkbWluIHVzZXIiCiAgICBlY2hvIC1lICJcdGFsbFxuXHRcdGxpc3QgYWxsIHVzZXJzIgogICAgZWNobyAtZSAiXHRhZG1pbnNcblx0XHRsaXN0IGFsbCBhZG1pbnNcbiIKICAgIHJldHVybgogIGVsaWYgW1sgISAtZiB3cC1jb25maWcucGhwIF1dOyB0aGVuIGVjaG8gQ291bGQgbm90IGZpbmQgd3AtY29uZmlnLnBocCEgJiYgcmV0dXJuIDkKICBmaQogIGlmIFtbIC16ICQxIF1dOyB0aGVuIHdwY29ubiAid3B1c2VyIgkJCQkjbGlzdCB1c2VycwogIGVsaWYgW1sgJDEgPT0gIi1xIiBdXTsgdGhlbiB3cGNvbm4gIndwdXNlcjEiCQkJI2xpc3QgZmlyc3QgdXNlcgogIGVsaWYgW1sgJDEgPX4gXlswLTldKyQgXV07IHRoZW4JCQkJI2lmIGEgbnVtYmVyLi4uCiAgICBpZiBbWyAkMiA9PSAiLXAiIF1dOyB0aGVuCQkJCQkgICNjaGFuZ2UgcGFzc3dvcmQuLi4KICAgICAgaWYgW1sgLW4gJDMgXV07IHRoZW4gd3Bjb25uICJ3cHVzZXJwIiAkMSAiJDMiCQkgICAgIy4uLmlmIG9uZSBpcyBzcGVjaWZpZWQuLi4KICAgICAgZWxzZSBlY2hvIC1lICJcdE5vIHBhc3N3b3JkIHNwZWNpZmllZCIhIlxuIiAmJiByZXR1cm4gMTsgZmkgICAjLi4ub3RoZXJ3aXNlLCBlbmQuCiAgICBlbGlmIFtbICQyID09ICItdSIgXV07IHRoZW4JCQkJCSAgI2NoYW5nZSB1c2VybmFtZS4uLgogICAgICBpZiBbWyAtbiAkMyBdXTsgdGhlbiB3cGNvbm4gIndwdXNlcnUiICQxICIkMyIJCSAgICAjLi4uaWYgb25lIGlzIHNwZWNpZmllZC4uLgogICAgICBlbHNlIGVjaG8gLWUgIlx0Tm8gdXNlcm5hbWUgc3BlY2lmaWVkIiEiXG4iICYmIHJldHVybiAxOyBmaSAgICMuLi5vdGhlcndpc2UsIGVuZC4KICAgIGVsaWYgW1sgJDIgPT0gIi1hIiBdXTsgdGhlbiB3cGNvbm4gIndwdXNlcmEiICQxCSAJICAjY2hhbmdlIHRvIGFkbWluCiAgICBlbGlmIFtbICQyID09ICItZCIgXV07IHRoZW4gcmVhZCAtcCAiJChlY2hvICQnXHQnKURlbGV0ZSB1c2VyICckMSc/ICIgLW4gMSAtciAmJiBlY2hvICYmIFtbICEgJFJFUExZID1+IF5bWXldJCBdXSAmJiBlY2hvIC1lICJcdERlbGV0aW9uIG9mIHVzZXIgJyQxJyBjYW5jZWxsZWQiISJcbiIgJiYgcmV0dXJuIDEgfHwgd3Bjb25uICJ3cHVzZXJkIiAkMQkgCSAgI2RlbGV0ZSB1c2VyCiAgICBlbGlmIFtbICQyID09ICItbCIgfHwgJDIgPT0gIi0tbG9naW4iIHx8ICQyID09ICJsb2dpbiIgXV07IHRoZW4gX193cF9jcmVhdGVfYWNjZXNzX2ZpbGUgJDEgOyBteWNvbm49MSAgICMgY3JlYXRlIGxvZ2luIGxpbmsgdG8gZ2V0IGNvb2tpZQogICAgZWxpZiBbWyAteiAkMiBdXTsgdGhlbiB3cGNvbm4gIndwdXNlcmluZm8iICQxCQkgICNzaG93IHVzZXIgaW5mbwogICAgZWxzZSBlY2hvIC1lICJcdEludmFsaWQgb3B0aW9uIiEiXG4iICYmIHJldHVybiAxOyBmaQkJICAjT3RoZXJ3aXNlLCBlbmQuCiAgZWxpZiBbWyAkMSA9PSAibmV3IiB8fCAkMSA9PSAiLW4iIF1dOyB0aGVuIHdwY29ubiAid3B1c2VybmV3IgkJI2NyZWF0ZSBuZXcgYWRtaW4uLi4KICBlbGlmIFtbICQxID09ICJhbGwiIF1dOyB0aGVuIHdwY29ubiAid3B1c2VyYWxsIgkJI3Nob3cgYWxsIHVzZXJzLi4uCiAgZWxpZiBbWyAkMSA9PSAiYWRtaW5zIiBdXTsgdGhlbiB3cGNvbm4gIndwdXNlcmFkbWlucyIJCSNzaG93IGFkbWlucy4uLgogIGVsc2UgZWNobyAtZSAiXHRJbnZhbGlkIG9wdGlvbiIhIlxuIiAmJiByZXR1cm4gMTsgZmkJCSNPdGhlcndpc2UsIGVuZC4KICBpZiBbWyAkbXljb25uID09ICIiIF1dOyB0aGVuIGVjaG8gLWUgIlx0VXNlciBub3QgZm91bmQiIQogIGVsaWYgW1sgJG15Y29ubiAhPSAiRVJST1IiKiBdXTsgdGhlbgogICAgaWYgW1sgLXogJDEgXV07IHRoZW4gIAogICAgICBlY2hvIC1lICJcdChvbmx5IHNob3dpbmcgdXB0byAyMyB1c2Vycy4gVG8gc2VlIGFsbCB1c2UgJ3dwdXNlciBhbGwnKVxuIgogICAgICBlY2hvIC1lICIkbXljb25uIiB8IHRhaWwgLW4gKzIgfCBhd2sgJ3twcmludCAiXHQiJDEiOlx0IiQyfScKICAgIGVsaWYgW1sgJDEgPT0gImFsbCIgXV07IHRoZW4gZWNobyAtZSAiJG15Y29ubiIgfCB0YWlsIC1uICsyIHwgYXdrICd7cHJpbnQgIlx0IiQxIjpcdCIkMn0nCiAgICBlbGlmIFtbICQxID09ICJhZG1pbnMiIF1dOyB0aGVuIGVjaG8gLWUgIlx0QWRtaW5zOlxuIjtlY2hvIC1lICIkbXljb25uIiB8IHRhaWwgLW4gKzIgfCBhd2sgJ3twcmludCAiXHQiJDEiOlx0IiQyfScKICAgIGVsaWYgW1sgJDEgPT0gIi1xIiBdXTsgdGhlbiBlY2hvICQoZWNobyAtZSAiJG15Y29ubiIgfCB0YWlsIC0xKQogICAgZWxpZiBbWyAkMiA9PSAiLXAiIF1dOyB0aGVuIGVjaG8gLWUgIlVwZGF0ZWQgcGFzc3dvcmQgZm9yIHVzZXIgJDEgKCckKGVjaG8gLWUgIiRteWNvbm4iIHwgdGFpbCAtMSknKSB0byAnJDMnLi4uIgogICAgZWxpZiBbWyAkMiA9PSAiLXUiIF1dOyB0aGVuIGVjaG8gLWUgIlVwZGF0ZWQgdXNlcm5hbWUgZm9yIHVzZXIgJDEgZnJvbSAnJChlY2hvIC1lICIkbXljb25uIiB8IHRhaWwgLTEpJyB0byAnJDMnLi4uIgogICAgZWxpZiBbWyAkMiA9PSAiLWEiIF1dOyB0aGVuIGVjaG8gLWUgIlByb21vdGVkIHVzZXIgJDEgdG8gYWRtaW4uLi4iCiAgICBlbGlmIFtbICQyID09ICItZCIgXV07IHRoZW4gZWNobyAtZSAiXG5EZWxldGVkIHVzZXIgJDEgKCckKGVjaG8gLWUgIiRteWNvbm4iIHwgdGFpbCAtMSknKS4uLiIKICAgIGVsaWYgW1sgJDEgPT0gIm5ldyIgfHwgJDEgPT0gIi1uIiBdXTsgdGhlbiBlY2hvIC1lICJDcmVhdGVkIG5ldyBhZG1pbiAodXNlciAnJChlY2hvIC1lICIkbXljb25uIiB8IHRhaWwgLTEpJykgd2l0aCB1c2VybmFtZSAnZGVsZXRlbWUnXG5cbiBhbmQgcGFzc3dvcmQgJyRkZWxldGVtZV9wYXNzJy4uLlxuXG5NYWtlIHN1cmUgdG8gZGVsZXRlIG9yIHJlbmFtZSB0aGlzIHVzZXIiIQogICAgZWxpZiBbWyAteiAkMiBdXTsgdGhlbiBlY2hvIC1lICIkbXljb25uIiB8IHRhaWwgLW4gKzIKICAgIGZpCiAgZWxzZSBlY2hvICIkbXljb25uIgogIGZpCiAgW1sgJDEgIT0gIi1xIiBdXSAmJiBlY2hvCiAgCiAgIyBmaW5kIGFuZCByZW1vdmUgb2xkIGFjY2VzcyBsaW5rcwogIGlmIFtbIC16ICRzaG93X2FjY2Vzc19saW5rX3dhcm5pbmcgXV0gOyB0aGVuCiAgIGlmIFtbIC16ICQxIHx8ICQxID09ICJuZXciIHx8ICQxID09ICJhbGwiIHx8ICQxID09ICJhZG1pbnMiIF1dIDsgdGhlbgogICAgbGlzdF9vZl9maWxlcz0iJChscyBtYWtlLXBhc3MtKi5waHAgYWNjZXNzLWxpbmstKi5waHAgMj4vZGV2L251bGwpIgogICAgaWYgW1sgLW4gIiRsaXN0X29mX2ZpbGVzIiBdXSA7IHRoZW4KICAgICAgYWNjZXNzX2ZpbGVzPSIiCiAgICAgICMgdmVyaWZ5IGVhY2ggZmlsZSBzbyB3ZSBkb24ndCByZW1vdmUgdGhlIHdyb25nIG9uZXMKICAgICAgIyBsb29rIGZvciB0aGUgc3RyaW5nICJ0aGlzIGZpbGUgaXMgdG8gZ2l2ZSBhZG1pbiBhY2Nlc3MiCiAgICAgIGZvciBlYWNoIGluICRsaXN0X29mX2ZpbGVzIDsgZG8KICAgICAgICBpZiBbWyAkKGdyZXAgInRoaXMgZmlsZSBpcyB0byBnaXZlIGFkbWluIGFjY2VzcyIgJGVhY2gpIF1dIDsgdGhlbgogICAgICAgICAgYWNjZXNzX2ZpbGVzPSIkZWFjaCAke2FjY2Vzc19maWxlc30iCiAgICAgICAgZmkKICAgICAgZG9uZQogICAgICBpZiBbWyAtbiAkYWNjZXNzX2ZpbGVzIF1dIDsgdGhlbgogICAgICAgIGVjaG8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICBlY2hvIFdhcm5pbmc6IHRoZXJlIGFyZSBBY2Nlc3MgTGluayBmaWxlcy4gVGhlc2UgbWF5IGJlIHRoZSBmaWxlcwogICAgICAgIGVjaG8gdGhhdCB3ZSB1c2UgdG8gYWNjZXNzIHRoZSBEYXNoYm9hcmQgb2YgdGhlIHNpdGUuIAogICAgICAgIGVjaG8gIiAtLS0tLS0gVGhleSBwcm9iYWJseSBzaG91bGQgYmUgcmVtb3ZlZCAtLS0tLS0iCiAgICAgICAgbHMgJGFjY2Vzc19maWxlcwogICAgICAgIGVjaG8KICAgICAgZmkKICAgICAgcmVhZCAtcCAiJChlY2hvICQnXHQnKVdvdWxkIHlvdSBsaWtlIHRvIHJlbW92ZSB0aGVzZSBBY2Nlc3MgTGluayBmaWxlcz8gKHkvTikgIiAtbiAxIC1yCiAgICAgIGlmIFtbICRSRVBMWSA9fiBeW1l5XSQgXV07IHRoZW4KICAgICAgICBybSAtZiBtYWtlLXBhc3MtKi5waHAgYWNjZXNzLWxpbmstKi5waHAKICAgICAgICBpZiBbWyAtbiAiJChscyBtYWtlLXBhc3MtKi5waHAgMj4vZGV2L251bGwpIiB8fCAtbiAiJChscyBhY2Nlc3MtbGluay0qLnBocCAyPi9kZXYvbnVsbCkiIF1dIDsgdGhlbgogICAgICAgICAgZWNobyAtZSAiXG5GYWlsZWQgdG8gcmVtb3ZlIHRoZSBmaWxlcy4gTWF5YmUgdGhlcmUgaXMgYSBwZXJtaXNzaW9ucyBpc3N1ZT8iCiAgICAgICAgZWxzZQogICAgICAgICAgZWNobyAtZSAiXG5SZW1vdmVkIGFjY2VzcyBsaW5rcyIKICAgICAgICBmaQogICAgICBlbHNlCiAgICAgICAgZWNobyAtZSAiXG5cbllvdSB3b24ndCBiZSBwcm9tcHRlZCBhZ2FpbiwgdW5sZXNzIHlvdSBydW46IHNob3dfYWNjZXNzX2xpbmtfd2FybmluZz0nJyIKICAgICAgICBzaG93X2FjY2Vzc19saW5rX3dhcm5pbmc9ZG9uZQogICAgICBmaQogICAgICBlY2hvCiAgICBmaQogICBmaQogIGZpCn0KCiMgY3JlYXRlcyBhIGFjY2VzcyBsaW5rIGZvciB0aGUgZmlyc3QgYWRtaW4gdXNlciBpdCBmaW5kcwpmdW5jdGlvbiB3cGxvZ2luKCkgewogIHdwY29ubiAid3B1c2VyYWRtaW5zIgogIGlmIFtbIC16ICIkbXljb25uIiBdXSA7dGhlbgogICAgZWNobyAiV2UgZWl0aGVyIGZhaWxlZCB0byBjb25uZWN0IHRvIHRoZSBkYXRhYmFzZSBvciB5b3UgaGF2ZSBubyBhZG1pbnMgb24gdGhpcyBzaXRlLiIKICAgIHJldHVybgogIGVsaWYgW1sgJG15Y29ubiA9PSAiRVJST1IiKiBdXTsgdGhlbgogICAgIkVycm9yIGNvbm5lY3RpbmcgdG8gdGhlIGRhdGFiYXNlOiAkbXljb25uIgogICAgcmV0dXJuCiAgZmkKICAjIF9fYWRtaW5faWQ9IiQoZWNobyAtZSAkbXljb25uIHwgdGFpbCArMSB8IGF3ayAnTkYtMSB7cHJpbnQgKCAkKE5GLTEpICl9JykiCiAgX19hZG1pbl9pZD0iJChlY2hvICRteWNvbm4gfCBhd2sgJ3tpZiAoTlI9PTEpIHtwcmludCAkM319JykiCiAgIyBjaGVjayB0aGF0IGl0IGlzIGEgbnVtYmVyCiAgY2FzZSAkX19hZG1pbl9pZCBpbgogICAgJyd8KlshMC05XSopIAogICAgICAjIG5vdCBhIG51bWJlciAKICAgICAgZWNobyAiRXJyb3I6IEkgd2FzIG5vdCBhYmxlIHRvIGdldCB0aGUgaWQgb2YgYW55IGFkbWlucy4iCiAgICAgIGVjaG8gIlRyeSAnd3B1c2VyIGFkbWlucycgYW5kIHdwdXNlciAjIC1sIgogICAgICBlY2hvICIoSUQgbnVtYmVyIHJldHVybmVkOiAkX19hZG1pbl9pZCkiCiAgICAgIHJldHVybiA5CiAgICAgIDs7CiAgICAqKSAKICAgICAgZWNobyAtZSAiXG5Vc2luZyBhZG1pbiB3aXRoIElEICRfX2FkbWluX2lkIgogICAgICB3cHVzZXIgJF9fYWRtaW5faWQgLWwKICAgICAgOzsKICBlc2FjCiAgCn0KCmZ1bmN0aW9uIF9fd3BfY3JlYXRlX2FjY2Vzc19maWxlKCkgewoKIyBnZXQgYW5kIHZlcmlmeSB1c2VyCnU9JDEKaWYgWyAtbiAiJCh3cHVzZXIgJHUgfCBncmVwICdVc2VyIG5vdCBmb3VuZCcpIiBdIDsgdGhlbgogICMgSnVzdCB3YXJuIGZvciBub3csIHVudGlsIHdlIHRlc3QgaXQgYmV0dGVyCiAgZWNobyAiKioqKiBXYXJuaW5nLCBJIHRoaW5rIHRoYXQgdXNlciBkb2VzIG5vdCBleGlzdCAqKioqIgogIGVjaG8gIiAgQnV0IGlmIGl0IGRvZXMsIHBsZWFzZSByZXBvcnQgdGhpcyBhcyBhIGJ1Zy4iCiAgZWNobyAiLi4uLiBDb250aW51aW5nIGFueXdheXMgLi4uLiIKICBlY2hvCmZpCgojIENoZWNrcwp0ZXN0c2l0ZT0iJCh3cHVybCkiCmlmIFtbIC16ICR0ZXN0c2l0ZSBdXSA7IHRoZW4KICBlY2hvICJFcnJvci4gSSBnb3QgYW4gYmxhbmsgYmFjayBmb3IgdGhlIHNpdGUgbmFtZSIKICB3cHN0YXRzCiAgcmV0dXJuIDkKZmkKCiMgR2V0IHNpdGUKc2l0ZT0iJCh3cHVybCAtcSAtLXNpdGUpIgojIFJlbW92ZSBsYXN0IC8Kc2l0ZT0iJChlY2hvICRzaXRlIHwgc2VkICdzfC8qJHx8JykiCgojIHRoaXMgd2lsbCBiZSB0aGUgZmlsZSBuYW1lCiMgVE9ETzogdXNlIHRtcGZpbGUgaWYgYXZhaWxhYmxlCl9fd3BfcmFuZF9zdHJpbmcgMTYKc3Q9IiR3cF9yYW5kX3N0cmluZyIKdG1wX3BocF9maWxlPSJhY2Nlc3MtbGluay0ke3N0fS5waHAiCgp0cmFwICJybSAtZiBcIiR0bXBfcGhwX2ZpbGVcIiA7IGVjaG8gVGhlIGZpbGUgd2FzIHJlbW92ZWQuIDsgdHJhcCAtIDAgMSAyIDMgMTUgOyByZXR1cm4iIDAgMSAyIDMgMTUKCl9fd3BfcmFuZF9zdHJpbmcgMTAKcGFzcz0iJHdwX3JhbmRfc3RyaW5nIgoKIyBiZSBzdXJlIHRvIGVzY2FwZSBhbGwgcGhwICR2YXJzIG9yIGJhc2ggd2lsbCB0cnkgdG8gdXNlIHRoZW0KIyBleGNlcHQgZm9yICR1LCBhcyB0aGF0IGlzIHRoZSB1c2VyIGlkCmNhdCA+ICIkdG1wX3BocF9maWxlIiA8PEVPRgo8P3BocAovLyB0aGlzIGZpbGUgaXMgdG8gZ2l2ZSBhZG1pbiBhY2Nlc3MKLy8geW91IGNhbiByZW1vdmUgaXQgYXQgYW55IHRpbWUKLy8gcmVtb3ZlIG9uIHJ1biAtIGV2ZW4gaWYgdGhleSBmYWlsIHRoZSBwYXNzIGJlbG93CmNsYXNzIERlbGV0ZU9uRXhpdAp7CiAgICBmdW5jdGlvbiBfX2Rlc3RydWN0KCkKICAgIHsKICAgICAgaWYgKCBmaWxlX2V4aXN0cyhfX0ZJTEVfXykgKSB7CiAgICAgICAgdW5saW5rKF9fRklMRV9fKTsKICAgICAgfQogICAgfQp9ClwkZ19kZWxldGVfb25fZXhpdCA9IG5ldyBEZWxldGVPbkV4aXQoKTsKaWYgKCAhIGlzc2V0IChcJF9HRVRbJ3onXSkgCiAgICAgICAgb3IgZW1wdHkoXCRfR0VUWyd6J10pIAogICAgICAgIG9yIHN0cmNtcCAoIFwkX0dFVFsneiddLCAnJHBhc3MnICkgKSB7CiAgZWNobyAnRm9yYmlkZGVuJzsKICBleGl0Owp9CgovLyBsb2FkIHdwIGxpYnMKcmVxdWlyZV9vbmNlKCAnLi93cC1sb2FkLnBocCcgKTsKCi8vIGNhbm5vdCBjaGVjayBhcyB3ZSBkbyBub3QgaGF2ZSBjb29raWUKLy8gYnV0IGxlZnQgaXQgaGVyZSBzbyB0byByZW1lbWJlcgovL2lmICggIWN1cnJlbnRfdXNlcl9jYW4oJ2FkbWluJykgKSB7CiAgCi8vIGdlbiBhbmQgc2V0IGF1dGggY29va2llcwp3cF9zZXRfYXV0aF9jb29raWUoJHUpOwoKLy8gcmVkaXJlY3QKLy8gZG8gbm90IHRlc3QgZm9yIHJlZGlyZWN0LCBhcyAndXNlcl9jYW4nIGlzIG9ubHkgPjMuNQovL2lmICggdXNlcl9jYW4oJHUsJ3N3aXRjaF90aGVtZXMnKSApIHsKd3BfcmVkaXJlY3QoIGFkbWluX3VybCgpICk7CgovLyBqdXN0IHRvIGJlIHNhZmUKaWYgKCBmaWxlX2V4aXN0cyhfX0ZJTEVfXykgKSB7CiAgdW5saW5rKF9fRklMRV9fKTsKfQpFT0YKCmVjaG8gIkdvIHRvIHRoaXMgbGluayB0byBnZXQgeW91ciBsb2dpbiBjb29raWVzOiIKZWNobyAKZWNobyAiJHNpdGUvJChiYXNlbmFtZSAkdG1wX3BocF9maWxlKT96PSRwYXNzIgplY2hvICIKVGhpcyBpcyBhIG9uZSB0aW1lIHVzZSBvbmx5IGxpbmsuIE1ha2Ugc3VyZSB5b3UgdXNlL2NvcHkgaXQgcmlnaHQuCk1vc3QgdGVybWluYWxzIGFsbG93IHlvdSB0byBjbGljayBvbiB0aGUgbGluayB0byBvcGVuIGl0LgoKQWxzbywgcHJlc3NpbmcgZW50ZXIgaGVyZSB3aWxsIHJlbW92ZSBpdC4KQWZ0ZXIgNjAgc2Vjb25kcyBJIHdpbGwgcmVtb3ZlIGl0LCBldmVuIGlmIHlvdSBkb24ndCBwcmVzcyBlbnRlci4iCmVjaG8KeD0yMApSRUFEPSIiCndoaWxlIFtbICR4IC1ndCAwICYmIC16ICRSRUFEICYmIC1mICIkdG1wX3BocF9maWxlIiBdXSA7IGRvCiByZWFkIC10IDMKIHJlYWRfY29kZT0kPwogW1sgJHJlYWRfY29kZSAtZXEgMCBdXSAmJiBSRUFEPSJvayIKICMgZWNobyAkcmVhZF9jb2RlCiB4PSQoKCR4IC0gMSkpCmRvbmUKaWYgISBbWyAtZiAiJHRtcF9waHBfZmlsZSIgXV07IHRoZW4KICBlY2hvICJGaWxlIHJlbW92ZWQgaXRzZWxmLiIKZWxzZQogIFsgLWYgIiR0bXBfcGhwX2ZpbGUiIF0gJiYgcm0gLWYgIiR0bXBfcGhwX2ZpbGUiCiAgaWYgWyAkPyAtZXEgMCBdICYmICEgWyAtZiAiJHRtcF9waHBfZmlsZSIgXSA7IHRoZW4KICAgIGVjaG8gIlRoZSBmaWxlIHdhcyByZW1vdmVkLiIKICBlbHNlCiAgICBlY2hvICJFUlJPUjogRmFpbGVkIHRvIHJlbW92ZSB0ZW1wIGZpbGUgJHRtcF9waHBfZmlsZSIKICBmaQpmaQoKdHJhcCAtIDAgMSAyIDMgMTUKCn0KCgpmdW5jdGlvbiB3cHBsdWcoKSB7CiAgZWNobwogIAogICMgb25seSBzZXQgcGx1Z2lucyBmb2xkZXIgaWYgbm90IHNldC4gVGhpcyB3aWxsIGFsbG93IHVzIHRvIHVzZSBjdXN0b20gZm9sZGVyIGxvY2F0aW9ucwogIFtbIC16ICIkd3B0X3BsdWdpbnNfZm9sZGVyIiBdXSAmJiB3cHRfcGx1Z2luc19mb2xkZXI9IndwLWNvbnRlbnQvcGx1Z2lucyIKICAKICBpZiBbWyAkMSA9PSAiLS1oZWxwIiB8fCAkMSA9PSAiLWgiIF1dOyB0aGVuCiAgICBlY2hvIC1lICJUaGlzIHRvb2wgZG9lcyBiYXNpYyBwbHVnaW4gZnVuY3Rpb25zLCBzdWNoIGFzIGRpc3BsYXlpbmcgYWN0aXZlIGFuZCBhdmFpbGFibGUgcGx1Z2lucywgb3IgZGlzYWJsaW5nIHRoZW0uClVzYWdlOiB3cHBsdWcgW2Rpc2FibGUgPHBsdWdpbj58ZGlzYWJsZS1hbGx8cmVzdG9yZS1hbGx8ZGlzYWJsZS1hbGwtdmlhLWZvbGRlcl0KClx0W25vIG9wdGlvbl0KXHRcdHNob3cgYSBsaXN0IG9mIGVuYWJsZWQgcGx1Z2lucyBhbmQgYWxsIHBsdWdpbnMgaW5zdGFsbGVkCgpcdC1kLCBkaXNhYmxlIFtwbHVnaW5dClx0XHRkaXNhYmxlIHNlbGVjdGVkIHBsdWdpbiBpbiB0aGUgZGF0YWJhc2UsIGJ5IGl0cyBmb2xkZXIgbmFtZQpcdFx0aGludDogbGlzdCBhbGwgdGhlIHBsdWdpbnMsIGFuZCB5b3UnbGwgc2VlIGl0IGluIHRoZXJlLgoKXHRkaXNhYmxlLWFsbCwgLS1kYQpcdFx0ZGlzYWJsZSBhbGwgcGx1Z2lucyBpbiB0aGUgZGF0YWJhc2UgKHNhZmVyIG1ldGhvZCkKClx0cmVzdG9yZS1hbGwsIC0tcmEKXHRcdHJlc3RvcmUgdGhlIHBsdWdpbnMgdGhhdCB3ZXJlIGFjdGl2ZSBiZWZvcmUsIGFzIGRpc2FibGUtYWxsClx0XHRzYXZlcyB0aGVtIHRvIFwkd3B0X2Rpc2FibGVkX3BsdWdpbnMuIE9mIGNvdXJzZSBpdCdzIG9ubHkgClx0XHR2YWxpZCBmb3IgdGhpcyBzZXNzaW9uLgoKXHRkaXNhYmxlLWFsbC12aWEtZm9sZGVyClx0XHRkaXNhYmxlIGFsbCBwbHVnaW5zIGJ5IHJlbmFtaW5nIHBsdWdpbmcgZm9sZGVyIApcdFx0KHdhcm5pbmchIG1heSBjYXVzZSBkYXRhIGxvc3MpCiIKICAgIHJldHVybgogIGVsaWYgW1sgISAtZiB3cC1jb25maWcucGhwIF1dOyB0aGVuIGVjaG8gQ291bGQgbm90IGZpbmQgd3AtY29uZmlnLnBocCEgJiYgcmV0dXJuIDkKICBmaQogIGlmIFtbICQxID1+IF5bLV0qZGEkIF1dIHx8IFtbICQxID1+IF5bLV0qZGlzYWJsZS1hbGwkIF1dIDsgdGhlbgogICAgIyBnZXQgY3VycmVudCBwbHVnaW5zCiAgICB3cGNvbm4gIndwcGx1ZyIKICAgIGlmIFtbICRteWNvbm4gPT0gIkVSUk9SIiogXV07IHRoZW4gCiAgICAgIGVjaG8gIlRoZXJlIHdhcyBhIGRhdGFiYXNlIGVycm9yOiAkbXljb25uIgogICAgICByZXR1cm4gOQogICAgZmkKICAgIHdwdF9kaXNhYmxlZF9wbHVnaW5zPSQoZWNobyAiJG15Y29ubiIgfCB0YWlsIC1uICsyKQogICAgaWYgW1sgLXogIiR3cHRfZGlzYWJsZWRfcGx1Z2lucyIgXV0gOyB0aGVuCiAgICAgIGVjaG8gIkZhaWxlZCB0byBnZXQgYSBsaXN0IG9mIHBsdWdpbnMuLi4gb3IgaXMgYWN0aXZlX3BsdWdpbnMgZW1wdHk/IgogICAgICBlY2hvICJOb3RoaW5nIGRvbmUiCiAgICAgIHJldHVybiA5CiAgICBlbHNlCiAgICAgICMgZGlzYWJsZSBhbGwKICAgICAgd3Bjb25uICJ3cHBsdWdkaXNhYmxlYWxsIiAmJiBlY2hvICJEaXNhYmxlZCBhbGwgcGx1Z2lucyIgfHwgZWNobyAiRmFpbGVkIHRvIGRpc2FibGUgcGx1Z2lucyIKICAgICAgZWNobyAiWW91IG1heSB3YW50IHRvIGNvcHkgdGhlIGZvbGxvd2luZyBjb2RlLCBpbiBjYXNlIHlvdXIgc2hlbGwgY2xvc2VzOiIKICAgICAgZWNobwogICAgICBlY2hvICR3cHRfZGlzYWJsZWRfcGx1Z2lucwogICAgICBlY2hvCiAgICAgIHJldHVybgogICAgZmkKICAKICBlbGlmIFtbICQxID1+IF5bLV0qcmEkIF1dIHx8IFtbICQxID1+IF5bLV0qcmVzdG9yZS1hbGwkIF1dIDsgdGhlbgogICAgaWYgW1sgLXogIiR3cHRfZGlzYWJsZWRfcGx1Z2lucyIgXV0gOyB0aGVuCiAgICAgIGVjaG8gIlRoZXJlIGlzIG5vdGhpbmcgc2F2ZWQgaW4gXCR3cHRfZGlzYWJsZWRfcGx1Z2lucyIKICAgICAgZWNobyAiQXJlIHlvdSBzdXJlIHlvdSBkaXNhYmxlZCBpdEZhaWxlZCB0byBnZXQgYSBsaXN0IG9mIHBsdWdpbnMuLi4gb3IgaXMgYWN0aXZlX3BsdWdpbnMgZW1wdHk/IgogICAgICBlY2hvICJOb3RoaW5nIHRoYXQgSSBjYW4gZG8uLi4gZXhpdGluZy4iCiAgICAgIHJldHVybiA5CiAgICBlbHNlCiAgICAgIHdwY29ubiAid3BwbHVncmVzdG9yZWFsbCIgJiYgZWNobyAiUmVzdG9yZWQgYWxsIHBsdWdpbnMiIHx8IGVjaG8gIkZhaWxlZCB0byByZXN0b3JlIHBsdWdpbnMiCiAgICAgIHJldHVybgogICAgZmkKICAgIAogIGVsaWYgW1sgJDEgPX4gXlstXSpkaXNhYmxlLWFsbC12aWEtZm9sZGVyJCBdXTsgdGhlbgogICAgaWYgW1sgISAtZCAkd3B0X3BsdWdpbnNfZm9sZGVyIF1dOyB0aGVuIAogICAgICBlY2hvICJUaGUgcGx1Z2lucyBmb2xkZXIgJHdwdF9wbHVnaW5zX2ZvbGRlciB3YXMgbm90IGZvdW5kIiEKICAgICAgZWNobyAiVHJ5IHNldHRpbmcgd3B0X3BsdWdpbnNfZm9sZGVyPXBhdGgvdG8vcGx1Z2lucyIKICAgICAgZWNobyAiQ3VycmVudGx5IGl0IGlzIHNldCB0bzogJHdwdF9wbHVnaW5zX2ZvbGRlciIKICAgICAgcmV0dXJuIDkKICAgIGZpCiAgICB0ZW1wPSQobm93KQogICAgbXYgJHdwdF9wbHVnaW5zX2ZvbGRlciAiJHdwdF9wbHVnaW5zX2ZvbGRlciJfJHRlbXAgJiYgZWNobyAiTW92ZWQgcGx1Z2lucyB0byAkd3B0X3BsdWdpbnNfZm9sZGVyIl8kdGVtcC4uLgogIAogIGVsaWYgW1sgJDEgPX4gXlstXSpkaXNhYmxlJCBdXSB8fCBbWyAkMSA9PSAiLWQiIF1dICYmIFtbIC1uICQyIF1dOyB0aGVuCiAgICBfX3dwdF9kaXNhYmxlX3BsdWdpbiAkMgogICAgCiAgZWxpZiBbWyAteiAkMSBdXTsgdGhlbgogICAgaWYgW1sgISAtZCAkd3B0X3BsdWdpbnNfZm9sZGVyIF1dOyB0aGVuIAogICAgICBlY2hvICJUaGUgcGx1Z2lucyBmb2xkZXIgJHdwdF9wbHVnaW5zX2ZvbGRlciB3YXMgbm90IGZvdW5kIiEKICAgICAgZWNobyAiVHJ5IHNldHRpbmcgd3B0X3BsdWdpbnNfZm9sZGVyPXBhdGgvdG8vcGx1Z2lucyIKICAgICAgZWNobyAiQ3VycmVudGx5IGl0IGlzIHNldCB0bzogJHdwdF9wbHVnaW5zX2ZvbGRlciIKICAgICAgcmV0dXJuIDkKICAgIGZpCiAgICBlY2hvIC1lICJBY3RpdmUgcGx1Z2luczpcbiIKICAgIHdwY29ubiAid3BwbHVnIgogICAgaWYgW1sgJG15Y29ubiA9PSAiRVJST1IiKiBdXTsgdGhlbiAKICAgICAgZWNobyAiVGhlcmUgd2FzIGEgZGF0YWJhc2UgZXJyb3I6ICRteWNvbm4iCiAgICAgIHJldHVybiA5CiAgICBmaQogICAgYWN0aXZlPSQoZWNobyAiJG15Y29ubiIgfCB0YWlsIC1uICsyKQogICAgI19fd3B0X3doaWNoX3Rvb2wgcGhwLWNsaSBwaHAKICAgICMkcGhwX2NsaT0kZm91bmRfdG9vbAogICAgX193cHRfZ2V0X3BocF9pbmxpbmUKICAgICR3cHRfcGhwIC1yICJwcmludF9yKHVuc2VyaWFsaXplKCckYWN0aXZlJykpOyIgMj4vZGV2L251bGwgfCBncmVwICI9PiIgfCBzZWQgInN8Lio9PiBcKC4qXCl8XHRcMXwiCiAgICBlY2hvCiAgICBlY2hvIC1lICJBdmFpbGFibGUgcGx1Z2luczpcbiIKICAgIGxzIC1GICR3cHRfcGx1Z2luc19mb2xkZXIgfGdyZXAgIi8ifGdyZXAgLXYgIl5cLiJ8c2VkICJzfF5cKC4qXCkvfFx0XDF8IiAjbHMgLUEgaXMgb3ZlcndyaXR0ZW4gYnkgZGVmYXVsdCAkTFNfT1BUSU9OUyBpbiBhbGlhcwogIGVsc2UKICAgIGVjaG8gIlVua25vd24gb3B0aW9uKHMpOiAkQCIKICAgIHdwcGx1ZyAtaAogIGZpCiAgZWNobwp9CgpmdW5jdGlvbiBfX3dwdF9kaXNhYmxlX3BsdWdpbigpIHsKICBwbHVnaW5fcmVtb3ZlPSQxCiAgIyB0YWtlIG9ubHkgdGhlIGZvbGRlciBpZiBhIHBhdGggd2FzIGdpdmVuCiAgIyBpZSAnYXV0b3B0aW1pemUnIHZzICdhdXRvcHRpbWl6ZS9hdXRvcHRpbWl6ZS5waHAnCiAgaWYgWyAtbiAiJChlY2hvICRwbHVnaW5fcmVtb3ZlIHwgZ3JlcCAnLycpIiBdIDsgdGhlbgogICAgI2VjaG8gIndhcm5pbmcsIGEgcGF0aCB3YXMgZ2l2ZW4gZm9yIHRoZSBwbHVnaW4gbmFtZS4uLiBmaXhpbmcuIgogICAgcGx1Z2luX3JlbW92ZT0iJChlY2hvICRwbHVnaW5fcmVtb3ZlIHwgY3V0IC1mMSAtZCcvJykiCiAgZmkKICBpZiBbWyAteiAkcGx1Z2luX3JlbW92ZSBdXSA7IHRoZW4KICAgIGVjaG8gIl9fd3B0X2Rpc2FibGVfcGx1Z2luOiBObyBwbHVnaW4gZ2l2ZW4iCiAgICByZXR1cm4gOQogIGZpCiAgd3Bjb25uICJ3cHBsdWciCiAgaWYgW1sgJG15Y29ubiA9PSAiRVJST1IiKiBdXTsgdGhlbiAKICAgICAgZWNobyAiVGhlcmUgd2FzIGEgZGF0YWJhc2UgZXJyb3I6ICRteWNvbm4iCiAgICAgIHJldHVybiA5CiAgZmkKICBhY3RpdmU9JChlY2hvICIkbXljb25uIiB8IHRhaWwgLW4gKzIpCiMgICAgcGhwIC1xIDw8IkVPRiIKIyAgICA8P3BocAojICAgICAgXCRwbHVnaW5fbGlzdD11bnNlcmlhbGl6ZSgnXCckYWN0aXZlJyk7CiMgICAgICBcJHJlbW92ZV9pbmRleCA9IGFycmF5X3NlYXJjaCgndGVzdCcsIFwkcGx1Z2luX2xpc3QpOwojICAgICAgdW5zZXQoXCRwbHVnaW5fbGlzdFtcJHJlbW92ZV9pbmRleF0pOwojICAgICAgcHJpbnRyKHNlcmlhbGl6ZShcJHBsdWdpbl9saXN0KSk7CiMgICAgPz4KI0VPRgogICNhY3RpdmVfbm9xdW90PSIkKGVjaG8gJGFjdGl2ZSB8IHNlZCAncy8iL1xcIi9nJykiCiAgI3BsdWdpbl9ub3F1b3Q9IiQoZWNobyAkMiB8IHNlZCAncy8iL1xcIi9nJykiCiAgI19fd3B0X3doaWNoX3Rvb2wgcGhwLWNsaSBwaHAKICAjJHBocF9jbGk9JGZvdW5kX3Rvb2wKICBfX3dwdF9nZXRfcGhwX2lubGluZQogIG5vd19hY3RpdmU9JCgkd3B0X3BocCAtciAiXCRwbHVnaW5fbGlzdD11bnNlcmlhbGl6ZSgnIiRhY3RpdmUiJyk7CiAgLy8gcmVtZW1iZXIgdGhhdCAkcGx1Z2luX3JlbW92ZSBpcyBub3QgZXNjYXBlZCwgYXMgd2UgYXJlIHN1YmluZyBpdCBpbgogIFwkcGx1Z2luX2xpc3Q9cHJlZ19ncmVwICggJy9eIiRwbHVnaW5fcmVtb3ZlIlwvLiovJyAsIFwkcGx1Z2luX2xpc3QsIFBSRUdfR1JFUF9JTlZFUlQpOwogIC8vIHRoZSBsb25nIHdheSwgYnV0IGtlcHQganVzdCBpbiBjYXNlCiAgLy8gIGZvcmVhY2ggKFwkcGx1Z2luX2xpc3QgYXMgXCRrID0+IFwkcCkgewogIC8vICAgIGlmICggcHJlZ19tYXRjaCgnLyIkcGx1Z2luX3JlbW92ZSJcLy4qLycsIFwkcCkgPT0gVFJVRSApIHsKICAvLyAgICAgIHVuc2V0KFwkcGx1Z2luX2xpc3RbXCRrXSk7CiAgLy8gICAgfQogIC8vICB9CiAgcHJpbnRfcihzZXJpYWxpemUoXCRwbHVnaW5fbGlzdCkpOyIpCiAgCiAgIyBjaGVjayBpdAogIGlmIFsgLXogJG5vd19hY3RpdmUgXSA7IHRoZW4KICAgIGVjaG8gIkZhaWxlZCB0byBwYXJzZSBwbHVnaW4gZGF0YSAoX193cHRfZGlzYWJsZV9wbHVnaW4pLiBOb3RoaW5nIGRvbmUuIgogICAgcmV0dXJuIDkKICBmaQogIGlmIFsgLW4gIiQoZWNobyAkbm93X2FjdGl2ZSB8IGdyZXAgIiRwbHVnaW5fcmVtb3ZlLyIpIiBdIDsgdGhlbgogICAgZWNobyAiV2FybmluZywgdGhlIHBsdWdpbiBtYXkgaGF2ZSBub3QgYmVlbiByZW1vdmVkIgogIGZpCiAgCiAgd3Bjb25uIHdwcGx1Z3NldCAkbm93X2FjdGl2ZQogIGlmIFtbICRteWNvbm4gPT0gIkVSUk9SIiogXV07IHRoZW4gCiAgICAgIGVjaG8gIlRoZXJlIHdhcyBhIGRhdGFiYXNlIGVycm9yOiAkbXljb25uIgogICAgICByZXR1cm4gOQogIGZpCiAgZWNobyAiU3VjY2Vzc2Z1bGx5IGRlYWN0aXZhdGVkICRwbHVnaW5fcmVtb3ZlIgp9CgojIFRoaXMgZnVuY3Rpb24gZGV0ZWN0cyBpZiB3ZSBzaG91bGQgdXNlIHBocC1jbGkgb3IgcGhwIGZvciB0aGUgLXIgYXJnCiMgKGFuZCBjbGVhciBvdXQgd3B0X3BocCB2YXIsIGluIGNhc2UgaXQgd2FzIHNldCB3cm9uZykKd3B0X3BocD0iIgpmdW5jdGlvbiBfX3dwdF9nZXRfcGhwX2lubGluZSgpIHsKICBbWyAtbiAiJHdwdF9waHAiIF1dICYmIHJldHVybgogICMgZGV0ZWN0IHdoaWNoIHBocCBjYW4gcnVuIHdpdGggLXIgKGlubGluZSkKICBwaHAtY2xpIC1yICJcJHRlc3Q9MTsgXCR0ZXN0Mj0yOyIgPi9kZXYvbnVsbCAyPiYxCiAgaWYgWyAkPyAtZXEgMCBdIDsgdGhlbgogICAgd3B0X3BocD0icGhwLWNsaSIKICBlbHNlCiAgICBwaHAgLXIgIlwkdGVzdD0xOyBcJHRlc3QyPTI7IgogICAgaWYgWyAkPyAtZXEgMCBdIDsgdGhlbgogICAgICB3cHRfcGhwPSJwaHAiCiAgICBlbHNlCiAgICAgIGVjaG8gIldhcm5pbmcsIEkgd2FzIHVuYWJsZSB0byBkZXRlY3Qgd2hpY2ggcGhwIGNhbiBydW4gd2l0aCAtciAoaW5saW5lKS4gU2V0dGluZyBpdCB0byAncGhwLWNsaScuIFNldCB3cHRfcGhwPSB0byBvdmVycmlkZSIKICAgICAgd3B0X3BocD0icGhwLWNsaSIKICAgIGZpCiAgZmkKfQoKZnVuY3Rpb24gX193cHRfZGlzYWJsZV9wbHVnaW5fbGFzdCgpIHsKZWNobyBub25lOwp9IAoKCmZ1bmN0aW9uIF9fd3B0X3doaWNoX3Rvb2woKSB7CiAgZmFsbGJhY2s9JDEKICBmb3VuZF90b29sPSIiCiAgZm9yIHRvb2wgaW4gJCogOyBkbwogICAgZm9yIGVhY2ggaW4gJChlY2hvICRQQVRIIHwgc2VkICdzLzovIC9nJykgOyBkbwogICAgICBpZiBbWyAkZm91bmRfdG9vbCA9PSAiIiBdXSA7IHRoZW4KICAgICAgICBpZiBbWyAtZiAiJGVhY2gvJHRvb2wiIF1dIHx8IFtbIC1MICIkZWFjaC8kdG9vbCIgXV0gOyB0aGVuCiAgICAgICAgICBmb3VuZF90b29sPSRlYWNoLyR0b29sCiAgICAgICAgZmkKICAgICAgZmkKICAgIGRvbmUKICBkb25lCiAgaWYgW1sgJGZvdW5kX3Rvb2wgPT0gIiIgXV0gOyB0aGVuCiAgICBmb3VuZF90b29sPSRmYWxsYmFjawogIGZpCn0KCgpmdW5jdGlvbiB3cHRlc3RzKCkgewogIGlmIFtbICQxID09ICItLWhlbHAiIHx8ICQxID09ICItaCIgXV07IHRoZW4KICAgIGVjaG8gLWUgIlRoaXMgdG9vbCBkb2VzIGJhc2ljIHRlc3RzIG9uIHRoZSBpbnN0YWxsLlxuIgogICAgZWNobyAtZSAiVXNhZ2U6XG4iCiAgICBlY2hvIC1lICJcdHdwdGVzdHMgW3BhcmFtIFtvcHRpb24gcGFyYW1dXVxuIgogICAgZWNobyAtZSAiXHRhbGxcblx0XHR0ZXN0cyBlYWNoIGl0ZW0gaW4gd3AtY29udGVudC9wbHVnaW5zIG9uIHRoZSBzZXJ2ZXJcbiIKICAgIGVjaG8gLWUgIlx0YWxsIC0tdXJsIFVSTFxuXHRcdHRlc3RzIEhUVFAgc3RhdHVzIGNvZGUgZm9yIGVhY2ggaXRlbSBpbiB3cC1jb250ZW50L3BsdWdpbnMgYXQgc3BlY2lmaWVkIHVybCBVUkxcbiIKICAgIHJldHVybgogIGVsaWYgW1sgISAtZiB3cC1jb25maWcucGhwIF1dOyB0aGVuIGVjaG8gQ291bGQgbm90IGZpbmQgd3AtY29uZmlnLnBocCEgJiYgcmV0dXJuIDkKICBmaQogIGlmIFtbICQyID09ICItLXVybCIgJiYgLW4gJDMgXV07IHRoZW4gc3RhdHVzPSQoY3VybCAtc0lMIC1vIC9kZXYvbnVsbCAtdyAiJXtodHRwX2NvZGV9XG4iICQzKQogIGVsc2Ugc3RhdHVzPSQocGhwIGluZGV4LnBocCA+L2Rldi9udWxsICYmIHBocCB3cC1hZG1pbi9pbmRleC5waHAgPi9kZXYvbnVsbDsgZWNobyAkPyk7IGZpCiAgW1sgJDEgPT0gIi1xIiBdXSAmJiBlY2hvICRzdGF0dXMgJiYgcmV0dXJuCiAgZWNobwogIFtbICRzdGF0dXMgIT0gIjI1NSIgJiYgJHN0YXR1cyAhPSAiNTAwIiBdXSAmJiBlY2hvIC1lICJObyBlcnJvcnMgZGV0ZWN0ZWQuLi4iIHx8IGVjaG8gLWUgIjUwMCBlcnJvciBvbiBwYWdlIiEKICBlY2hvCiAgW1sgLXogJDEgXV0gJiYgcmV0dXJuCiAgW1sgJDEgPT0gImFsbCIgXV0gJiYgZm9sZGVycz0id3AtY29udGVudC9wbHVnaW5zIiB8fCBmb2xkZXJzPSQoZWNobyAkMXxzZWQgInN8LyR8fGciKQogIHRlbXA9JChub3cpCiAgaWYgW1sgJDIgPT0gIi0tdXJsIiAmJiAtbiAkMyBdXTsgdGhlbiBlY2hvIC1lICIqKiogTk9URTogVGhpcyB0ZXN0IGRvZXNuJ3QgY29uZmlybSBpdGVtcyBhcmUgZnVsbHkgZnVuY3Rpb25hbDsgaXQgc2ltcGx5IGNoZWNrcyB0aGUgc3RhdHVzIGNvZGUgb24gJyQzJy4gRE8gTk9UIElOVEVSUlVQVCEgKioqXG4iCiAgZWxzZSBlY2hvIC1lICIqKiogTk9URTogVGhpcyB0ZXN0IGRvZXNuJ3QgY29uZmlybSBpdGVtcyBhcmUgZnVsbHkgZnVuY3Rpb25hbDsgaXQgc2ltcGx5IHRyaWVzIHRvIHJ1biBpbmRleC5waHAgYW5kIHdwLWFkbWluL2luZGV4LnBocCBpbiB0aGUgbG9jYWwgc2hlbGwuIERPIE5PVCBJTlRFUlJVUFQhICoqKlxuIjsgZmkKICB0ZW1wPSQobm93KQogIGZvciBmIGluICRmb2xkZXJzOyBkbwogICAgW1sgISAtZCAkZiBdXSAmJiBlY2hvICJUaGUgZm9sZGVyICckZicgd2FzIG5vdCBmb3VuZCIhICYmIGNvbnRpbnVlCiAgICBlY2hvICJUZXN0aW5nICRmLi4uIgogICAgbXYgJGYgIiRmIl8kdGVtcCAmJiBlY2hvICJNb3ZlZCAkZiB0byAkZiJfJHRlbXAuLi4KICAgIG1rZGlyICRmICYmIGVjaG8gIkNyZWF0ZWQgbmV3ICRmIGZvbGRlci4uLiIKICAgIHN0YXR1cz0kKHdwdGVzdHMgLXEgLS11cmwgJDMpOyBbWyAkc3RhdHVzID09ICIyNTUiIHx8ICRzdGF0dXMgPT0gIjUwMCIgXV0gJiYgZWNobyAiUmVuYW1pbmcgdGhlICRmIGZvbGRlciByZXN1bHRzIGluIGEgNTAwIGVycm9yLi4uZXJyb3JzIGJlbG93IE1BWSBiZSBzYWZlIHRvIGlnbm9yZSIhIHx8IGVjaG8gIlJlbmFtaW5nIHRoZSAkZiBmb2xkZXIgYXBwZWFycyB0byByZXN1bHQgaW4gbm8gZXJyb3IuLi4iCiAgICBmb3IgaSBpbiAiJGYiXyR0ZW1wLyo7IGRvCiAgICAgIFtbIC1mICRpIF1dICYmIGNvbnRpbnVlCiAgICAgIHBsdWdpbj0ke2kjIyovfQogICAgICBtdiAiJGYiXyR0ZW1wLyRwbHVnaW4gJGYgJiYgZWNobyAtZSAiXHRUZXN0aW5nICR7ZiU/fSAnJHBsdWdpbicuLi4iICQoCiAgICAgICAgc3RhdHVzPSQod3B0ZXN0cyAtcSAtLXVybCAkMykKICAgICAgICBpZiBbWyAkc3RhdHVzID09ICIyMDAiIHx8ICRzdGF0dXMgPT0gIjAiIF1dOyB0aGVuIGVjaG8gIk9LIgogICAgICAgIGVsaWYgW1sgJHN0YXR1cyA9PSAyNTUgXV07IHRoZW4gZWNobyAiNTAwIgogICAgICAgIGVsc2UgZWNobyAkc3RhdHVzOyBmaQogICAgICApICYmIG12ICRmLyRwbHVnaW4gIiRmIl8kdGVtcAogICAgZG9uZQogICAgbXYgIiRmIl8kdGVtcC8qICRmICYmIGVjaG8gIk1vdmVkICRmIGJhY2sgdG8gb3JpZ2luYWwgZm9sZGVyLi4uIiAmJiBybSAtcmYgIiRmIl8kdGVtcCAmJiBlY2hvICJSZW1vdmVkICRmIl8kdGVtcC4uLgogIGRvbmUKICBlY2hvCn0KCgpmdW5jdGlvbiBfX3dwX2NvbnRpbnVlX29yX2RvbmUoKSB7CiAgW1sgLW4gJDEgXV0gJiYgX19tc2c9IiQxIHRlc3QiIHx8IF9fbXNnPSJ0ZXN0cyIKICBpZiBbWyAtbiAkMiBdXSA7IHRoZW4KICAgIHJlYWQgLXAgIiQoZWNobyAkJ1xuXHQnKSQyICh5L04pPyAiIC1uIDEgLXIKICBlbHNlCiAgICByZWFkIC1wICIkKGVjaG8gJCdcblx0JylXb3VsZCB5b3UgbGlrZSB0byBbWV0gY29udGludWUgd2l0aCB0aGUgJHtfX21zZ30/ICh5L04pPyAiIC1uIDEgLXIKICBmaQogIGlmIFtbICEgJFJFUExZID1+IF5bWXldJCBdXTsgdGhlbgogICAgZWNobyAtZSAiXG5FeGl0aW5nLi4uIgogICAgcmV0dXJuIDAKICBmaQogIHJldHVybiAxCn0KCmZ1bmN0aW9uIHdwdHJhY2UoKSB7CiAgaWYgW1sgJDEgPT0gIi0taGVscCIgfHwgJDEgPT0gIi1oIiBdXTsgdGhlbgogICAgZWNobyAtZSAiVGhpcyB0b29sIHVzZXMgc3RyYWNlIHRvIHNob3cgd2hhdCBtYXkgYmUgY2F1c2luZyBhIHdzb2QuXG4iCiAgICBlY2hvIC1lICJVc2FnZTogd3B0cmFjZSBbW2Vycl18ZmlsZS5waHBdXG4iCiAgICBlY2hvIC1lICJcdFdpdGggbm8gb3B0aW9uc1xuXHRcdCBSdW4gZnVsbCB0cmFjZSBvbiBpbmRleC5waHBcbiIKICAgIGVjaG8gLWUgIlx0ZXJyXG5cdFx0IE9ubHkgc2hvdyB1c3VhbCBlcnJvcnNcbiIKICAgIGVjaG8gLWUgIlx0W2Vycl0gZmlsZS5waHBcblx0XHQgUnVuIHN0cmFjZSBvbiBmaWxlLnBocFxuIgogICAgcmV0dXJuCiAgZWxpZiBbWyAhIC1mIHdwLWNvbmZpZy5waHAgXV07IHRoZW4gZWNobyBDb3VsZCBub3QgZmluZCB3cC1jb25maWcucGhwISAmJiByZXR1cm4gOQogIGZpCiAgCiAgZmlsZT0iLi9pbmRleC5waHAiCiAgaWYgW1sgJCMgLWVxIDEgJiYgIiQxIiAhPSAiZXJyIiBdXSA7IHRoZW4KICAgIGlmIFtbIC1mICIkMSIgXV0gOyB0aGVuCiAgICAgIGZpbGU9IiQxIgogICAgZWxzZQogICAgICBlaGNvICJDb3VsZCBub3QgZmluZCAkMSIKICAgIGZpCiAgZWxpZiBbWyAkIyAtZXEgMiBdXSA7IHRoZW4KICAgIGlmIFtbIC1mICIkMiIgXV0gOyB0aGVuCiAgICAgIGZpbGU9JDIKICAgIGVsc2UKICAgICAgZWNobyAiQ291bGQgbm90IGZpbmQgJDIiCiAgICBmaQogIGZpCiAgCiAgaWYgW1sgIiQxIiA9PSAiZXJyIiBdXSA7IHRoZW4KICAgIHN0cmFjZSBwaHAgLWYgIiRmaWxlIiAyPiYxIHwgZWdyZXAgLWkgJyhObyBzdWNoIGZpbGUgb3IgZGlyZWN0b3J5fGVycm9yfHdhcm4pJwogIGVsc2UKICAgIHN0cmFjZSBwaHAgLWYgIiRmaWxlIgogIGZpCiAgCiAgZWNobyAtZSAiClx0RG9uZSB0cmFjaW5nICRmaWxlLgpcdFRoZSBhYm92ZSBvdXRwdXQgaXMgdG8gaGVscCBnaXZlIHlvdSBhbiAqaWRlYSogb2Ygd2hhdCBtYXkgYmUgaHVydGluZwpcdHRoZSBzaXRlLiBSZWFkIGl0IGZyb20gYm90dG9tIHRvIHRvcCwgYXMgdGhlIGVycm9ycyB0aGF0IGFyZSBzdG9wcGluZwpcdGl0IHVzdWFsbHkgYXJlIGF0IHRoZSBib3R0b20uIEtlZXAgaW4gbWluZCB0aGF0IGl0IGlzClx0bm9ybWFsIHRvIHNlZSBtYW55IGVycm9ycyBhYm92ZS4KClx0VHJ5IGxvb2tpbmcgZm9yIG1pc3NpbmcgdGhlbWUgb3IgcGx1Z2lucyBmaWxlcywgYnV0IG5vdGUgdGhhdCBjaGlsZCB0aGVtZXMKXHRhbHdheXMgYXJlIG1pc3NpbmcgZmlsZXMuXG4iCgp9CgoKZnVuY3Rpb24gd3BzY2FuKCkgewogIGlmIFtbIC16ICQxIHx8ICQxID09ICItLWhlbHAiIHx8ICQxID09ICItaCIgXV07IHRoZW4KICAgIGlmIFtbICQyID09ICJzdHJpbmdzIiBdXSA7IHRoZW4KICAgICAgIyB3cHNjYW4gLWggc3RyaW5ncwogICAgICBlY2hvIC1lICJ3cHNjYW4gdXNlcyBzdHJpbmdzIHRvIGZpbmQgYmFkIGZpbGVzLCB3aGljaCBpdCBsb2FkcyBieSBkZWZhdWx0LgpVc2FnZTogd3BzY2FuIFtzaG93LXN0cmluZ3N8ZGVmYXVsdC1zdHJpbmdzfGFkZC1zdHJpbmdzfGNsZWFyLXN0cmluZ3NdCgpcdHNob3ctc3RyaW5ncwpcdFx0U2hvdyBhIGxpc3Qgb2YgdGhlIHNjYW4gc3RyaW5ncyB0aGF0IGFyZSBjdXJyZW50bHkgbG9hZGVkLgoKXHRkZWZhdWx0LXN0cmluZ3MgW2RldmVsfGFscGhhXQpcdFx0T3B0aW9uYWwgbWV0aG9kIHRvIHNldCB0aGUgc3RyaW5ncyBiYWNrIHRvIHRoZSBkZWZhdWx0IGxpc3QuClx0XHRPcHRpb25hbGx5IHNwZWNpZnkgZGV2ZWwgb3IgYWxwaGEgdG8gdXNlIG5ld2VyKD8pIHN0cmluZyBsaXN0cy4KClx0WW91IG1heSBhbHNvIG92ZXJyaWRlIHRoZSBzdHJpbmdzIHdpdGggeW91ciBvd24gc2V0KHMpLgoKXHRleHRyYV9zdHJpbmdzPSdzdHJpbmcxXFxcbnN0cmluZzJcXFxuc3RyaW5nMycKXHRcdEluY2x1ZGUgeW91ciBvd24gc3RyaW5ncyBpbiB0aGUgc2NhbiBieSBzZXR0aW5nIHRoZW0gdG8gdGhlIApcdFx0XCRleHRyYV9zdHJpbmdzIHZhcmlhYmxlLiBVc2UgJyBhbmQgc2VwYXJhdGUgZWFjaCB3aXRoIGEgJ1xcXG4nCgpcdGFkZC1zdHJpbmdzIGh0dHAocyk6Ly9kb21haW4uY29tL3N0cmluZ3NmaWxlClx0XHRMb2FkIHlvdXIgb3duIHN0cmluZ3MgZnJvbSBhIGZpbGUgYXQgdGhlIGdpdmVuIGFkZHJlc3MuIApcdFx0RGVmYXVsdCBzdHJpbmdzIGFyZSBub3QgYmUgYWRkZWQgaWYgeW91IGRvIHRoaXMgZmlyc3QuCgpcdGNsZWFyLXN0cmluZ3MKXHRcdENsZWFyIG91dCBhbGwgc2NhbiBzdHJpbmdzIgogICAgICAKICAgICAgcmV0dXJuCiAgICBlbHNlCiAgICAgICMgd3BzY2FuIC1oCiAgICAgIGVjaG8gLWUgIlRoaXMgdG9vbCBzY2FucyBmb3Igc3RyaW5ncyB0aGF0IGFyZSBpbiB0eXBpY2FsIG1hbHdhcmUuXG4KVXNhZ2U6IHdwc2NhbiBbcXVpY2t8ZnVsbF1cblx0XHRcbgpcdHF1aWNrClx0XHQgU2NhbnMgdGhlIGNvcmUgZmlsZXMsIHBsdWdpbnMsIGFuZCB0aGVtZXMuXG4KXHRmdWxsClx0XHQgU2NhbnMgYWxsIGZpbGVzIGluIHRoZSBjdXJyZW50IGRpcmVjdG9yeSBhbmQgZG93bi5cbgpcdFtxdWlja3xmdWxsfHJxdWlja10gcXVpZXQKXHRcdCBPbmx5IHNob3cgdGhlIGFjdHVhbCBwaHJhc2UgbWF0Y2hlZC4gTm90IHRoZSB3aG9sZSBsaW5lLlxuCgpcdFlvdSBjYW4gdXNlIHlvdXIgb3duIGxpc3Qgb2Ygc3RyaW5ncyB0byBzZWFyY2ggZm9yLgpcdFNlZSAnd3BzY2FuIC1oIHN0cmluZ3MnIGZvciBpbnN0cnVjdGlvbnMgb24gaG93IHRvIGRvIHNvLgoKXHROb3RlISBTY2FubmluZyBjYW4gdGFrZSBhIGh1Z2UgYW1vdW50IG9mIGNwdSBhbmQgZGlzayBkcml2ZS4KXHRJZiB5b3UgYWJ1c2UgeW91ciBwcm92aWRlcidzIHJlc291cmNlcywgdGhleSBtYXkgc2h1dCB5b3UgZG93bi4iCiAgICAgIGVjaG8KICAgICAgcmV0dXJuCiAgICBmaQogIGZpCiAgCiAgIyBtYW5hZ2Ugc3RyaW5nIGxpc3QKICAjIHNob3cgc3RyaW5ncwogIGlmIFtbICQxID09ICJzaG93LXN0cmluZ3MiIF1dIDsgdGhlbgogICAgX193cHNjYW5fc2hvd19zdHJpbmdzCiAgICByZXR1cm4KICAKICAjIGNsZWFyIHN0cmluZ3MgIAogIGVsaWYgW1sgJDEgPT0gImNsZWFyLXN0cmluZ3MiIF1dIDsgdGhlbgogICAgc2Nhbl9zdHJpbmdzPSIiCiAgICBlY2hvICJTY2FuIHN0cmluZ3MgY2xlYXJlZDoiCiAgICBfX3dwc2Nhbl9zaG93X3N0cmluZ3MKICAgIHJldHVybgogICAgCiAgIyBhZGQgc3RyaW5ncwogIGVsaWYgW1sgJDEgPT0gImFkZC1zdHJpbmdzIiBdXSA7IHRoZW4KICAgIGlmIFtbIC16ICQyIF1dIDsgdGhlbgogICAgICBlY2hvICJObyB1cmwgd2FzIHNwZWNpZmllZCIKICAgICAgcmV0dXJuIDkKICAgIGZpCiAgICBfX3dwc2Nhbl9nZXRfc3RyaW5ncyAkMiB8fCByZXR1cm4gOQogICAgIyB3ZSBhZGQgaXQgZGlmZmVyZW50bHkgaWYgdGhlcmUncyBhbHJlYWR5IGRhdGEgaW4gaXQKICAgIGlmIFtbIC1uICRzY2FuX3N0cmluZ3MgXV0gOyB0aGVuCiAgICAgIHNjYW5fc3RyaW5ncz0iJChlY2hvIC1lICIkc2Nhbl9zdHJpbmdzXG4kZ2V0X3N0cmluZ3MiKSIKICAgIGVsc2UKICAgICAgc2Nhbl9zdHJpbmdzPSIkKGVjaG8gLWUgIiRnZXRfc3RyaW5ncyIpIgogICAgZmkKICAgIF9fd3BzY2FuX3Nob3dfc3RyaW5ncwogICAgZWNobyAiU3RyaW5ncyBzdWNjZXNzZnVsbHkgYWRkZWQiCiAgICByZXR1cm4KICAgIAogICMgZGVmYXVsdCBzdHJpbmdzCiAgZWxpZiBbWyAkMSA9PSAiZGVmYXVsdC1zdHJpbmdzIiBdXSA7IHRoZW4KICAgIF9fd3BzY2FuX2dldF9zdHJpbmdzICQyIHx8IHJldHVybiA5CiAgICBzY2FuX3N0cmluZ3M9JGdldF9zdHJpbmdzCiAgICBlY2hvICJEZWZhdWx0IHNjYW4gc3RyaW5ncyBsb2FkZWQiCiAgICAjIF9fd3BzY2FuX3Nob3dfc3RyaW5ncwogICAgIyBlY2hvICJEZWZhdWx0IHNjYW4gc3RyaW5ncyBsb2FkZWQiCiAgICByZXR1cm4KICAgIAogICMgaWYgdGhpcyBpcyBhIHNjYW4gYW5kIHRoZSBzY2FuIHN0cmluZyBpcyBlbXB0eSwgbG9hZCBpdC4KICBlbGlmIFtbICQxID09ICJmdWxsIiB8fCAkMSA9PSAicXVpY2siIHx8ICQxID09ICJwaWNzIiBdXSB8fCBcCiAgICBbWyAkMSA9PSAicnF1aWNrIiBdXSB8fCBbWyAkMSA9PSAicXVpY2thbGwiIF1dIDsgdGhlbgogICAgaWYgW1sgLXogJHNjYW5fc3RyaW5ncyBdXSA7IHRoZW4KICAgICAgX193cHNjYW5fZ2V0X3N0cmluZ3MgJDIgfHwgcmV0dXJuIDkKICAgICAgc2Nhbl9zdHJpbmdzPSRnZXRfc3RyaW5ncwogICAgICBbWyAkMiAhPSAic2NyaXB0IiBdXSAmJiBlY2hvICJEZWZhdWx0IHNjYW4gc3RyaW5ncyBsb2FkZWQiCiAgICBmaQogICAgCiAgZWxzZQogICAgZWNobyAiVW5rbm93biBvcHRpb24uIFRyeSAnd3BzY2FuIC1oJyIKICAgIHJldHVybiA5CiAgZmkKICAKICAjIGFkZCBleHRyYSBzdHJpbmdzIGlmIHZhcmlhYmxlIGlzIHNldAogIGlmIFtbIC1uICIkZXh0cmFfc3RyaW5ncyIgXV0gOyB0aGVuCiAgICBbWyAkMiAhPSAic2NyaXB0IiBdXSAmJiBlY2hvICJUaGUgdmFyaWFibGUgXCRleHRyYV9zdHJpbmdzIGlzIHNldC4gQWRkaW5nIHN0cmluZ3MuLi4iCiAgICBzY2FuX3N0cmluZ3M9IiQoZWNobyAtZSAiJHNjYW5fc3RyaW5nc1xuJGV4dHJhX3N0cmluZ3MiKSIKICAgIGV4dHJhX3N0cmluZ3M9IiIKICBmaQogIAogICMgdmVyaWZ5IHdlIGdvdCAkc2Nhbl9zdHJpbmdzCiAgaWYgW1sgLXogJHNjYW5fc3RyaW5ncyBdXSA7IHRoZW4KICAgIGVjaG8gIk5vIHNjYW4gc3RyaW5ncyB3ZXJlIG5vdCBsb2FkZWQuIEkgY2FuJ3QgY29udGludWUgd2l0aG91dCB0aGVtIgogICAgcmV0dXJuIDkKICBmaQogICNfX3dwc2Nhbl9zaG93X3N0cmluZ3MKICAKICBbWyAkMiAhPSAic2NyaXB0IiBdXSAmJiBlY2hvIC1lICIKXHROb3RlISBTY2FubmluZyBjYW4gdGFrZSBhIGh1Z2UgYW1vdW50IG9mIGNwdSBhbmQgZGlzayBkcml2ZS4KXHRJZiB5b3UgYWJ1c2UgeW91ciBwcm92aWRlcidzIHJlc291cmNlcywgdGhleSBtYXkgc2h1dCB5b3UgZG93bi4KXHRTY2FubmluZyBmb3IgbWFsd2FyZSBpcyBhbiBhZHZhbmNlZCB0b3BpYyBhbmQgcmVxdWlyZXMgdGhhdApcdHlvdSBrbm93IHBocCBjb2RlLCBhbmQgd2hhdCBpcyBnb29kIGNvZGUgYW5kIHdoYXQgaXMgYmFkIGNvZGUuClx0U28gUExFQVNFIHJlYWxpemUgdGhhdCB5b3UgbWF5IGJlIHByZXNlbnRlZCB3aXRoIGZpbGVzIHRoYXQKXHRhcmUgbm90IGFjdHVhbGx5IGhhY2tlZCwgb3IganVzdCBuZWVkIHRvIGJlIGNsZWFuZWQuIApcdCAgU28gZWl0aGVyIGtub3cgd2hhdCB5b3UgYXJlIGRvaW5nLCBvciBnbyBidXkgYSBwcm9kdWN0LlxuIgoKIyAgcmVhZCAtcCAiJChlY2hvICQnXHQnKURvIHlvdSB1bmRlcnN0YW5kIHdoYXQgeW91IGFyZSBkb2luZyBhbmQgd2FudCB0byBwcm9jZWVkPyAoTi95KT8gIiAtbiAxIC1yCiMgIGlmIFtbICEgJFJFUExZID1+IF5bWXldJCBdXTsgdGhlbgojICAgIGVjaG8gLWUgIlxuRXhpdGluZy4uLiIKIyAgICByZXR1cm4KIyAgZmkKICAKICBxdWlldD0nJwogIGlmIFtbICIkMiIgPT0gInF1aWV0IiBdXSA7IHRoZW4KICAgIHF1aWV0PSdvJwogIGZpCiAgCiAgaWYgW1sgJDEgPT0gInF1aWNrIiBdXSA7IHRoZW4KICAgIFtbICQyICE9ICJzY3JpcHQiIF1dICYmIGVjaG8gLWUgIlxuXG5cdFN0YXJ0aW5nIHF1aWNrc2Nhbi4uLlxuIgogICAgaWYgW1sgJHF1aWV0ID09ICdvJyBdXSA7IHRoZW4KICAgICAgTENfQUxMPUMgZmdyZXAgLUYgLWlsciRxdWlldCAtLWluY2x1ZGUgIFwqLnBocFwqICIkc2Nhbl9zdHJpbmdzIiAqLnBocCBcCiAgICAgICAgLi93cC1hZG1pbiAuL3dwLWNvbnRlbnQgLi93cC1pbmNsdWRlcwogICAgZWxzZQogICAgICBMQ19BTEw9QyBmZ3JlcCAtRiAtaXIkcXVpZXQgLS1jb2xvcj1hbHdheXMgLS1pbmNsdWRlICBcKi5waHBcKiAiJHNjYW5fc3RyaW5ncyIgKi5waHAgXAogICAgICAgIC4vd3AtYWRtaW4gLi93cC1jb250ZW50IC4vd3AtaW5jbHVkZXMgIHwgY3V0IC1jMS0yMDAKICAgIGZpCiAgCiAgZWxpZiBbWyAkMSA9PSAicnF1aWNrIiBdXSB8fCBbWyAkMSA9PSAicXVpY2thbGwiIF1dIDsgdGhlbgogICAgW1sgJDIgIT0gInNjcmlwdCIgXV0gJiYgZWNobyAtZSAiXG5cblx0U3RhcnRpbmcgcmVjdXJzaXZlIHF1aWNrc2Nhbi4uLlxuIgogICAgaWYgW1sgJHF1aWV0ID09ICdvJyBdXSA7IHRoZW4KICAgICAgTENfQUxMPUMgZmdyZXAgLUYgLWlsciRxdWlldCAtLWluY2x1ZGUgIFwqLnBocFwqICIkc2Nhbl9zdHJpbmdzIiBcCiAgICAgICAgKi5waHAqIC4vd3AtYWRtaW4gLi93cC1jb250ZW50IC4vd3AtaW5jbHVkZXMgXAogICAgICAgICovKi5waHAqIC4vKi93cC1hZG1pbiAuLyovd3AtY29udGVudCAuLyovd3AtaW5jbHVkZXMgXAogICAgICAgICovKi8qLnBocCogLi8qLyovd3AtYWRtaW4gLi8qLyovd3AtY29udGVudCAuLyovKi93cC1pbmNsdWRlcyBcCiAgICAgICAgKi8qLyovKi5waHAqIC4vKi8qLyovd3AtYWRtaW4gLi8qLyovKi93cC1jb250ZW50IC4vKi8qLyovd3AtaW5jbHVkZXMgMj4vZGV2L251bGwKICAgIGVsc2UKICAgICAgTENfQUxMPUMgZmdyZXAgLUYgLWlyJHF1aWV0IC0tY29sb3I9YWx3YXlzIC0taW5jbHVkZSAgXCoucGhwXCogIiRzY2FuX3N0cmluZ3MiIFwKICAgICAgICAqLnBocCogLi93cC1hZG1pbiAuL3dwLWNvbnRlbnQgLi93cC1pbmNsdWRlcyBcCiAgICAgICAgKi8qLnBocCogLi8qL3dwLWFkbWluIC4vKi93cC1jb250ZW50IC4vKi93cC1pbmNsdWRlcyBcCiAgICAgICAgKi8qLyoucGhwKiAuLyovKi93cC1hZG1pbiAuLyovKi93cC1jb250ZW50IC4vKi8qL3dwLWluY2x1ZGVzIFwKICAgICAgICAqLyovKi8qLnBocCogLi8qLyovKi93cC1hZG1pbiAuLyovKi8qL3dwLWNvbnRlbnQgLi8qLyovKi93cC1pbmNsdWRlcyAyPi9kZXYvbnVsbCB8IGN1dCAtYzEtMjAwCiAgICBmaSAgCiAgCiAgZWxpZiBbWyAkMSA9PSAiZnVsbCIgXV0gOyB0aGVuCiAgICBlY2hvIC1lICJcblxuXHRTdGFydGluZyBmdWxsIHNjYW4uLi5cbiIKICAgIGlmIFtbICRxdWlldCA9PSAnbycgXV0gOyB0aGVuCiAgICAgIExDX0FMTD1DIGZncmVwIC1GIC1pbHIkcXVpZXQgIiRzY2FuX3N0cmluZ3MiIC4vCiAgICBlbHNlCiAgICAgIExDX0FMTD1DIGZncmVwIC1GIC1pciRxdWlldCAtLWNvbG9yPWFsd2F5cyAiJHNjYW5fc3RyaW5ncyIgLi8gIHwgY3V0IC1jMS0yMDAKICAgIGZpCiAgICAjTENfQUxMPUMgZ3JlcCAtYSAtRiAtbiAtciAtZiAuL3NlYXJjaC1zdHJpbmdzLnR4dCAuLyB8IGN1dCAtYzEtMjAwCiAgCiAgZWxpZiBbWyAkMSA9PSAicGljcyIgXV0gOyB0aGVuCiAgICBlY2hvIC1lICJcblxuXHRTdGFydGluZyBwaWN0dXJlIHNjYW4uLi5cbiIKICAgIGlmIFtbICRxdWlldCA9PSAnbycgXV0gOyB0aGVuCiAgICAgIExDX0FMTD1DIGZncmVwIC1GIC1pbHIkcXVpZXQgLS1pbmNsdWRlICIqLmpwZyIgLS1pbmNsdWRlICIqLmpwZWciIFwKICAgICAgICAgIC0taW5jbHVkZSAiKi5wbmciIC0taW5jbHVkZSAiKi5ibXAiIC0taW5jbHVkZSAiKi5naWYiICc8P3BocCcgLi8KICAgIGVsc2UKICAgICAgTENfQUxMPUMgZmdyZXAgLUYgLWlyJHF1aWV0IC0tY29sb3I9YWx3YXlzICAtLWluY2x1ZGUgIiouanBnIiAtLWluY2x1ZGUgIiouanBlZyIgXAogICAgICAgICAgLS1pbmNsdWRlICIqLnBuZyIgLS1pbmNsdWRlICIqLmJtcCIgLS1pbmNsdWRlICIqLmdpZiIgJzw/cGhwJyAuLyB8IGN1dCAtYzEtMjAwCiAgICBmaQogICAgCiAgZWxzZQogICAgZWNobyAiSW52YWxpZCBvcHRpb24uIFRyeSAnd3BzY2FuIC1oJyIKICBmaQogIAogICMgY2hlY2sgZm9yIGFuIGluZGV4Lmh0bWwgd2l0aCB0aGUgd29yZCAiaGFja2VkIiBpbiBpdAogIGZvciBlYWNoIGluIGluZGV4Lmh0bWwgaW5kZXgucGhwIGxuZGV4LnBocCA7IGRvCiAgICBpZiBbWyAtZiAiJGVhY2giIF1dIDsgdGhlbgogICAgICBpZiBbWyAtbiAiJChlZ3JlcCAtaSAnKGhhY2tlZHxoQGNrZWR8cHduZWQpJyAkZWFjaCkiIF1dIDsgdGhlbgogICAgICAgIGVjaG8KICAgICAgICBlY2hvICIqIFdhcm5pbmc6IFRoZXJlIGlzIGFuICRlYWNoIGZpbGUgd2l0aCB0aGUgd29yZChzKSAnaGFja2VkL2hAY2tlZC9wd25lZCcgaW4gaXQuIEFkdmlzZSB5b3UgY2hlY2sgaXQgb3V0IgogICAgICAgIGVjaG8KICAgICAgZmkKICAgIGZpCiAgZG9uZQogIAogICMgY2hlY2sgZm9yIGFueSBwaHAgZmlsZXMgaW4gdXBsb2FkcwogIGlmIFtbIC1uICIkKGZpbmQgd3AtY29udGVudC91cGxvYWRzL3sxLDIsM30qIC1uYW1lICcqLnBocCcgMj4vZGV2L251bGwpIiBdXSA7IHRoZW4KICAgIGVjaG8KICAgIGVjaG8gIlRoZXJlIGFyZSBwaHAgZmlsZXMgaW4gdGhlIHVwbG9hZHMgZm9sZGVyLiBZb3Ugc2hvdWxkIGludmVzdGlnYXRlIHRoaXM6IgogICAgZWNobwogICAgZmluZCB3cC1jb250ZW50L3VwbG9hZHMvezEsMiwzfSogLW5hbWUgJyoucGhwJyAyPi9kZXYvbnVsbAogIGZpCiAgCiAgW1sgJDIgIT0gInNjcmlwdCIgXV0gJiYgZWNobyAtZSAiXG5TY2FuIEZpbmlzaGVkLiIKfQoKZnVuY3Rpb24gX193cHNjYW5fc2hvd19zdHJpbmdzKCkgewogIGVjaG8gLWUgIlxuPT09PSBVc2luZyB0aGUgZm9sbG93aW5nIGZvciBzY2FuIHN0cmluZ3M6XG4kc2Nhbl9zdHJpbmdzXG49PT09IEVuZCBzY2FuIHN0cmluZ3NcbiIKfQoKZnVuY3Rpb24gX193cHNjYW5fZ2V0X3N0cmluZ3MoKSB7CiAgaWYgW1sgLXogJDEgXV0gfHwgW1sgJDEgPT0gInNjcmlwdCIgXV0gOyB0aGVuCiAgICBbWyAkMSAhPSAic2NyaXB0IiBdXSAmJiBlY2hvICJEb3dubG9hZGluZyB0aGUgZGVmYXVsdCBzdHJpbmdzLi4uIgogICAgZ2V0X3N0cmluZ3M9IiQoY3VybCAtU3NmIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9iYWdsZXkvd3B0b29sL21hc3Rlci9zY2Fuc3RyaW5ncykiCiAgCiAgZWxpZiBbWyAkMSA9PSAiZGV2ZWwiIF1dIDsgdGhlbgogICAgZWNobyAiRG93bmxvYWRpbmcgdGhlIGRldmVsIHN0cmluZ3MuLi4iCiAgICBnZXRfc3RyaW5ncz0iJChjdXJsIC1Tc2YgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2JhZ2xleS93cHRvb2wvZGV2ZWwvc2NhbnN0cmluZ3MpIgogICAgCiAgZWxpZiBbWyAkMSA9PSAiYWxwaGEiIF1dIDsgdGhlbgogICAgZWNobyAiRG93bmxvYWRpbmcgdGhlIGFscGhhIHN0cmluZ3MuLi4iCiAgICBnZXRfc3RyaW5ncz0iJChjdXJsIC1Tc2YgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2JhZ2xleS93cHRvb2wvYWxwaGEvc2NhbnN0cmluZ3MpIgoKICBlbHNlCiAgICBlY2hvICJEb3dubG9hZGluZyBzdHJpbmdzIGZyb20gJDEiCiAgICBnZXRfc3RyaW5ncz0iJChjdXJsIC1Tc2YgJDEpIgogIGZpCiAgaWYgW1sgLXogJGdldF9zdHJpbmdzIF1dIDsgdGhlbgogICAgZWNobyAiRmFpbGVkIHRvIGdldCBzY2FuIHN0cmluZ3MiCiAgICBlY2hvICJXZSBkaWRuJ3QgZ2V0IGFueSBvdXRwdXQsIHdoaWNoIG1lYW5zIHRoZXJlIHdhcyBhbiBlcnJvci4iCiAgICByZXR1cm4gOQogICAgCiAgZWxpZiBbWyAkZ2V0X3N0cmluZ3MgPT0gIk5vdCBGb3VuZCIgXV0gOyB0aGVuCiAgICBlY2hvICJGaWxlIHdhcyBub3QgZm91bmQiCiAgICByZXR1cm4gOQogIAogIGZpCn0KCgpmdW5jdGlvbiB3cGJhY2t1cCgpIHsKICBpZiBbWyAteiAkMSB8fCAkMSA9PSAiLS1oZWxwIiB8fCAkMSA9PSAiLWgiIF1dOyB0aGVuCiAgICBlY2hvIC1lICJUaGlzIHRvb2wgY3JlYXRlcyBhIGJhY2t1cCBvZiB0aGUgZGF0YWJhc2VzIGFuZC9vciB3cC1jb250ZW50IGZvbGRlcnNcbiIKICAgIGVjaG8gLWUgIlVzYWdlOlxuIgogICAgZWNobyAtZSAiXHR3cGJhY2t1cCBbZmlsZXN8ZGJ8YWxsXVxuIgogICAgZWNobyAtZSAiXHR3cGJhY2t1cFxuXHRcdCBTaG93cyBoZWxwLCBpbiBjYXNlIG5iIHJ1bnMgb24gNTAwRyBkYiB3L28gcmVhZGluZyBmaXJzdC5cbiIKICAgIGVjaG8gLWUgIlx0d3BiYWNrdXAgZmlsZXNcblx0XHQgTWFrZXMgYSBiYWNrdXAgb2YgZmlsZXMuXG4iCiAgICBlY2hvIC1lICJcdHdwYmFja3VwIGRifGRhdGFiYXNlXG5cdFx0IE1ha2VzIGEgYmFja3VwIG9mIHRoZSBkYXRhYmFzZS5cbiIKICAgIGVjaG8gLWUgIlx0d3BiYWNrdXAgYWxsXG5cdFx0IE1ha2VzIGEgYmFja3VwIG9mIGRhdGFiYXNlIGFuZCBmaWxlcy5cbiIKICAgIGVjaG8KICAgIHJldHVybgogIGVsaWYgW1sgISAtZiB3cC1jb25maWcucGhwIF1dOyB0aGVuIGVjaG8gQ291bGQgbm90IGZpbmQgd3AtY29uZmlnLnBocCEgJiYgcmV0dXJuIDkKICBmaQogIAogIGlmIFtbICIkMSIgPT0gImRiIiB8fCAiJDEiID09ICJkYXRhYmFzZSIgXV0gOyB0aGVuCiAgICAjIGRvIGRhdGFiYXNlCiAgICBpZiBbWyAkMiAhPSAnLXEnIF1dIDsgdGhlbgogICAgICBlY2hvCiAgICAgIHdwZGIgLXMgLXEKICAgICAgZWNobwogICAgZmkKICAgIHdwY29ubiB3cGRiZXhwb3J0Z3oKICBlbGlmIFtbICIkMSIgPT0gImZpbGVzIiBdXSA7IHRoZW4KICAgICMgZmlsZXMKICAgIF9fd3BfYmFja3VwX2ZpbGVzCiAgZWxpZiBbWyAiJDEiID09ICJhbGwiIF1dIDsgdGhlbgogICAgIyBkYiBhbmQgZmlsZXMKICAgIGlmIFtbICQyICE9ICctcScgXV0gOyB0aGVuCiAgICAgIGVjaG8KICAgICAgd3BkYiAtcyAtcQogICAgICBlY2hvCiAgICBmaQogICAgd3Bjb25uIHdwZGJleHBvcnRnegogICAgX193cF9iYWNrdXBfZmlsZXMKICBmaQp9CgpmdW5jdGlvbiBfX3dwX3JhbmRfc3RyaW5nKCkgewogIGxlbmd0aD0yMAogIFtbIC1uICIkMSIgXV0gJiYgbGVuZ3RoPSQxCiAgd3BfcmFuZF9zdHJpbmc9IiQodHIgLWRjIEEtWmEtejAtOV8gPCAvZGV2L3VyYW5kb20gfCBoZWFkIC1jICRsZW5ndGggfCB4YXJncykiCiAgIyBkb3VibGUgY2hlY2sKICAKICBpZiBbWyAteiAiJHdwX3JhbmRfc3RyaW5nIiB8fCAkeyN3cF9yYW5kX3N0cmluZ30gLWx0ICRsZW5ndGggXV0gOyB0aGVuCiAgICB3cF9yYW5kX3N0cmluZz0iJChjYXQgL2Rldi91cmFuZG9tIHwgYmFzZTY0IC13IDAgfCBoZWFkIC1jJGxlbmd0aCB8IHNlZCAncy9bXC9cK1xzIFxuXHJdL18vZycpIgogIGZpCiAgCiAgaWYgW1sgLXogIiR3cF9yYW5kX3N0cmluZyIgfHwgJHsjd3BfcmFuZF9zdHJpbmd9IC1sdCAkbGVuZ3RoIF1dIDsgdGhlbgogICAgeD0wCiAgICB3aGlsZSBbWyAkeyN3cF9yYW5kX3N0cmluZ30gLWx0ICRsZW5ndGggJiYgJHggLWx0ICRsZW5ndGggXV0gOyBkbwogICAgICB3cF9yYW5kX3N0cmluZz0iJHdwX3JhbmRfc3RyaW5nJFJBTkRPTSIKICAgICAgeD0kKCgkeCArIDEpKQogICAgZG9uZQogIGZpCiAgCiAgaWYgW1sgLXogIiR3cF9yYW5kX3N0cmluZyIgfHwgJHsjd3BfcmFuZF9zdHJpbmd9IC1sdCAkbGVuZ3RoIF1dIDsgdGhlbgogICAgZWNobyAiV2FybmluZy4gRmFpbGVkIHRvIGdldCBhIHJhbmRvbSBzdHJpbmcuIEhlcmUncyBzb21lIG5hbm9zZWNvbmRzLiIKICAgIHdwX3JhbmRfc3RyaW5nPSIkKG5vdyktJChkYXRlICslTikiCiAgICByZXR1cm4gOQogIGZpCn0KCmZ1bmN0aW9uIF9fd3BfYmFja3VwX2ZpbGVzKCkgewogIF9fd3BfcmFuZF9zdHJpbmcKICBlY2hvICJDb21wcmVzc2luZyBmaWxlcy4uLiIKICBmaWxlPSJ3cC1jb250ZW50LWJhY2t1cC0kKG5vdyktJHdwX3JhbmRfc3RyaW5nLnRhci5neiIKICB0YXIgY3pmICIkZmlsZSIgd3AtY29udGVudCB3cC1jb25maWcucGhwCiAgaWYgWyAkPyAtZXEgMCBdIDsgdGhlbgogICAgZWNobyAiRG9uZS4gU2F2ZWQgZmlsZXMgdG8gJGZpbGUiCiAgZWxzZQogICAgZWNobyAiRmFpbGVkIHRvIHNhdmUgZmlsZXMiCiAgICBybSAtZiAiJGZpbGUiCiAgZmkKfQoKZnVuY3Rpb24gd3ByZXN0b3JlKCkgeyAgCiAgaWYgW1sgLXogJDEgfHwgJDEgPT0gIi0taGVscCIgfHwgJDEgPT0gIi1oIiBdXTsgdGhlbgogICAgZWNobyAtZSAiVGhpcyB0b29sIHJlc3RvcmVzIHRoZSBkYXRhYmFzZSBmcm9tIGEgYmFja3VwIGZpbGUuIEl0IHJlcXVpcmVzIHRoYXQgd3AtY29uZmlnLnBocCBiZSBpbnN0YWxsZWQgd2l0aCB0aGUgY29ycmVjdCBjcmVkZW50YWlscy5cbiIKICAgIGVjaG8gLWUgIlVzYWdlOlxuIgogICAgZWNobyAtZSAiXHR3cHJlc3RvcmUgZGIgPGZpbGU+XG5cdFx0IFJlc3RvcmVzIGZyb20gYSByZWd1bGFyIC5zcWwvLnNxbC5neiBmaWxlLlxuIgogICAgZWNobyAtZSAiXHR3cHJlc3RvcmUgZm9yY2VkYiA8ZmlsZT5cblx0XHQgUmVzdG9yZXMgZnJvbSBhIHNxbCBmaWxlIHcvbyBjaGVja2luZyBpdCdzIHR5cGUuXG4iCiAgICBlY2hvIC1lICJcdHdwcmVzdG9yZSBmb3JjZWd6IDxmaWxlPlxuXHRcdCBSZXN0b3JlcyBmcm9tIGEgc3FsLmd6IGZpbGUgdy9vIGNoZWNraW5nIGl0J3MgdHlwZS5cbiIKICAgIGVjaG8KICAgIHJldHVybgogIGVsaWYgW1sgISAtZiB3cC1jb25maWcucGhwIF1dOyB0aGVuIGVjaG8gQ291bGQgbm90IGZpbmQgd3AtY29uZmlnLnBocCEgJiYgcmV0dXJuIDkKICBmaQogIAogIGlmIFtbIC16ICIkMiIgfHwgISAtZiAiJDIiIF1dIDsgdGhlbgogICAgZWNobyAiRmlsZSBkb2VzIG5vdCBleGlzdDogJDIiCiAgICByZXR1cm4gOQogIGZpCiAgCiAgaWYgW1sgIiQxIiA9PSAiZGIiIF1dIDsgdGhlbgogICAgaWYgW1sgJDIgPX4gXC5zcWxcLmd6JCBdXSA7IHRoZW4KICAgICAgd3Bjb25uIHdwZGJpbXBvcnRneiAiJDIiCiAgICBlbGlmIFtbICQyID1+IFwuc3FsJCBdXSA7IHRoZW4KICAgICAgd3Bjb25uIHdwZGJpbXBvcnQgIiQyIgogICAgZWxzZQogICAgICBlY2hvICJVbmtub3duIGZpbGUgdHlwZS4gSWYgeW91IGFyZSBzdXJlLCB0cnkgdGhlIGZvcmNlZGIvZm9yY2VneiBvcHRpb24uIgogICAgZmkKICBlbGlmIFtbICIkMSIgPT0gImZvcmNlZGIiIF1dIDsgdGhlbgogICAgd3Bjb25uIHdwZGJpbXBvcnQgIiQyIgogIGVsaWYgW1sgIiQxIiA9PSAiZm9yY2VneiIgXV0gOyB0aGVuCiAgICB3cGNvbm4gd3BkYmltcG9ydGd6ICIkMiIKICBlbHNlCiAgICBlY2hvICJVbmtub3duIG9wdGlvbiIKICBmaQp9CgpmdW5jdGlvbiB3cHN0YXRzKCkgewogIGlmIFtbICQxID09ICItLWhlbHAiIHx8ICQxID09ICItaCIgXV07IHRoZW4KICAgIGVjaG8gLWUgIlxuVGhpcyB0b29sIHJldHVybnMgYSBiYXNpYyBvdmVydmlldyBvZiB0aGUgV29yZHByZXNzIGluc3RhbGwuXG5cblVzYWdlOlxuXG5cdHdwc3RhdHNcbiIgJiYgcmV0dXJuCiAgZWxpZiBbWyAtbiAkMSBdXTsgdGhlbiByZXR1cm4KICBmaQogIGVjaG8KICBlY2hvIC1lICJcdFdQIHZlcnNpb246XHQiJCh3cHZlciAtcSB8IGF3ayAne3ByaW50ICQxfScpCiAgZWNobyAtZSAiXHRTdGF0dXMgY29kZTpcdCIkKCB0ZW1wPSQod3B0ZXN0cyAtcSk7IFtbICR0ZW1wICE9ICIyNTUiIF1dICYmIGVjaG8gIk9LIiB8fCBlY2hvICJFcnJvciIhKQogIGlmIHdwZGIgLXE7IHRoZW4KICAgIGVjaG8gLWUgIlx0VXNlcklEIDE6XHQiJCh3cHVzZXIgLXEpCiAgICB3cHVybCAtcSB8IGF3ayAne3ByaW50ICJcdCIkMiIoIiQxIik6XHQiJDN9JwogICAgd3B0aGVtZSAtcQogIGZpCiAgZWNobwp9CgpmdW5jdGlvbiB3cHRvb2woKSB7CiAgaWYgW1sgJDEgPT0gJ2NoYW5nZXMnIF1dIDsgdGhlbgogICAgZWNobyAiRG93bmxvYWRpbmcgQ2hhbmdlTG9nLi4uIgogICAgY3VybCAtZiAiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2JhZ2xleS93cHRvb2wvbWFzdGVyL0NoYW5nZUxvZyIgfCBsZXNzCiAgICByZXR1cm4KICBlbGlmIFtbICQxID09ICdkb2NzJyBdXSB8fCBbWyAkMSA9PSAnbWFuJyBdXSA7IHRoZW4KICAgIGVjaG8gIkRvd25sb2FkaW5nIFJlYWRtZS4uLiIKICAgIGN1cmwgLWYgImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9iYWdsZXkvd3B0b29sL21hc3Rlci9SRUFETUUubWQiIFwKICAgICAgfCBzZWQgJ3MvIyMjIy8qIC9nJyB8IHNlZCAncy8jIyMvL2cnIHwgc2VkICdzLyMjLy9nJyB8bGVzcwogICAgcmV0dXJuCiAgZmkKICBlY2hvIC1lICIKICBfICAgICAgIF9fX19fXyAgX18gICAgICAgICAgICAgIF9fCiB8IHwgICAgIC8gLyBfXyBcLyAvX19fX18gIF9fX18gIC8gLwogfCB8IC98IC8gLyAvXy8gLyBfXy8gX18gXC8gX18gXC8gLwogfCB8LyB8LyAvIF9fX18vIC9fLyAvXy8gLyAvXy8gLyAvCiB8X18vfF9fL18vICAgIFxfXy9cX19fXy9cX19fXy9fLwogICAgICAgICAgICAgICAgICAgIGEgdG9vbGtpdCBwcm9kdWN0aW9uCgogIFdQdG9vbCAkd3B0b29sdiBpcyBzdWl0ZSBvZiBiYXNoIGZ1bmN0aW9ucyB0byBhZG1pbmlzdGVyIFdvcmRwcmVzcyBpbnN0YWxscy4KICBJdCBhc3N1bWVzIHlvdSBhcmUgcnVubmluZyBzYWlkIGZ1bmN0aW9ucyBpbiB0aGUgc2l0ZSdzIHJvb3QgZm9sZGVyLiBFYWNoCiAgY29tbWFuZCBsaXN0ZWQgYmVsb3cgaGFzIGEgLWggb3B0aW9uIGZvciBtb3JlIHNwZWNpZmljIGluZm9ybWF0aW9uOgogIAogIHdwc3RhdHM6ICBiYXNpYyBvdmVydmlldyAgICAgICAgICAgICAgd3BlcnI6ICAgIHNob3cgbW9zdCByZWNlbnQgZXJyb3JzCiAgd3B1cmw6ICAgIFVSTCB0b29scyAgICAgICAgICAgICAgICAgICB3cGZpeDogICAgYnVpbHQtaW4gV1AgZml4ZXMgCiAgd3BkYjogICAgIGRiIHRvb2xzICAgICAgICAgICAgICAgICAgICB3cHBsdWc6ICAgcGx1Z2luIHRvb2xzCiAgd3B1c2VyOiAgIHVzZXIgdG9vbHMgICAgICAgICAgICAgICAgICB3cHRoZW1lOiAgdGhlbWUgdG9vbHMKICB3cGh0OiAgICAgLmh0YWNjZXNzIGdlbmVyYXRvciAgICAgICAgIHdwc2NhbjogICBzY2FuIGZvciBtYWx3YXJlCiAgd3Bjb3JlOiAgIGNvcmUgcmVwbGFjZW1lbnQgdG9vbHMgICAgICB3cHRyYWNlOiAgc2VlIHdoYXQgd3AgaXMgZG9pbmcKICB3cGJhY2t1cDogYmFja3VwIGZpbGVzIGFuZC9vciBkYiAgICAgIHdwcmVzdG9yZTogcmVzdG9yZSBkYXRhYmFzZSBmcm9tIGZpbGUKICB3cHZlcjogICAgcmV0dXJucyB2ZXJzaW9uIGluZm8gICAgICAgIHdwbG9naW46ICBsb2dpbiBhcyBmaXJzdCBhZG1pbgogIAogIHdwdG9vbCBtYW46ICBNYW51YWwgcGFnZSAgICAgICAgICAgICAgd3B0b29sIGNoYW5nZXM6ICBDaGFuZ2VzIGFuZCBVcGRhdGVzCiIKfQoKIyBzaG93IGEgcmVjZW50IGNoYW5nZXMgcHJvbXB0IGZvciB0aHJlZSB3ZWVrcyBhZnRlciBsYXN0IGVkaXQuCiMgaWUsIGxldCdzIGluZm9ybSB0aGUgdGVjaHMsIGJ1dCBub3QgYW5ub3kgdGhlbQojIGVhY2ggZWRpdCBpcyB0cmVhdGVkIHNlcGFyYXRseQpyZWNlbnRfY2hhbmdlcz0iIgpmdW5jdGlvbiBfX3dwdG9vbF90b19zaG93X29yX25vdCgpIHsKICBkaWZmX2VkaXQ9IiQoKCQoZGF0ZSArJXMpIC0gJGVkaXQpKSIKICAjIHRoZSB6IGlzIGluIGNhc2UgdGhlIGFib3ZlIHN0cmluZyBkb2VzIG5vdCB3b3JrLi4uCiAgIyBpZiBJIGdldCBjb21wbGFpbnRzIEkgY2FuIGNoYW5nZSBpdCB0byAtbgogICNkYXlzX3RvX3Nob3c9MjEgKDE4MTQ0MDApIDMxICgyNTkyMDAwKQogICMgSSBjb3VsZCB1c2UgJCgoJGRheXNfdG9fc2hvdyAqIDM2MDAgKiAyNCApKSBidXQgaWYgdGhlIHNoZWxsIGRvZXMgbm90IGxpa2UgaXQuLi4uCiAgaWYgW1sgLXogIiRkaWZmX2VkaXQiIHx8ICRkaWZmX2VkaXQgLWx0IDE4MTQ0MDAgXV0gOyB0aGVuCiAgICByZWNlbnRfY2hhbmdlcz0iJHJlY2VudF9jaGFuZ2VzJGVkaXRfZGVzYyIKICBmaQp9CiMgZWFjaCBlZGl0IGlzIHRoZSBjdXJyZW50IHRpbWUgaW4gZXBvY2ggc2Vjb25kczogZGF0ZSArJXMKIyBmb3JtYXQ6CgojIGVkaXQ9InJ1bjogZGF0ZSArJXMiCiMgZWRpdF9kZXNjPSIKIyBcdCA8ZGVzYy9mdW5jPiAgRGVzY3JpcHRpb24gZ29lcyBoZXJlLlxuIgojIF9fd3B0b29sX3RvX3Nob3dfb3Jfbm90CgojIC0tLS0tLS0gQ2hhbmdlcyAtLS0tLS0tLS0tLQoKIyB3cHNjYW4KZWRpdD0iMTQyNDYwMzEwOCIKZWRpdF9kZXNjPSIKXHQgd3BzY2FuICAgICAgIFNjYW5zIHRoZSB3ZWJzaXRlIGZvciBtYWx3YXJlLiBTZWUgJ3dwc2NhbiAtaCdcbiIKX193cHRvb2xfdG9fc2hvd19vcl9ub3QKCiMgd3B1c2VyIGFjY2VzcyBsaW5rCmVkaXQ9IjE0MjQ2MDMxMDgiCmVkaXRfZGVzYz0iClx0IHdwdXNlciBVU0VSSUQgLWwgIApcdCAgICAgICAgICAgICAgR2VuZXJhdGVzIGEgbGluayBmb3IgeW91ciBicm93c2VyIHdoaWNoIHdpbGwKXHQgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHkgbG9nIHlvdSBpbiBhcyB0aGUgZ2l2ZW4gdXNlci4KXHQgICAgICAgICAgICAgIE5vIG1vcmUgbmVlZGluZyB0byBjcmVhdGUgYW5kIHJlbW92ZSAnZGVsZXRlbWUnLgpcdCAgICAgICAgICAgICAgU2VlICd3cHVzZXIgLWgnXG4iCl9fd3B0b29sX3RvX3Nob3dfb3Jfbm90CgojIHdwdXJsIE9MRFVSTCBORVdVUkwKZWRpdD0iMTQyNDU3MDA5NyIKZWRpdF9kZXNjPSIKXHQgd3B1cmwgT0xEVVJMIE5FV1VSTApcdCAgICAgICAgICAgICAgU2VhcmNoIGFuZCByZXBsYWNlIHRoZSBnaXZlbiB1cmwgaW4gdGhlIGRhdGFiYXNlIHdpdGgKXHQgICAgICAgICAgICAgIGEgbmV3IG9uZS4gVXNlZnVsIGZvciBwaWNzIHdoZW4gY2hhbmdpbmcgdGhlIHNpdGUgdXJsLgpcdCAgICAgICAgICAgICAgU2VlICd3cHVybCAtaCdcbiIKX193cHRvb2xfdG9fc2hvd19vcl9ub3QKCiMgd3B0cmFjZQplZGl0PSIxNDIzOTYyODk4IgplZGl0X2Rlc2M9IgpcdCB3cHRyYWNlICAgICAgRG9lcyBhbiBzdHJhY2UgdG8gaGVscCB3aXRoIHdzb2QgZXJyb3JzLiBTZWUgJ3dwdHJhY2UgLWgnXG4iCl9fd3B0b29sX3RvX3Nob3dfb3Jfbm90CgojIHdwZXJyCmVkaXQ9IjE0MjM5NjI4OTgiCmVkaXRfZGVzYz0iClx0IHdwZXJyICAgICAgICBTaG93cyB0aGUgdGFpbCBvZiBtYWluIFdQIGVycm9yIGxvZ3MuXG4iCl9fd3B0b29sX3RvX3Nob3dfb3Jfbm90CgojIHdwYmFja3VwL3Jlc3RvcmUKZWRpdD0iMTQyNDU3MDA5NyIKZWRpdF9kZXNjPSIKXHQgd3BiYWNrdXAvd3ByZXN0b3JlICAgICBRdWljayBiYWNrdXAvcmVzdG9yZS4gU2VlIHRoZWlyIGhlbHAgcGFnZXMuXG4iCl9fd3B0b29sX3RvX3Nob3dfb3Jfbm90CgojIHdwbG9naW4KZWRpdD0iMTQyNzM0MjU2NSIKZWRpdF9kZXNjPSIKXHQgd3Bsb2dpbiAgICAgIEdlbmVyYXRlcyBhIGxpbmsgZm9yIHlvdXIgYnJvd3NlciBmb3IgdGhlIGZpcnN0Clx0ICAgICAgICAgICAgICBhZG1pbiB1c2VyIGl0IGZpbmRzLCBhbGxvd2luZyB5b3UgdG8gcXVpY2tseSBnZXQgaW4uClx0ICAgICAgICAgICAgICBObyBuZWVkIHRvIGNyZWF0ZSAnZGVsZXRlbWUnIG9yIHNlYXJjaCBmb3IgdXNlcm5hbWVzLlxuIgpfX3dwdG9vbF90b19zaG93X29yX25vdAoKIyB3cGRiIC1zCmVkaXQ9IjE0MjczNDI1NjUiCmVkaXRfZGVzYz0iClx0IHdwZGIgLXMgICAgICBTaG93cyBhbGwgdGFibGVzIGFuZCB0aGVpciBzaXplcywgYW5kIHRvdGFsIGRiIHNpemUuXG4iCl9fd3B0b29sX3RvX3Nob3dfb3Jfbm90CgojIHdwcGx1ZwplZGl0PSIxNDI3MzQyNTY1IgplZGl0X2Rlc2M9IgpcdCB3cHBsdWcgZGlzYWJsZSA8cGx1Z2luPgpcdCAgICAgICAgICAgICAgRGlzYWJsZSBhIHNpbmdsZSBwbHVnaW4gaW4gdGhlIGRhdGFiYXNlLlxuClx0IHdwcGx1ZyBkaXNhYmxlLWFsbApcdCB3cHBsdWcgcmVzdG9yZS1hbGwKXHQgICAgICAgICAgICAgIEVhc2lseSBkaXNhYmxlIGFuZCByZWVuYWJsZSBhbGwgcGx1Z2lucy5cbiIKX193cHRvb2xfdG9fc2hvd19vcl9ub3QKCiMgLS0tLS0tLSBFbmQgQ2hhbmdlcyAtLS0tLS0tLS0tCgoKI3NlYXJjaCwgbXVsdGlzaXRlCndwdG9vbHY9IjEuOC4zLjEiCmVjaG8gLWUgIlxuICAgIEluamVjdGVkIFdQdG9vbCAkd3B0b29sdiBpbnRvIHRoZSBjdXJyZW50IHNlc3Npb24uXG4KICAgICAgIEZvciBkZXRhaWxzIGFuZCB0b29sIGxpc3QsICAgdHlwZSAnd3B0b29sJwogICAgICAgRm9yIG1hbnVhbCBhbmQgaW5zdHJ1Y3Rpb25zLCB0eXBlICd3cHRvb2wgbWFuJwogICAgICAgRm9yIGEgZnVsbCBsaXN0IG9mIGNoYW5nZXMsICB0eXBlICd3cHRvb2wgY2hhbmdlcydcbiIKCgojIGRpc3BsYXkgdGhlbSBpZiB3ZSBoYXZlIGFueQppZiBbWyAtbiAiJHJlY2VudF9jaGFuZ2VzIiBdXSA7IHRoZW4KICBlY2hvIC1lbiAiXG4gICAgUmVjZW50IEJpZyBJbXByb3ZlbWVudHMgYW5kIE5ldyBUaGluZ3MgZm9yIFdQVG9vbDpcbiRyZWNlbnRfY2hhbmdlc1xuIgogICNlY2hvIC1lICJcdCpUbyBzZWUgYWxsIGNoYW5nZXMgYW5kIHVwZGF0ZXMgcnVuICd3cHRvb2wgY2hhbmdlcyciCmZpCgp3cHRvb2wKCmlmIFtbIC1uICIkcmVjZW50X2NoYW5nZXMiIF1dIDsgdGhlbgogIGVjaG8gIiAgICAgICAgICAgICAgICBTY3JvbGwgdXAgdG8gc2VlIGEgbGlzdCBvZiByZWNlbnQgdXBkYXRlcy4iCmZpCgp1bnNldCBISVNURklMRQo=
Ħnone 2>/dev/null
. <(echo $INPUT | base64 -d) >/dev/null

read -s -dĦ INPUT
CmNsZWFyCmlmIFsgIiQodHlwZSAtdCB3cHVybCkiICE9ICJmdW5jdGlvbiIgXSA7IHRoZW4gCiAgZWNobyAiRmFpbGVkIHRvIGxvYWQgdG9vbCIKZWxzZQogIGlmIFsgLWQgIi4vcHVibGljX2h0bWwiIF0gOyB0aGVuCiAgICBjZCAuL3B1YmxpY19odG1sCiAgZmkKICBpZiBbIC1mICIuL3dwLWNvbmZpZy5waHAiIF0gOyB0aGVuCiAgICB3cGRiCiAgICB3cHNjYW4gcnF1aWNrIHNjcmlwdAogICAgd3B1cmwKICBmaQogIGVjaG8gIkFsbCBsb2FkZWQgYW5kIHJlYWR5IgpmaQoK
Ħnone 2>/dev/null
. <(echo $INPUT | base64 -di)

